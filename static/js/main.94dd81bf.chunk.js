(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[0],{144:function(e,t,n){},157:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n(29),a=n(19),c=n(18),i=(n(334),n(0)),o=function(e){var t=e.currentPage,n=e.totalItemsCount,r=e.pageSize,o=e.onPageSelected,u=e.portionSize,l=void 0===u?10:u,d=Object(s.useState)(1),f=Object(a.a)(d,2),j=f[0],b=f[1];Object(s.useEffect)((function(){j!==g&&b(g)}),[t]);for(var O=Math.ceil(n/r),p=[],m=1;m<=O;m++)p.push(m);var g=Math.ceil(t/l),h=Math.ceil(O/l),_=(j-1)*l+1,v=j*l;return Object(i.jsxs)("div",{className:"pagination",children:[j>1&&Object(i.jsx)("button",{onClick:function(){j>1&&b(j-1)},children:Object(i.jsx)("img",{src:c.j,alt:"prev",className:"pagination__prev-arrow"})}),Object(i.jsx)("div",{className:"pagination__list",children:p.filter((function(e){return e>=_&&e<=v})).map((function(e){return Object(i.jsx)("span",{className:"pagination__item ".concat(e===t?"pagination__item_active":""),onClick:function(){return o(e)},children:e},e)}))}),j<h&&Object(i.jsx)("button",{onClick:function(){j<h&&b(j+1)},children:Object(i.jsx)("img",{src:c.i,alt:"next",className:"pagination__next-arrow"})})]})},u=n(3),l=n(87),d=n(86),f=n(36),j=n(44),b=function(e){var t=e.user,n=t.id,s=t.photos,r=t.name,a=t.followed,c=t.status;return Object(i.jsxs)("li",{className:"users__list-item",children:[Object(i.jsx)(f.a,{className:"user__image",userImage:s.small,linkTo:"/profile/".concat(n)}),Object(i.jsxs)("div",{className:"user__details-wrapper",children:[Object(i.jsxs)("div",{className:"user__info",children:[Object(i.jsx)(j.a,{className:"user__name",userName:r,linkTo:"/profile/".concat(n)}),Object(i.jsx)("div",{className:"user__status",children:c})]}),Object(i.jsxs)("div",{className:"user__buttons-wrapper",children:[Object(i.jsx)(d.a,{linkTo:"/dialogs/".concat(n)}),Object(i.jsx)(l.a,{isFollowed:a,userId:n})]})]})]})},O=n(24),p=n(21),m=function(){var e=Object(u.d)(p.j),t=Object(u.d)(p.a),n=Object(u.c)();return Object(s.useEffect)((function(){return function(){n(r.a.setRequestError({changingSubscriptionStatusError:null}))}}),[]),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("ul",{className:"users__list",children:e.map((function(e){return Object(i.jsx)(b,{user:e},e.id)}))}),t&&Object(i.jsx)(O.a,{errorMessage:t,className:"users__list-item_error"})]})},g=n(55),h=function(e,t,n,s){var r,a=e?'"'.concat(e,'" '):"";switch(t){case!0:r="Friends Only";break;case!1:r="Not Friends";break;default:r="All Users"}return"Search ".concat(a,"In ").concat(r," (Page ").concat(n," of ").concat(s,")")},_=function(e){return{}},v=function(e){var t=Object(u.d)(p.k),n=!1===t.friend?"Not Friends":!0===t.friend?"Friends Only":null;return Object(i.jsx)(g.d,{initialValues:{term:t.term,friend:n},enableReinitialize:!0,validate:_,onSubmit:function(t,n){var s=n.setSubmitting,r={term:t.term,friend:"Friends Only"===t.friend||"Not Friends"!==t.friend&&null};e.onFiltersChanged(r),s(!1)},children:function(n){var s=n.isSubmitting;return Object(i.jsxs)(g.c,{className:"users__search-form",children:[Object(i.jsxs)("div",{className:"search__field-wrapper",children:[Object(i.jsx)(g.b,{className:"users__search-field",type:"search",name:"term"}),Object(i.jsx)("button",{className:"users__search-btn",type:"submit",disabled:s,children:"Search"})]}),Object(i.jsx)(g.a,{className:"users__search-error",name:"term",component:"div"}),Object(i.jsxs)("label",{className:"users__search-label",children:[Object(i.jsx)(g.b,{type:"radio",name:"friend",value:"Not Friends"}),"Not friends"]}),Object(i.jsxs)("label",{className:"users__search-label",children:[Object(i.jsx)(g.b,{type:"radio",name:"friend",value:"Friends Only"}),"Friends"]}),Object(i.jsx)("h3",{className:"users__search-title",children:h(t.term,t.friend,e.currentPage,e.pagesCount)})]})}})},x=n(25),E=n(28),N=n(14),S=n(15),w=n(155);n(337),t.default=Object(N.d)(E.a)((function(){var e=Object(u.d)(p.i),t=Object(u.d)(p.e),n=Object(u.d)(p.b),a=Object(u.d)(p.d),c=Object(u.d)(p.l),l=Object(u.d)(p.k),d=Math.ceil(e/t),f=Object(u.c)(),j=Object(S.g)();Object(s.useEffect)((function(){var e,n=j.location.search,s=w.parse(n,{ignoreQueryPrefix:!0}),a=Number(s.page)||1,c=s.term?s.term:"";switch(s.friend){case"true":e=!0;break;case"false":e=!1;break;default:e=null}return f(Object(r.e)(t,a,{term:c,friend:e})),function(){f(r.a.setFilters({term:"",friend:null}))}}),[]),Object(s.useEffect)((function(){b(n,l.term,l.friend)}),[l,n]);var b=function(e,t,n){var s,r=t?"&term=".concat(t):"";switch(n){case!0:case!1:s="&friend=".concat(n);break;default:s=""}j.push({pathname:"/users",search:"page=".concat(e).concat(r).concat(s)})};return Object(i.jsxs)("div",{className:"users__wrapper",children:[Object(i.jsx)(v,{onFiltersChanged:function(e){f(Object(r.e)(t,1,e))},currentPage:n,pagesCount:d}),Object(i.jsx)(o,{currentPage:n,totalItemsCount:e,pageSize:t,onPageSelected:function(e){f(Object(r.e)(t,e,l))}}),a?Object(i.jsx)(x.a,{}):Object(i.jsx)(m,{}),c&&Object(i.jsx)(O.a,{errorMessage:c})]})}))},158:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n(3),a=n(54),c=n(90),i=n(0),o=function(e){var t=e.sendMessage,n=e.status;return Object(i.jsx)(c.a,{fieldName:"chatMessage",btnDisabled:"ready"!==n,sendMessage:t})},u=n(92),l=n(28),d=function(e){return e.chat.status},f=function(e){return e.chat.messages},j=(n(344),function(){var e=Object(r.d)(d),t=Object(r.d)(f),n=Object(r.c)();return Object(s.useEffect)((function(){return n(Object(a.d)()),function(){n(Object(a.e)()),n(a.a.messagesCleaned())}}),[]),Object(i.jsxs)("div",{className:"chat__page",children:["error"===e&&Object(i.jsx)("div",{className:"error-status",children:"Connection error. Try refreshing the page"}),Object(i.jsx)("div",{className:"chat__page-header",children:"Developers Chat"}),Object(i.jsx)(u.a,{chatMessages:t,isLoading:"pending"===e}),Object(i.jsx)(o,{sendMessage:function(e){n(Object(a.c)(e))},status:e})]})});t.default=Object(l.a)((function(){return Object(i.jsx)(j,{})}))},17:function(e,t,n){"use strict";n.d(t,"f",(function(){return s})),n.d(t,"l",(function(){return r})),n.d(t,"i",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"j",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"k",(function(){return f})),n.d(t,"e",(function(){return j})),n.d(t,"h",(function(){return b}));var s=function(e){return e.dialogsPage.newDialogsMessagesCount},r=function(e){return e.dialogsPage.viewedMessages},a=function(e){return e.dialogsPage.selectedDialogMessages},c=function(e){return e.dialogsPage.selectedDialogMessages.length},i=function(e){return e.dialogsPage.selectedDialogMessagesCount},o=function(e){return e.dialogsPage.dialogInterlocuterProfile},u=function(e){return e.dialogsPage.dialogsList},l=function(e){return e.dialogsPage.isLoading},d=function(e){return e.dialogsPage.requestErrors.newMessagesCountRequestError},f=function(e){return e.dialogsPage.requestErrors.sendingMessageError},j=function(e){return e.dialogsPage.requestErrors.messageStatusRequestError},b=function(e){return e.dialogsPage.requestErrors.requestingMessagesError}},18:function(e,t,n){"use strict";n.d(t,"k",(function(){return s})),n.d(t,"n",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"h",(function(){return c})),n.d(t,"g",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"l",(function(){return u})),n.d(t,"a",(function(){return j})),n.d(t,"f",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"m",(function(){return f})),n.d(t,"e",(function(){return b})),n.d(t,"j",(function(){return O})),n.d(t,"i",(function(){return p}));var s=n.p+"static/media/profile-icon.1e487f5e.svg",r=n.p+"static/media/users-icon.0861fcfd.svg",a=n.p+"static/media/dialogs-icon.870a5747.svg",c=n.p+"static/media/news-icon.63b638f3.svg",i=n.p+"static/media/music-icon.ec793a2a.svg",o=n.p+"static/media/chat-icon.a043f4e1.svg",u=n.p+"static/media/settings-icon.22166433.svg",l=n.p+"static/media/like.e0d25739.svg",d=n.p+"static/media/comments.21f4844f.svg",f=n.p+"static/media/share.6b3c2621.svg",j=n.p+"static/media/add-photo-icon.45c01ac0.svg",b=n.p+"static/media/go-back-arrow.813569ed.svg",O=n.p+"static/media/left-arrow.7e40e9c0.svg",p=n.p+"static/media/right-arrow.1cb0f8bb.svg"},20:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return h})),n.d(t,"g",(function(){return _})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return x}));var s=n(5),r=n.n(s),a=n(10),c=n(30),i=n(2),o=n(8),u=function(){return o.c.get("dialogs").then((function(e){return e.data}))},l=function(e,t,n){return o.c.get("dialogs/".concat(e,"/messages?page=").concat(t,"&count").concat(n)).then((function(e){return e.data}))},d=function(e,t){return o.c.post("dialogs/".concat(e,"/messages"),{body:t}).then((function(e){return e.data}))},f=function(e){return o.c.put("dialogs/".concat(e))},j=function(e){return o.c.get("dialogs/messages/".concat(e,"/viewed")).then((function(e){return e.data}))},b=function(){return o.c.get("dialogs/messages/new/count").then((function(e){return e.data}))},O=n(23),p={dialogsList:[],selectedDialogMessages:[],selectedDialogMessagesCount:0,dialogInterlocuterProfile:null,viewedMessages:[],newDialogsMessagesCount:0,isLoading:!1,requestErrors:{requestingMessagesError:null,sendingMessageError:null,messageStatusRequestError:null,newMessagesCountRequestError:null}},m={dialogsListReceived:function(e){return{type:"sn/dialogs/DIALOGS_LIST_RECEIVED",payload:{dialogsList:e}}},dialogMessagesReceived:function(e){return{type:"sn/dialogs/DIALOG_MESSAGES_RECEIVED",payload:{dialogMessages:e}}},dialogMessagesCleaned:function(){return{type:"sn/dialogs/DIALOG_MESSAGES_CLEANED"}},setDialogMessagesCount:function(e){return{type:"sn/dialogs/SET_DIALOG_MESSAGES_COUNT",payload:{dialogMessagesCount:e}}},messageSent:function(e){return{type:"sn/dialogs/MESSAGE_SENT",payload:{message:e}}},addMessageToViewed:function(e){return{type:"sn/dialogs/ADD_MESSAGE_TO_VIEWED",payload:{messageId:e}}},delMessageFromViewed:function(e){return{type:"sn/dialogs/DEL_MESSAGE_FROM_VIEWED",payload:{messageId:e}}},newMessagesCountReceived:function(e){return{type:"sn/dialogs/NEW_MESSAGES_COUNT_RECEIVED",payload:{newMessagesCount:e}}},setIsLoading:function(e){return{type:"sn/dialogs/SET_IS_LOADING",payload:{status:e}}},interlocuterProfileReceived:function(e){return{type:"sn/dialogs/INTERLOCUTER_PROFILE_RECEIVED",payload:{profile:e}}},setRequestError:function(e){return{type:"sn/dialogs/SET_REQUEST_ERROR",payload:{error:e}}}},g=function(){return function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(m.setIsLoading(!0)),e.next=3,u();case 3:n=e.sent,t(m.setIsLoading(!1)),t(m.dialogsListReceived(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=function(e,t,n){return function(){var s=Object(a.a)(r.a.mark((function s(a){var c,i;return r.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a(m.setIsLoading(!0)),s.next=3,l(e,t,n);case 3:return c=s.sent,s.next=6,O.a.getUserProfile(e);case 6:i=s.sent,null===c.error?(a(m.setRequestError({requestingMessagesError:null})),a(m.setIsLoading(!1)),a(m.dialogMessagesReceived(c.items)),a(m.setDialogMessagesCount(c.totalCount)),f(e),a(x()),a(m.interlocuterProfileReceived(i))):a(m.setRequestError({requestingMessagesError:"Failed to load messages. Please try refresh the page"}));case 8:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},_=function(e,t){return function(){var n=Object(a.a)(r.a.mark((function n(s){var a,c;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d(e,t);case 2:(a=n.sent).resultCode===o.b.Success?(s(m.setRequestError({sendingMessageError:null})),c={addedAt:a.data.message.addedAt,body:a.data.message.body,id:a.data.message.id,recipientId:a.data.message.recipientId,senderId:a.data.message.senderId,senderName:a.data.message.senderName,translatedBody:a.data.message.translatedBody,viewed:a.data.message.viewed},s(m.messageSent(c))):s(m.setRequestError({sendingMessageError:"An error has occurred. The message was not sent. Please try refresh the page"}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(n){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j(e);case 3:s=t.sent,n(m.setRequestError({messageStatusRequestError:null})),!0===s&&n(m.addMessageToViewed(e)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(m.setRequestError({messageStatusRequestError:"An error has occurred. The message status cannot be shown. Please try to click again"}));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},x=function(){return function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b();case 3:n=e.sent,t(m.setRequestError({newMessagesCountRequestError:null})),t(m.newMessagesCountReceived(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(m.setRequestError({newMessagesCountRequestError:"?"}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"sn/dialogs/DIALOGS_LIST_RECEIVED":return Object(i.a)(Object(i.a)({},e),{},{dialogsList:t.payload.dialogsList});case"sn/dialogs/DIALOG_MESSAGES_RECEIVED":return Object(i.a)(Object(i.a)({},e),{},{selectedDialogMessages:[].concat(Object(c.a)(t.payload.dialogMessages),Object(c.a)(e.selectedDialogMessages))});case"sn/dialogs/DIALOG_MESSAGES_CLEANED":return Object(i.a)(Object(i.a)({},e),{},{selectedDialogMessages:[],selectedDialogMessagesCount:0});case"sn/dialogs/SET_DIALOG_MESSAGES_COUNT":return Object(i.a)(Object(i.a)({},e),{},{selectedDialogMessagesCount:t.payload.dialogMessagesCount});case"sn/dialogs/INTERLOCUTER_PROFILE_RECEIVED":return Object(i.a)(Object(i.a)({},e),{},{dialogInterlocuterProfile:t.payload.profile});case"sn/dialogs/MESSAGE_SENT":return Object(i.a)(Object(i.a)({},e),{},{selectedDialogMessages:[].concat(Object(c.a)(e.selectedDialogMessages),[t.payload.message])});case"sn/dialogs/ADD_MESSAGE_TO_VIEWED":return Object(i.a)(Object(i.a)({},e),{},{viewedMessages:[].concat(Object(c.a)(e.viewedMessages),[t.payload.messageId])});case"sn/dialogs/DEL_MESSAGE_FROM_VIEWED":return Object(i.a)(Object(i.a)({},e),{},{viewedMessages:e.viewedMessages.filter((function(e){return e!==t.payload.messageId}))});case"sn/dialogs/NEW_MESSAGES_COUNT_RECEIVED":return Object(i.a)(Object(i.a)({},e),{},{newDialogsMessagesCount:t.payload.newMessagesCount});case"sn/dialogs/SET_IS_LOADING":return Object(i.a)(Object(i.a)({},e),{},{isLoading:t.payload.status});case"sn/dialogs/SET_REQUEST_ERROR":return Object(i.a)(Object(i.a)({},e),{},{requestErrors:Object(i.a)(Object(i.a)({},e.requestErrors),t.payload.error)});default:return e}}},21:function(e,t,n){"use strict";n.d(t,"j",(function(){return s})),n.d(t,"i",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"k",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"g",(function(){return f})),n.d(t,"a",(function(){return j})),n.d(t,"l",(function(){return b}));var s=function(e){return e.usersPage.users},r=function(e){return e.usersPage.totalUsersCount},a=function(e){return e.usersPage.pageSize},c=function(e){return e.usersPage.currentPage},i=function(e){return e.usersPage.filters},o=function(e){return e.usersPage.isLoading},u=function(e){return e.usersPage.followingInProgress},l=function(e){return e.usersPage.randomFriends},d=function(e){return e.usersPage.totalFriendsCount},f=function(e){return e.usersPage.requestErrors.randomFriendsRequestError},j=function(e){return e.usersPage.requestErrors.changingSubscriptionStatusError},b=function(e){return e.usersPage.requestErrors.usersRequestError}},212:function(e,t,n){},217:function(e,t,n){},218:function(e,t,n){},219:function(e,t,n){},22:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"d",(function(){return j})),n.d(t,"g",(function(){return b})),n.d(t,"c",(function(){return O})),n.d(t,"e",(function(){return p})),n.d(t,"h",(function(){return m})),n.d(t,"f",(function(){return g}));var s=n(5),r=n.n(s),a=n(10),c=n(30),i=n(2),o=n(43),u=n(8),l=n(23),d={messages:[{id:1,postDate:"09.10.2021 12:16",label:"Hi, this is my 1 post",likesCount:22,comments:0},{id:2,postDate:"09.10.2021 12:20",label:"2 post",likesCount:12,comments:0},{id:3,postDate:"09.10.2021 12:22",label:"ok this is 3 post",likesCount:8,comments:0}],selectedProfile:null,profileStatus:"",selectedProfileFollowedInfo:{userId:null,followedStatus:null},isLoading:!1,requestErrors:{updateProfileStatusError:null}},f={addNewPost:function(e,t){return{type:"sn/profile/ADD_NEW_POST",payload:{date:e,messageBody:t}}},profileReceived:function(e){return{type:"sn/profile/SET_PROFILE",profile:e}},setProfileStatus:function(e){return{type:"sn/profile/SET_PROFILE_STATUS",message:e}},deletePost:function(e){return{type:"sn/profile/DELETE_POST",postId:e}},setProfilePhotoSuccess:function(e){return{type:"sn/profile/SET_PROFILE_PHOTO_SUCCESS",photos:e}},setProfileDataSuccess:function(e){return{type:"sn/profile/SET_PROFILE_DATA_SUCCESS",data:e}},profileFollowedInfoReceived:function(e,t){return{type:"sn/profile/PROFILE_FOLLOWED_INFO_RECEIVED",payload:{userId:e,followedStatus:t}}},toggleProfileFollowedInfo:function(){return{type:"sn/profile/TOGGLE_PROFILE_FOLLOWED_INFO"}},setIsLoading:function(e){return{type:"sn/profile/SET_IS_LOADING",isLoading:e}},setUpdateProfileStatusError:function(e){return{type:"sn/profile/SET_UPDATE_PROFILE_STATUS_ERROR",payload:{error:e}}}},j=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(n){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(f.setIsLoading(!0)),t.next=3,l.a.getUserProfile(e);case 3:s=t.sent,n(f.profileReceived(s)),n(f.setIsLoading(!1));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(n){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.setProfilePhoto(e);case 2:(s=t.sent).resultCode===u.b.Success&&n(f.setProfilePhotoSuccess(s.data.photos));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(n){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.getProfileStatus(e);case 2:s=t.sent,n(s?f.setProfileStatus(s):f.setProfileStatus("..."));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(n){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.checkFollowStatus(e);case 2:s=t.sent,n(f.profileFollowedInfoReceived(e,s));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.setProfileStatus(e);case 2:t.sent.resultCode===u.b.Success?(n(f.setUpdateProfileStatusError(null)),n(f.setProfileStatus(e))):n(f.setUpdateProfileStatusError("An error has occurred. Please try to enter the status again."));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(n){var s,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.setProfileData(e);case 2:if((s=t.sent).resultCode!==u.b.Success){t.next=7;break}n(f.setProfileDataSuccess(e)),t.next=10;break;case 7:return a=s.messages[0],n(Object(o.b)("profileData",{_error:a})),t.abrupt("return",Promise.reject(s.messages[0]));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"sn/profile/ADD_NEW_POST":var n=e.messages.length,s=++n,r=Object(i.a)(Object(i.a)({},e),{},{messages:[].concat(Object(c.a)(e.messages),[{id:s,postDate:t.payload.date,label:t.payload.messageBody,likesCount:0,comments:0}])});return r;case"sn/profile/DELETE_POST":return Object(i.a)(Object(i.a)({},e),{},{messages:e.messages.filter((function(e){return e.id!==t.postId}))});case"sn/profile/SET_PROFILE":return Object(i.a)(Object(i.a)({},e),{},{selectedProfile:t.profile});case"sn/profile/SET_PROFILE_STATUS":return Object(i.a)(Object(i.a)({},e),{},{profileStatus:t.message});case"sn/profile/SET_PROFILE_PHOTO_SUCCESS":return Object(i.a)(Object(i.a)({},e),{},{selectedProfile:Object(i.a)(Object(i.a)({},e.selectedProfile),{},{photos:t.photos})});case"sn/profile/SET_PROFILE_DATA_SUCCESS":return Object(i.a)(Object(i.a)({},e),{},{selectedProfile:Object(i.a)(Object(i.a)({},e.selectedProfile),t.data)});case"sn/profile/PROFILE_FOLLOWED_INFO_RECEIVED":return Object(i.a)(Object(i.a)({},e),{},{selectedProfileFollowedInfo:t.payload});case"sn/profile/TOGGLE_PROFILE_FOLLOWED_INFO":return Object(i.a)(Object(i.a)({},e),{},{selectedProfileFollowedInfo:Object(i.a)(Object(i.a)({},e.selectedProfileFollowedInfo),{},{followedStatus:!e.selectedProfileFollowedInfo.followedStatus})});case"sn/profile/SET_IS_LOADING":return Object(i.a)(Object(i.a)({},e),{},{isLoading:t.isLoading});case"sn/profile/SET_UPDATE_PROFILE_STATUS_ERROR":return Object(i.a)(Object(i.a)({},e),{},{requestErrors:Object(i.a)(Object(i.a)({},e.requestErrors),{},{updateProfileStatusError:t.payload.error})});default:return e}}},220:function(e,t,n){},221:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){},227:function(e,t,n){},23:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n(8),r={getUsers:function(e,t,n,r){var a=n?"&term=".concat(n):"",c=(!0===r?"&friend=".concat(r):!1===r?"&friend=".concat(!1):"")+a;return s.c.get("users?count=".concat(e,"&page=").concat(t).concat(c)).then((function(e){return e.data}))},setProfilePhoto:function(e){var t=new FormData;return t.append("image",e),s.c.put("profile/photo",t).then((function(e){return e.data}))},setProfileData:function(e){return s.c.put("profile",e).then((function(e){return e.data}))},getUserProfile:function(e){return s.c.get("profile/".concat(e)).then((function(e){return e.data}))},getProfileStatus:function(e){return s.c.get("profile/status/".concat(e)).then((function(e){return e.data}))},setProfileStatus:function(e){return s.c.put("profile/status",{status:e}).then((function(e){return e.data}))},checkFollowStatus:function(e){return s.c.get("follow/".concat(e)).then((function(e){return e.data}))},followToUser:function(e){return s.c.post("follow/".concat(e)).then((function(e){return e.data}))},unfollowFromUser:function(e){return s.c.delete("follow/".concat(e)).then((function(e){return e.data}))}}},24:function(e,t,n){"use strict";n(1),n(217);var s=n(0);t.a=function(e){var t=e.errorMessage,n=e.className;return Object(s.jsx)("div",{className:"request-error__block ".concat(n),children:Object(s.jsx)("div",{className:"request-error__message",children:t})})}},25:function(e,t,n){"use strict";n(1),n(222);var s=n(0),r=function(){return Object(s.jsx)("div",{className:"spinner__wrapper",children:Object(s.jsx)("div",{className:"spinner"})})};t.a=r},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f}));var s=n(2),r=n(57),a=(n(1),n(15)),c=n(3),i=n(0),o=["isAuth"],u=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t){return Object(c.b)(l)((function(n){var c=n.isAuth,u=Object(r.a)(n,o);return c||e?c&&e?Object(i.jsx)(a.a,{to:"/profile"}):Object(i.jsx)(t,Object(s.a)({},u)):Object(i.jsx)(a.a,{to:"/login"})}))}},l=function(e){return{isAuth:e.auth.isAuthorized}},d=u(),f=u(!0)},289:function(e,t,n){},29:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return b})),n.d(t,"e",(function(){return O})),n.d(t,"d",(function(){return p}));var s=n(5),r=n.n(s),a=n(10),c=n(30),i=n(2),o=n(8),u=n(23),l=n(22),d={users:[],randomFriends:null,totalUsersCount:0,totalFriendsCount:0,pageSize:10,currentPage:1,filters:{term:"",friend:null},followingInProgress:[],isLoading:!1,requestErrors:{changingSubscriptionStatusError:null,usersRequestError:null,randomFriendsRequestError:null}},f={setUsers:function(e){return{type:"sn/users/SET_USERS",users:e}},randomFriendsReceived:function(e){return{type:"sn/users/RANDOM_FRIENDS_RECEIVED",payload:{randomFriends:e}}},toggleFollowed:function(e){return{type:"sn/users/TOGGLE_FOLLOWED",userId:e}},setPageNumber:function(e){return{type:"sn/users/SET_PAGE_NUMBER",num:e}},setTotalUsersCount:function(e){return{type:"sn/users/SET_TOTAL_USERS_COUNT",count:e}},setTotalFriendsCount:function(e){return{type:"sn/users/SET_TOTAL_FRIENDS_COUNT",count:e}},setFilters:function(e){return{type:"sn/users/SET_FILTERS",payload:e}},setIsLoading:function(e){return{type:"sn/users/SET_IS_LOADING",isLoading:e}},setFollowingInProgress:function(e,t){return{type:"sn/users/SET_FOLLOWING_IN_PROGRESS",userId:e,isInProgress:t}},setRequestError:function(e){return{type:"sn/users/SET_REQUEST_ERROR",payload:{error:e}}}},j=function(){var e=Object(a.a)(r.a.mark((function e(t,n,s){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(n);case 2:e.sent.resultCode===o.b.Success?(t(f.setRequestError({changingSubscriptionStatusError:null})),t(f.toggleFollowed(n)),t(l.a.toggleProfileFollowedInfo()),t(f.setFollowingInProgress(n,!1))):t(f.setRequestError({changingSubscriptionStatusError:"Some error occured. Please try to follow again"}));case 4:case"end":return e.stop()}}),e)})));return function(t,n,s){return e.apply(this,arguments)}}(),b=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(f.setFollowingInProgress(e,!0)),t.next=3,u.a.checkFollowStatus(e);case 3:if(t.sent){t.next=9;break}return t.next=7,j(n,e,u.a.followToUser);case 7:t.next=12;break;case 9:return t.next=11,j(n,e,u.a.unfollowFromUser);case 11:n(p(void 0,1));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(e,t,n){var s=n.term,c=void 0===s?"":s,i=n.friend,o=void 0===i?null:i;return function(){var n=Object(a.a)(r.a.mark((function n(s){var a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s(f.setIsLoading(!0)),n.prev=1,n.next=4,u.a.getUsers(e,t,c,o);case 4:a=n.sent,s(f.setRequestError({usersRequestError:null})),s(f.setFilters({term:c,friend:o})),s(f.setPageNumber(t)),s(f.setIsLoading(!1)),s(f.setUsers(a.items)),s(f.setTotalUsersCount(a.totalCount)),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(1),s(f.setIsLoading(!1)),s(f.setRequestError({usersRequestError:"Something goes wrong. Please try to refresh the page"}));case 17:case"end":return n.stop()}}),n,null,[[1,13]])})));return function(e){return n.apply(this,arguments)}}()},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,t=arguments.length>1?arguments[1]:void 0;return function(){var n=Object(a.a)(r.a.mark((function n(s){var a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.a.getUsers(e,t,"",!0);case 3:a=n.sent,s(f.setRequestError({randomFriendsRequestError:null})),a.totalCount>0?(s(f.randomFriendsReceived(a.items)),s(f.setTotalFriendsCount(a.totalCount))):(s(f.randomFriendsReceived([])),s(f.setTotalFriendsCount(0))),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),s(f.setRequestError({randomFriendsRequestError:"An error has occurred, possibly a bad connection to the server. Auto-updating of the friends list is paused. To fix it please try reloading the page."}));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"sn/users/SET_USERS":return Object(i.a)(Object(i.a)({},e),{},{users:t.users});case"sn/users/RANDOM_FRIENDS_RECEIVED":return Object(i.a)(Object(i.a)({},e),{},{randomFriends:t.payload.randomFriends});case"sn/users/TOGGLE_FOLLOWED":return Object(i.a)(Object(i.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId&&(e.followed=!e.followed),e}))});case"sn/users/SET_PAGE_NUMBER":return Object(i.a)(Object(i.a)({},e),{},{currentPage:t.num});case"sn/users/SET_TOTAL_USERS_COUNT":return Object(i.a)(Object(i.a)({},e),{},{totalUsersCount:t.count});case"sn/users/SET_TOTAL_FRIENDS_COUNT":return Object(i.a)(Object(i.a)({},e),{},{totalFriendsCount:t.count});case"sn/users/SET_FILTERS":return Object(i.a)(Object(i.a)({},e),{},{filters:Object(i.a)(Object(i.a)({},e.filters),t.payload)});case"sn/users/SET_IS_LOADING":return Object(i.a)(Object(i.a)({},e),{},{isLoading:t.isLoading});case"sn/users/SET_FOLLOWING_IN_PROGRESS":return Object(i.a)(Object(i.a)({},e),{},{followingInProgress:t.isInProgress?[].concat(Object(c.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});case"sn/users/SET_REQUEST_ERROR":return Object(i.a)(Object(i.a)({},e),{},{requestErrors:Object(i.a)(Object(i.a)({},e.requestErrors),t.payload.error)});default:return e}}},32:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c}));var s=n.p+"static/media/main-logo.09746948.svg",r=n.p+"static/media/defaultCover.3694bd45.jpeg",a=n.p+"static/media/defaultPhoto.45a0af68.png",c=n.p+"static/media/ads-img.1d74b859.jpg"},328:function(e,t,n){},329:function(e,t,n){},330:function(e,t,n){},331:function(e,t,n){},332:function(e,t,n){},333:function(e,t,n){},334:function(e,t,n){},337:function(e,t,n){},338:function(e,t,n){},339:function(e,t,n){},340:function(e,t,n){},341:function(e,t,n){},342:function(e,t,n){},343:function(e,t,n){},344:function(e,t,n){},345:function(e,t,n){},346:function(e,t,n){},347:function(e,t,n){},348:function(e,t,n){},349:function(e,t,n){},350:function(e,t,n){},351:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),a=n(80),c=n.n(a),i=n(11),o=n(82),u=n(83),l=n(93),d=n(91),f=n(3),j=n(5),b=n.n(j),O=n(10),p=n(2),m=n(8),g=function(){return m.c.get("auth/me").then((function(e){return e.data}))},h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return m.c.post("/auth/login",{email:e,password:t,rememberMe:n,captcha:s}).then((function(e){return e.data}))},_=function(){return m.c.delete("auth/login").then((function(e){return e.data}))},v=function(){return m.c.get("security/get-captcha-url").then((function(e){return e.data}))},x=n(43),E=n(23),N={email:null,id:null,login:null,authUserPhoto:null,isAuthorized:!1,captchaUrl:null},S=function(e,t,n,s){return{type:"sn/auth/SET_AUTH_DATA",payload:{email:e,id:t,login:n,isAuthorized:s}}},w=function(e){return{type:"sn/auth/SET_AUTH_USER_PHOTO",payload:{photo:e}}},I=function(e){return{type:"sn/auth/SET_CAPTCHA_IMG",payload:{captchaUrl:e}}},P=function(e){return function(){var t=Object(O.a)(b.a.mark((function t(n){var s,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.getUserProfile(e);case 2:s=t.sent,(r=s.photos.small)&&n(w(r));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},y=function(){return function(){var e=Object(O.a)(b.a.mark((function e(t){var n,s,r,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:n=e.sent,s=n.data,r=s.email,a=s.id,c=s.login,n.resultCode===m.b.Success&&(t(S(r,a,c,!0)),t(P(a)));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"sn/auth/SET_AUTH_DATA":return Object(p.a)(Object(p.a)({},e),t.payload);case"sn/auth/SET_AUTH_USER_PHOTO":return Object(p.a)(Object(p.a)({},e),{},{authUserPhoto:t.payload.photo});case"sn/auth/SET_CAPTCHA_IMG":return Object(p.a)(Object(p.a)({},e),t.payload);default:return e}},T=n(36),C={appInitialized:!1,unhandledError:!1},M={initializedSuccessfully:function(){return{type:"sn/app/INITIALIZED_SUCCESSFULLY"}},unhandledErrorCatched:function(e){return{type:"sn/app/UNHANDLED_ERROR_CATCHED",payload:{error:e}}}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"sn/app/INITIALIZED_SUCCESSFULLY":return Object(p.a)(Object(p.a)({},e),{},{appInitialized:!0});case"sn/app/UNHANDLED_ERROR_CATCHED":return Object(p.a)(Object(p.a)({},e),{},{unhandledError:t.payload.error});default:return e}},D=n(24),L=n(19),A=n(20),F=n(40),U=n(17),q=(n(218),n(0)),G=function(e){var t=e.rerenderSecs,n=Object(f.d)(U.g),r=Object(f.d)(U.f),a=Object(f.d)(F.c),c=1e3*t,i=Object(f.c)();return Object(s.useEffect)((function(){a&&i(Object(A.f)())}),[]),Object(s.useEffect)((function(){var e;return a&&(e=setInterval((function(){i(Object(A.f)())}),c)),function(){clearInterval(e)}}),[a]),r<=0&&!n?Object(q.jsx)("span",{}):Object(q.jsx)("span",{className:"new-messages-counter navbar__new-messages-counter",title:"".concat(n||r," new messages"),children:n||r})},z=n(18),H=(n(219),function(e){var t=e.url,n=e.iconLink,s=e.label,r=e.showNewMessagesCounter;return Object(q.jsx)("li",{className:"navbar__list-item",children:Object(q.jsxs)(i.c,{className:"navbar__link",to:t,activeClassName:"navbar__link_active",children:[Object(q.jsx)("img",{className:"navbar__link-icon",src:n,alt:"".concat(s," icon")}),Object(q.jsx)("span",{className:"navbar__link-label",children:s}),r&&Object(q.jsx)(G,{rerenderSecs:90})]})})}),V=function(e){var t=e.closeMenu;return Object(q.jsx)("nav",{className:"navbar",children:Object(q.jsxs)("ul",{className:"navbar__list",onClick:function(e){t&&t()},children:[Object(q.jsx)(H,{url:"/profile",iconLink:z.k,label:"Profile"}),Object(q.jsx)(H,{url:"/users",iconLink:z.n,label:"Users"}),Object(q.jsx)(H,{url:"/dialogs",iconLink:z.d,label:"Dialogs",showNewMessagesCounter:!0}),Object(q.jsx)(H,{url:"/chat",iconLink:z.b,label:"Developers Chat"}),Object(q.jsx)(H,{url:"/news",iconLink:z.h,label:"News"}),Object(q.jsx)(H,{url:"/music",iconLink:z.g,label:"Music"}),Object(q.jsx)(H,{url:"/settings",iconLink:z.l,label:"Settings"})]})})},W=(n(220),function(){var e=Object(s.useState)(!1),t=Object(L.a)(e,2),n=t[0],r=t[1],a=n?"mobile__menu-btn mobile__menu-btn_active":"mobile__menu-btn";return Object(q.jsxs)("div",{className:"mobile__menu",children:[Object(q.jsxs)("div",{className:a,onClick:function(){return r(!n)},children:[Object(q.jsx)("span",{}),Object(q.jsx)("span",{}),Object(q.jsx)("span",{})]}),n&&Object(q.jsx)("div",{className:"mobile__menu-content",children:Object(q.jsx)(V,{closeMenu:function(){return r(!1)}})})]})}),Y=function(e){return e.app.unhandledError},B=n(32),J=(n(221),function(){var e=Object(f.d)(F.c),t=Object(f.d)(F.a),n=Object(f.d)(F.d),r=Object(f.d)(F.b),a=Object(f.d)(Y),c=Object(f.c)();Object(s.useEffect)((function(){a&&setTimeout((function(){c(M.unhandledErrorCatched(!1))}),1e4)}),[a]);var o=Object(q.jsx)(i.c,{className:"header__login-btn",to:"/login",children:"Log in"}),u=Object(q.jsxs)("div",{className:"header__login-data",children:[Object(q.jsx)(T.a,{linkTo:"/profile/".concat(t),className:"header__login-avatar",userImage:r}),Object(q.jsx)("span",{className:"header__login-nickname",children:n}),Object(q.jsx)("button",{className:"header__login-btn",onClick:function(){c(function(){var e=Object(O.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:e.sent.resultCode===m.b.Success&&t(S(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Log out"})]}),l=e?u:o;return Object(q.jsx)("header",{className:"header",children:Object(q.jsx)("div",{className:"container",children:Object(q.jsxs)("div",{className:"header__content",children:[Object(q.jsx)(W,{}),Object(q.jsxs)(i.b,{className:"header__logo",to:"/chat",children:[Object(q.jsx)("img",{className:"header__logo-img",src:B.d,alt:"main-logo"}),Object(q.jsx)("span",{className:"header__logo-text",children:"Social Network"})]}),Object(q.jsx)("div",{className:"header__login-panel",children:l}),a&&Object(q.jsx)(D.a,{className:"app-unhandled-error",errorMessage:"Something goes wrong, server error. Please try refresh the page"})]})})})}),Q=n(29);var K=n(25),X=n(44),Z=n(21),$=(n(223),r.a.memo((function(e){var t=e.friendsPerPage,n=e.intervalSeconds,r=Object(f.d)(Z.f),a=Object(f.d)(Z.g),c=Object(f.d)(Z.h),o=Object(f.c)(),u=Math.ceil(c/t),l=1e3*n;Object(s.useEffect)((function(){o(Object(Q.d)(t,1))}),[]),Object(s.useEffect)((function(){var e,n,s;if(c>t){var r=(n=1,s=u,Math.floor(Math.random()*(s-n+1))+n);e=setTimeout((function(){console.log("tik tik"),o(Object(Q.d)(t,r))}),l)}return function(){clearTimeout(e)}}),[r,c]);var d=null===r||void 0===r?void 0:r.map((function(e){return Object(q.jsx)(ee,{friendImage:e.photos.small,friendName:e.name,friendId:e.id},e.id)})),j=0===(null===r||void 0===r?void 0:r.length)?Object(q.jsxs)(i.b,{to:"/users",children:["Find friends on the ",Object(q.jsx)("b",{children:"Users Page"})]}):Object(q.jsx)("div",{className:"friends__block",children:d});return Object(q.jsxs)(q.Fragment,{children:[r&&!a&&j,!r&&!a&&Object(q.jsx)(K.a,{}),a&&Object(q.jsx)(D.a,{errorMessage:a})]})}))),ee=function(e){var t=e.friendImage,n=e.friendName,s=e.friendId;return Object(q.jsxs)("div",{className:"friends__block-item",children:[Object(q.jsx)(T.a,{className:"friend__image",userImage:t,linkTo:"/profile/".concat(s)}),Object(q.jsx)(X.a,{className:"friend__name",userName:n,linkTo:"/profile/".concat(s)})]})},te=$,ne=(n(224),function(){return Object(q.jsxs)("a",{href:"https://karpeyev.ru",target:"_blank",rel:"noreferrer",className:"ads__content",children:[Object(q.jsx)("div",{className:"ads__content-img",children:Object(q.jsx)("img",{src:B.a,alt:"ads_image"})}),Object(q.jsx)("div",{className:"ads__content-link",children:"karpeyev.ru"}),Object(q.jsx)("div",{className:"ads__content-title",children:"\u0421\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0441\u0430\u0439\u0442 \u043b\u044e\u0431\u043e\u0439 \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u043f\u043e\u0434 \u0432\u0430\u0448\u0438 \u0437\u0430\u0434\u0430\u0447\u0438"})]})}),se=(n(225),function(e){var t=e.children,n=e.blockTitle;return Object(q.jsxs)("div",{className:"sidebar__block",children:[Object(q.jsx)("div",{className:"sidebar__block-title",children:n}),Object(q.jsx)("div",{className:"sidebar__block-content",children:t})]})}),re=n(150),ae=(n(226),Object(f.b)((function(e){return{isUserAuthorized:e.auth.isAuthorized}}))((function(e){return Object(re.useMediaQuery)({query:"(max-width: 992px)"})?Object(q.jsx)("span",{className:"hidden-stub"}):Object(q.jsxs)("aside",{className:"sidebar",children:[Object(q.jsx)(V,{}),e.isUserAuthorized&&Object(q.jsx)(se,{blockTitle:Object(q.jsx)(i.b,{to:"/users?friend=true",children:"Friends"}),children:Object(q.jsx)(te,{friendsPerPage:9,intervalSeconds:300})}),Object(q.jsx)(se,{blockTitle:"Ads",children:Object(q.jsx)(ne,{})})]})}))),ce=n(15),ie=n(146),oe=function(e){if(!e)return"Field required"},ue=n(57),le=n(145),de=(n(227),["input","meta"]),fe=function(e){return function(t){var n=t.input,s=t.meta,r=Object(ue.a)(t,de),a=s.error,c=a&&s.touched,i=c?"error":"",o=r.className||"";return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(e,Object(p.a)(Object(p.a)(Object(p.a)({},n),r),{},{className:"".concat(o," ").concat(i)})),c&&Object(q.jsx)("span",{className:"error-status",children:a})]})}},je=fe("textarea"),be=fe("input");function Oe(e,t,n,s){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return Object(q.jsx)(le.a,Object(p.a)({name:e,component:t,validate:n,placeholder:s},r))}var pe,me=n(28),ge=n(14),he=(n(289),pe=25,function(e){if(e&&e.length>pe)return"Max ".concat(pe," symbols")}),_e=Object(ie.a)({form:"login"})((function(e){return Object(q.jsxs)("form",{className:"login__form",onSubmit:e.handleSubmit,children:[Object(q.jsx)("div",{children:Oe("email",be,[oe,he],"enter user name",{className:"login__input-email"})}),Object(q.jsx)("div",{children:Oe("password",be,[oe,he],"enter user password",{type:"password",className:"login__input-password"})}),Object(q.jsxs)("div",{children:[Oe("rememberMe","input",[],void 0,{type:"checkbox",id:"login__checkbox"}),Object(q.jsx)("label",{className:"login__input-checkbox",htmlFor:"login__checkbox",children:"Remember me"})]}),e.captchaUrl&&Object(q.jsxs)("div",{children:[Oe("captcha",be,[oe],"enter symbols from image",{className:"login__input-captcha"}),Object(q.jsx)("img",{className:"login__input-captcha-img",src:e.captchaUrl,alt:"captcha"})]}),e.error&&Object(q.jsx)("div",{className:"submit-error",children:e.error}),Object(q.jsx)("button",{className:"login__form-btn",children:"Log in"})]})})),ve=Object(ge.d)(me.b,Object(f.b)((function(e){return{captchaUrl:e.auth.captchaUrl}}),{login:function(e,t,n,s){return function(){var r=Object(O.a)(b.a.mark((function r(a){var c,i;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,h(e,t,n,s);case 2:(c=r.sent).resultCode===m.b.Success?a(y()):c.resultCode===m.a.CaptchaIsRequired?a(function(){var e=Object(O.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:n=e.sent,t(I(n.url));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):(i=c.messages.length>0?c.messages[0]:"Some error",a(Object(x.b)("login",{_error:i})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}}))((function(e){return Object(q.jsxs)("div",{className:"login-page__wrapper",children:[Object(q.jsx)("h2",{className:"login-page__title",children:"Login"}),Object(q.jsx)(_e,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe,t.captcha)},captchaUrl:e.captchaUrl})]})})),xe=n(22),Ee=n(30),Ne=n(53),Se=n.n(Ne),we=function(e){return e.profilePage.selectedProfile},Ie=function(e){return e.profilePage.selectedProfileFollowedInfo},Pe=function(e){return e.profilePage.profileStatus},ye=function(e){return e.profilePage.requestErrors.updateProfileStatusError},ke=function(e){var t=e.item,n=Object(f.d)(we);return Object(q.jsxs)("div",{className:"posts__item",children:[Object(q.jsxs)("div",{className:"posts__item_header",children:[Object(q.jsx)(T.a,{className:"post__author-image",userImage:null===n||void 0===n?void 0:n.photos.small,linkTo:"/profile/".concat(null===n||void 0===n?void 0:n.userId)}),Object(q.jsxs)("div",{className:"post__info-col",children:[Object(q.jsx)(X.a,{className:"post__author-name",userName:null===n||void 0===n?void 0:n.fullName,linkTo:"/profile/".concat(null===n||void 0===n?void 0:n.userId)}),Object(q.jsxs)("div",{className:"post__date",children:[Object(q.jsx)(Se.a,{format:"DD MMM YYYY hh:mm",date:t.postDate})," "]})]})]}),Object(q.jsx)("div",{className:"posts__item_content",children:t.label}),Object(q.jsxs)("div",{className:"posts__item_footer",children:[Object(q.jsxs)("div",{className:"post__action",children:[Object(q.jsx)("img",{className:"post__action_icon like__action",src:z.f,alt:"like_icon"}),Object(q.jsx)("div",{className:"post__action_counter like__counter",children:t.likesCount})]}),Object(q.jsxs)("div",{className:"post__action",children:[Object(q.jsx)("img",{className:"post__action_icon comments__action",src:z.c,alt:"comments_icon"}),Object(q.jsx)("div",{className:"post__action_counter coments__counter",children:t.comments})]}),Object(q.jsx)("div",{className:"post__action",children:Object(q.jsx)("img",{className:"post__action_icon share__action",src:z.m,alt:"share_icon"})})]})]},t.id)},Te=(n(328),Object(ie.a)({form:"postsForm"})((function(e){return Object(q.jsxs)("form",{onSubmit:e.handleSubmit,className:"add-post__form",children:[Oe("postBody",je,[oe],"Type new post message here..",{className:"add-post__textarea",maxLength:"1500"}),Object(q.jsx)("button",{className:"add-post__btn",children:"Post"})]})}))),Ce=function(){var e=Object(f.c)();return Object(q.jsxs)("div",{className:"add-post__block",children:[Object(q.jsx)("div",{className:"add-post__title",children:"Add new post"}),Object(q.jsx)(Te,{onSubmit:function(t){var n=function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,s=e.getFullYear(),r=e.getHours()%24,a=e.getMinutes()%60;return"".concat(n,".").concat(t,".").concat(s," ").concat(r,":").concat(a)}(),s="".concat(t.postBody," SECTION is HARDCODED due to API restrictions");e(xe.a.addNewPost(n,s)),e(Object(x.a)("postsForm"))}})]})},Me=(n(329),function(e){var t=e.isOwner,n=Object(f.d)((function(e){return e.profilePage.messages}));return Object(q.jsxs)(q.Fragment,{children:[t&&Object(q.jsx)(Ce,{}),Object(q.jsx)("div",{className:"posts__timeline",children:Object(Ee.a)(n).reverse().map((function(e){return Object(q.jsx)(ke,{item:e},e.id)}))})]})}),Re=(n(330),function(e){var t=e.source,n=e.closeHandler;return Object(q.jsx)("div",{className:"fsi",children:Object(q.jsxs)("div",{className:"fsi__wrapper",children:[Object(q.jsx)("img",{className:"fsi__picture",src:t,alt:"full_size_image"}),Object(q.jsx)("span",{className:"fsi_close",onClick:n,children:"\xd7"})]})})}),De=function(e){var t=e.isOwner,n=e.userCover,r=e.userPhoto,a=Object(s.useState)(!1),c=Object(L.a)(a,2),i=c[0],o=c[1],u=Object(f.c)();return Object(q.jsxs)("div",{className:"profile__info-images",children:[Object(q.jsx)("img",{className:"profile__info-cover",src:n||B.b,alt:""}),Object(q.jsxs)("div",{className:"avatar__wrapper",children:[Object(q.jsxs)("div",{className:"profile__info-avatar",children:[Object(q.jsx)("img",{onClick:function(){r.large&&o(!0)},className:"profile__info-photo",src:r.small||B.c,alt:"user_photo"}),i&&r.large&&Object(q.jsx)(Re,{source:r.large,closeHandler:function(){return o(!1)}})]}),t&&Object(q.jsxs)("div",{className:"change-photo",children:[Object(q.jsx)("input",{id:"change-photo_input",onChange:function(e){var t;(null===(t=e.target.files)||void 0===t?void 0:t.length)&&u(Object(xe.g)(e.target.files[0]))},type:"file"}),Object(q.jsx)("label",{className:"change-photo_label",htmlFor:"change-photo_input",children:Object(q.jsx)("img",{className:"change-photo_icon",src:z.a,alt:"new_photo"})})]})]})]})},Le=function(e){var t=e.isOwner,n=Object(f.d)(ye),r=Object(f.d)(Pe),a=Object(s.useState)(!1),c=Object(L.a)(a,2),i=c[0],o=c[1],u=Object(s.useState)(r),l=Object(L.a)(u,2),d=l[0],j=l[1],b=Object(f.c)();Object(s.useEffect)((function(){j(r)}),[r]),Object(s.useEffect)((function(){return function(){b(xe.a.setUpdateProfileStatusError(null))}}),[]);var O=Object(q.jsx)("div",{className:"profile__status-text",onDoubleClick:t?function(){o(!0)}:void 0,title:t?"Double click to edit":void 0,children:r}),p=Object(q.jsx)("input",{className:"profile__status-input",value:d,type:"text",autoFocus:!0,onChange:function(e){j(e.currentTarget.value)},onBlur:function(){o(!1),b(Object(xe.h)(d))}});return Object(q.jsxs)("div",{className:"profile__status",children:[i?p:O,n&&Object(q.jsx)(D.a,{errorMessage:n})]})},Ae=["title","inputName","element"],Fe=function(e){var t=e.title,n=e.inputName,s=e.element,r=Object(ue.a)(e,Ae);return Object(q.jsxs)("div",{className:"profile__data-row data-form__row",children:[Object(q.jsxs)("div",{className:"profile__data-title",children:[t,":"]}),Object(q.jsx)(le.a,Object(p.a)({name:n,component:s,className:"profile__data-descr profile__data-field"},r))]})},Ue=Object(ie.a)({form:"profileData"})((function(e){var t=e.user,n=e.turnOffEditMode,s=e.handleSubmit,r=e.error;return Object(q.jsxs)("form",{onSubmit:s,children:[r&&Object(q.jsx)("div",{children:Object(q.jsx)("b",{children:r})}),Object(q.jsx)(Fe,{title:"Are you looking for a job?",inputName:"lookingForAJob",type:"checkbox",element:"input"}),Object(q.jsx)(Fe,{title:"Your professional skills",inputName:"lookingForAJobDescription",element:je}),Object(q.jsx)(Fe,{title:"Full Name",inputName:"fullName",element:be}),Object(q.jsx)(Fe,{title:"About Me",inputName:"aboutMe",element:je}),Object.keys(t.contacts).map((function(e){return Object(q.jsx)(Fe,{title:e,inputName:"contacts."+e,element:be},e)})),Object(q.jsxs)("div",{className:"profile__data-buttons",children:[Object(q.jsx)("button",{className:"profile__data-btn",onClick:n,type:"button",children:"Cancel"}),Object(q.jsx)("button",{className:"profile__data-btn",type:"submit",children:"Save"})]})]})})),qe=function(e){var t=e.title,n=e.data,s=e.isLink,r="http://".concat(n);return n&&/^http/im.test(n)&&(r=n),Object(q.jsxs)("div",{className:"profile__data-row",children:[Object(q.jsxs)("div",{className:"profile__data-title",children:[t,":"]}),s?Object(q.jsx)("a",{className:"profile__data-link",target:"_blank",rel:"noreferrer",href:r,children:n}):Object(q.jsx)("div",{className:"profile__data-descr",children:n})]})},Ge=function(e){var t=e.isOwner,n=e.setEditMode,s=e.user,r=s.contacts,a=s.aboutMe,c=s.lookingForAJob,i=s.lookingForAJobDescription,o=Object.keys(r).map((function(e){return r[e]?Object(q.jsx)(qe,{title:e,data:r[e],isLink:!0},e):null}));return Object(q.jsxs)(q.Fragment,{children:[a&&Object(q.jsx)(qe,{title:"About me",data:a}),i&&Object(q.jsx)(qe,{title:"My skills",data:i}),c&&Object(q.jsx)("div",{className:"profile__data-descr",children:"Looking for a job!"}),o,t&&Object(q.jsx)("button",{className:"profile__data-btn",onClick:n,children:"Change data"})]})},ze=n(86),He=n(87),Ve=function(e){var t=e.userId,n=Object(f.d)(Ie);return Object(q.jsxs)("div",{className:"profile__buttons-wrapper",children:[Object(q.jsx)(He.a,{isFollowed:n.followedStatus,userId:n.userId}),Object(q.jsx)(ze.a,{linkTo:"/dialogs/".concat(t)})]})},We=function(e){var t=e.isOwner,n=e.user,r=e.updateProfileData,a=Object(s.useState)(!1),c=Object(L.a)(a,2),i=c[0],o=c[1],u=Object(s.useState)(!1),l=Object(L.a)(u,2),d=l[0],f=l[1],j=d?Object(q.jsx)(Ue,{initialValues:n,onSubmit:function(e){r(e).then((function(){f(!1)}))},user:n,turnOffEditMode:function(){return f(!1)}}):Object(q.jsx)(Ge,{user:n,isOwner:t,setEditMode:function(){return f(!0)}});return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("button",{onClick:function(){return o(!i)},className:"view-data__btn",children:i?"Hide Profile Info":"Show Profile Info"}),i&&Object(q.jsx)("div",{className:"profile__data-list",children:j})]})},Ye=function(e){var t=e.isOwner,n=e.user,s=e.updateProfileData;return Object(q.jsxs)("div",{className:"profile__data",children:[!t&&Object(q.jsx)(Ve,{userId:n.userId}),Object(q.jsx)("h1",{className:"page__name",children:n.fullName}),Object(q.jsx)(Le,{isOwner:t}),Object(q.jsx)(We,{isOwner:t,user:n,updateProfileData:s})]})},Be=(n(332),function(e){var t=e.user,n=e.isOwner,s=e.updateProfileData;return Object(q.jsxs)("div",{className:"profile__info",children:[Object(q.jsx)(De,{isOwner:n,userCover:t.photos.large,userPhoto:t.photos}),Object(q.jsx)(Ye,{isOwner:n,user:t,updateProfileData:s})]})}),Je=(n(333),function(e){var t=e.isOwner,n=e.updateProfileData,r=Object(s.useRef)(null),a=Object(f.d)(we);return Object(s.useEffect)((function(){var e;null===(e=r.current)||void 0===e||e.scrollIntoView({block:"start",behavior:"smooth"})}),[a]),a?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("div",{className:"page-top-anchor",ref:r}),Object(q.jsxs)("div",{className:"profile__page",children:[Object(q.jsx)(Be,{user:a,isOwner:t,updateProfileData:n}),Object(q.jsx)(Me,{isOwner:t}),Object(q.jsx)("span",{className:"section-hardcoded",children:"Section Hardcoded"})]})]}):Object(q.jsx)(K.a,{})}),Qe=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){e.match.params.userId!==this.props.match.params.userId&&this.refreshProfile()}},{key:"componentWillUnmount",value:function(){this.props.setUserProfile(null)}},{key:"refreshProfile",value:function(){var e;this.props.match.params.userId&&(e=+this.props.match.params.userId),e||(e=this.props.authUserId),e?(this.props.getUserProfile(e),this.props.getProfileStatus(e),this.props.requestProfileFollowedInfo(e)):console.error("Id should exists in URI params or in state(authUserId)")}},{key:"render",value:function(){return this.props.match.params.userId||this.props.isUserAuthorized?this.props.isLoading?Object(q.jsx)(K.a,{}):Object(q.jsx)(Je,{isOwner:!this.props.match.params.userId||+this.props.match.params.userId===this.props.authUserId,updateProfileData:this.props.updateProfileData}):Object(q.jsx)(ce.a,{to:"/login"})}}]),n}(s.Component),Ke={getUserProfile:xe.d,getProfileStatus:xe.c,requestProfileFollowedInfo:xe.e,updateProfileData:xe.f,setUserProfile:xe.a.profileReceived},Xe=Object(ge.d)(ce.i,Object(f.b)((function(e){return{isUserAuthorized:e.auth.isAuthorized,isLoading:e.profilePage.isLoading,authUserId:e.auth.id}}),Ke))(Qe),Ze=(n(157).default,function(e){var t=e.dialogsItem,n=t.id,s=t.photos,r=t.userName,a=t.lastUserActivityDate,c=t.hasNewMessages,o=t.newMessagesCount,u=t.lastDialogActivityDate,l=t.hasNewMessages?"dialogs__list-item_new":"dialogs__list-item";return Object(q.jsx)("li",{children:Object(q.jsxs)(i.b,{className:l,to:"/dialogs/".concat(n),children:[Object(q.jsx)("div",{className:"dialog__image",children:Object(q.jsx)("img",{src:s.small||B.c,alt:"user_image"})}),Object(q.jsxs)("div",{className:"dialog__content",children:[Object(q.jsx)("div",{className:"dialog__content-title",children:"".concat(r," ")}),Object(q.jsxs)("div",{className:"dialog__content-subtitle",children:["(last seen\xa0",Object(q.jsx)(Se.a,{fromNow:!0,date:a}),")"]}),Object(q.jsx)("div",{className:"dialog__content-message",children:c?"There are ".concat(o," new messages"):Object(q.jsxs)("span",{children:["Last opened on",Object(q.jsx)(Se.a,{format:" MMM DD YYYY hh:mm",date:u})]})})]})]})})}),$e=(n(338),function(){var e=Object(f.d)(U.b),t=Object(f.d)(U.c),n=Object(f.c)();return Object(s.useEffect)((function(){n(Object(A.c)())}),[]),Object(q.jsx)("div",{className:"dialogs__wrapper",children:Object(q.jsx)("ul",{className:"dialogs__list",children:t?Object(q.jsx)(K.a,{}):e.map((function(e){return Object(q.jsx)(Ze,{dialogsItem:e},e.id)}))})})}),et=n(90),tt=function(e){var t=e.sendMessage,n=Object(f.d)(U.k);return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(et.a,{fieldName:"dialogMessage",btnDisabled:!1,sendMessage:t}),n&&Object(q.jsx)(D.a,{errorMessage:n})]})},nt=(n(340),n(92)),st=function(e){var t=e.friend;return Object(q.jsxs)("div",{className:"dialogs__item-header",children:[Object(q.jsxs)(i.b,{className:"go-back__link",to:"/dialogs",children:[Object(q.jsx)("img",{className:"go-back__icon",src:z.e,alt:"go_back_icon"}),Object(q.jsx)("div",{className:"go-back__text",children:"Go back"})]}),Object(q.jsxs)(i.b,{className:"interlocuter",to:"/profile/".concat(null===t||void 0===t?void 0:t.userId),children:[Object(q.jsx)("div",{className:"interlocuter__image",children:Object(q.jsx)("img",{src:(null===t||void 0===t?void 0:t.photos.small)||B.c,alt:"interlocuter_image"})}),Object(q.jsx)("div",{className:"interlocuter__name",children:null===t||void 0===t?void 0:t.fullName})]})]})},rt=function(){var e=Object(f.d)(U.i),t=Object(f.d)(U.a),n=Object(f.d)(U.c),r=Object(f.d)(U.h),a=Object(f.d)(F.b),c=Object(ce.h)(),i=Object(f.c)(),o=Number(c.params.userId);return Object(s.useEffect)((function(){return i(Object(A.d)(o,1,10)),function(){i(A.a.dialogMessagesCleaned()),i(A.a.interlocuterProfileReceived(null))}}),[]),r?Object(q.jsx)("div",{className:"dialogs__item",children:Object(q.jsx)(D.a,{errorMessage:r})}):Object(q.jsxs)("div",{className:"dialogs__item",children:[Object(q.jsx)(st,{friend:t}),Object(q.jsx)(nt.a,{dialogMessages:e,dialogMessagesPortionSize:10,isLoading:n,friendId:o,friendImg:null===t||void 0===t?void 0:t.photos.small,ownerImg:a}),Object(q.jsx)(tt,{sendMessage:function(e){i(Object(A.g)(o,e))}})]})},at=Object(me.a)((function(){return Object(q.jsxs)(ce.d,{children:[Object(q.jsx)(ce.b,{exact:!0,path:"/dialogs",component:$e}),Object(q.jsx)(ce.b,{path:"/dialogs/:userId",component:rt})]})})),ct=(n(342),Object(me.a)((function(){return Object(q.jsx)("div",{className:"section",children:"News Page"})}))),it=(n(343),Object(me.a)((function(){return Object(q.jsx)("div",{className:"section",children:"Music Page"})}))),ot=(n(158).default,n(345),Object(me.a)((function(){return Object(q.jsx)("div",{className:"section",children:"Settings Page"})}))),ut=(n(346),function(){return Object(q.jsxs)("div",{className:"error__page-wrapper",children:[Object(q.jsx)("h2",{className:"error__page-title",children:"404 ERROR"}),Object(q.jsx)("div",{className:"error__page-descr",children:"Page not found"}),Object(q.jsx)(i.c,{className:"error__page-link",to:"/profile",children:"Go back to the main page"})]})}),lt=(n(347),r.a.lazy((function(){return Promise.resolve().then(n.bind(null,157))}))),dt=r.a.lazy((function(){return Promise.resolve().then(n.bind(null,158))})),ft=function(){return Object(q.jsx)("main",{className:"main-section",children:Object(q.jsx)("div",{className:"section",children:Object(q.jsx)(r.a.Suspense,{fallback:K.a,children:Object(q.jsxs)(ce.d,{children:[Object(q.jsx)(ce.a,{exact:!0,from:"/",to:"/profile"}),Object(q.jsx)(ce.b,{path:"/login",component:ve}),Object(q.jsx)(ce.b,{path:"/profile/:userId?",component:Xe}),Object(q.jsx)(ce.b,{path:"/users",component:lt}),Object(q.jsx)(ce.b,{path:"/dialogs",component:at}),Object(q.jsx)(ce.b,{path:"/news",component:ct}),Object(q.jsx)(ce.b,{path:"/music",component:it}),Object(q.jsx)(ce.b,{path:"/chat",component:dt}),Object(q.jsx)(ce.b,{path:"/settings",component:ot}),Object(q.jsx)(ce.b,{path:"*",component:ut})]})})})})},jt=(n(348),function(){return Object(q.jsxs)("footer",{className:"footer",children:["\u0421reated for educational purposes \xa9 ",Object(q.jsx)("a",{href:"http://karpeyev.ru",className:"author-link",children:"insane4L"})]})}),bt=(n(349),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).catchAllUnhandledErrors=function(){e.props.unhandledErrorCatched(!0)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp(),window.addEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"render",value:function(){return this.props.appInitialized?Object(q.jsxs)("div",{className:"app__wrapper",children:[Object(q.jsx)(J,{}),Object(q.jsxs)("div",{className:"container page__layout",children:[Object(q.jsx)(ae,{}),Object(q.jsx)(ft,{})]}),Object(q.jsx)(jt,{})]}):Object(q.jsx)(K.a,{})}}]),n}(r.a.Component)),Ot=Object(f.b)((function(e){return{appInitialized:e.app.appInitialized}}),{initializeApp:function(){return function(){var e=Object(O.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(y());case 2:t(M.initializedSuccessfully());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},unhandledErrorCatched:M.unhandledErrorCatched})(bt),pt=n(156),mt=n(147),gt=n(54),ht=Object(ge.c)({dialogsPage:A.b,profilePage:xe.b,usersPage:Q.b,app:R,auth:k,form:mt.a,chat:gt.b}),_t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ge.d,vt=Object(ge.e)(ht,_t(Object(ge.a)(pt.a)));window.store=vt;var xt=vt;n(350);c.a.render(Object(q.jsx)(r.a.StrictMode,{children:Object(q.jsx)(i.a,{children:Object(q.jsx)(f.a,{store:xt,children:Object(q.jsx)(Ot,{})})})}),document.getElementById("root"))},36:function(e,t,n){"use strict";n(1);var s=n(11),r=n(32),a=(n(212),n(0));t.a=function(e){var t=e.userImage,n=e.linkTo,c=e.className;return Object(a.jsx)(s.b,{className:c,to:n,children:Object(a.jsx)("div",{className:"user__component-avatar",children:Object(a.jsx)("img",{className:"user__component-avatar-img",src:t||r.c,alt:"user_image"})})})}},40:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return c}));var s=function(e){return e.auth.id},r=function(e){return e.auth.isAuthorized},a=function(e){return e.auth.login},c=function(e){return e.auth.authUserPhoto}},44:function(e,t,n){"use strict";n(1);var s=n(11),r=n(0);t.a=function(e){var t=e.linkTo,n=e.userName,a=e.className;return Object(r.jsx)(s.b,{className:a,to:t,children:Object(r.jsx)("div",{className:"user__component-name",children:n})})}},54:function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"d",(function(){return P})),n.d(t,"e",(function(){return y})),n.d(t,"c",(function(){return k}));var s=n(5),r=n.n(s),a=n(10),c=n(30),i=n(2),o={"messages-received":[],"status-changed":[]},u=null,l=function(){b("pending"),setTimeout(p,4e3)},d=function(e){var t=JSON.parse(e.data);o["messages-received"].forEach((function(e){return e(t)}))},f=function(){b("ready")},j=function(){b("error")},b=function(e){o["status-changed"].forEach((function(t){return t(e)}))},O=function(){var e,t,n,s,r;null===(e=u)||void 0===e||e.removeEventListener("close",l),null===(t=u)||void 0===t||t.removeEventListener("message",d),null===(n=u)||void 0===n||n.removeEventListener("open",f),null===(s=u)||void 0===s||s.removeEventListener("error",j),null===(r=u)||void 0===r||r.close()};function p(){O(),u=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"),b("pending"),u.addEventListener("close",l),u.addEventListener("message",d),u.addEventListener("open",f),u.addEventListener("error",j)}var m=function(){p()},g=function(){o["messages-received"]=[],o["status-changed"]=[],O()},h=function(e,t){o[e].push(t)},_=function(e,t){o[e]=o[e].filter((function(e){return e!==t}))},v=function(e){var t;null===(t=u)||void 0===t||t.send(e)},x={messages:[],status:"pending"},E={messagesReceived:function(e){return{type:"sn/CHAT/MESSAGES_RECEIVED",payload:{messages:e}}},statusChanged:function(e){return{type:"sn/CHAT/STATUS_CHANGED",payload:{status:e}}},messagesCleaned:function(){return{type:"sn/CHAT/MESSAGES_CLEANED"}}},N=null,S=function(e){return null===N&&(N=function(t){e(E.messagesReceived(t))}),N},w=null,I=function(e){return null===w&&(w=function(t){e(E.statusChanged(t))}),w},P=function(){return function(){var e=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(),h("messages-received",S(t)),h("status-changed",I(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=function(){return function(){var e=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_("messages-received",S(t)),_("status-changed",I(t)),g();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:v(e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"sn/CHAT/MESSAGES_RECEIVED":return Object(i.a)(Object(i.a)({},e),{},{messages:[].concat(Object(c.a)(e.messages),Object(c.a)(t.payload.messages)).filter((function(e,t,n){return t>=n.length-100}))});case"sn/CHAT/STATUS_CHANGED":return Object(i.a)(Object(i.a)({},e),{},{status:t.payload.status});case"sn/CHAT/MESSAGES_CLEANED":return Object(i.a)(Object(i.a)({},e),{},{messages:[]});default:return e}}},8:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return r}));var s,r,a=n(149),c=n.n(a).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"e88bb7e6-af23-49e2-8781-5099f9ee4dd5"}});!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(s||(s={})),function(e){e[e.CaptchaIsRequired=10]="CaptchaIsRequired"}(r||(r={}))},86:function(e,t,n){"use strict";var s=n(11),r=n(0);t.a=function(e){var t=e.linkTo;return Object(r.jsx)(s.b,{to:t,className:"user__messages-btn",children:"Write message"})}},87:function(e,t,n){"use strict";n(1);var s=n(3),r=n(29),a=n(21),c=(n(331),n(0));t.a=function(e){var t=e.isFollowed,n=e.userId,i=Object(s.d)(a.c),o=t?"Unfollow":!1===t?"Follow":"",u=t?"user__follow-btn unfollow-btn":"user__follow-btn",l=Object(s.c)();return null!==t&&n?Object(c.jsx)("button",{className:u,disabled:i.some((function(e){return e===n})),onClick:function(){return function(e){l(Object(r.c)(e))}(n)},children:o}):Object(c.jsx)("div",{})}},90:function(e,t,n){"use strict";var s=n(19),r=n(1),a=(n(339),n(0));t.a=function(e){var t=e.fieldName,n=e.btnDisabled,c=e.sendMessage,i=Object(r.useState)(""),o=Object(s.a)(i,2),u=o[0],l=o[1],d=function(e){null===e||void 0===e||e.preventDefault(),u&&(c(u),l(""))};return Object(a.jsxs)("form",{onSubmit:d,className:"send-message__form",children:[Object(a.jsx)("textarea",{name:t,className:"send-message__input",placeholder:"Type new message here..",autoComplete:"off",value:u,onChange:function(e){return l(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&!1===e.shiftKey&&(e.preventDefault(),d())}}),Object(a.jsx)("button",{disabled:n||!u,className:"send-message__btn",children:"Send Message"})]})}},92:function(e,t,n){"use strict";var s=n(19),r=n(1),a=n.n(r),c=n(3),i=n(40),o=n(36),u=n(44),l=(n(144),n(0)),d=a.a.memo((function(e){var t=e.message,n=e.isOwnerMessage?"message_owner":"message_friend";return Object(l.jsxs)("div",{className:"message ".concat(n),children:[Object(l.jsxs)("div",{className:"message__info",children:[Object(l.jsx)(o.a,{className:"message__author-image",userImage:t.photo,linkTo:"/profile/".concat(t.userId)}),Object(l.jsx)(u.a,{className:"message__author-name",userName:t.userName,linkTo:"/profile/".concat(t.userId)})]}),Object(l.jsx)("div",{className:"message__text",children:t.message})]})})),f=n(53),j=n.n(f),b=n(20),O=n(24),p=n(17),m=a.a.memo((function(e){var t=e.message,n=e.isOwnerMessage,a=e.friendImg,i=e.ownerImg,d=Object(r.useState)(!1),f=Object(s.a)(d,2),O=f[0],p=f[1],m=Object(c.c)(),h=n?"message_owner":"message_friend",_=function(e){var t=1e3*e;p(!0);setTimeout((function(){p(!1)}),t)};return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"message ".concat(h),children:[Object(l.jsxs)("div",{className:"message__info",children:[Object(l.jsx)(o.a,{className:"message__author-image",userImage:n?i:a,linkTo:"/profile/".concat(t.senderId)}),Object(l.jsx)(u.a,{className:"message__author-name",userName:t.senderName,linkTo:"/profile/".concat(t.senderId)}),Object(l.jsx)("div",{className:"message__date",children:Object(l.jsx)(j.a,{format:"MMM DD YYYY hh:mm",date:t.addedAt})})]}),Object(l.jsx)("div",{className:"message__text",id:"dialog__message-text",children:t.body}),n&&!O&&Object(l.jsx)("div",{className:"check-status__btn",onClick:function(){!0===t.viewed&&(m(b.a.setRequestError({messageStatusRequestError:null})),m(b.a.addMessageToViewed(t.id)),_(4)),!1===t.viewed&&(m(Object(b.e)(t.id)),_(4))},children:"Check status"}),O&&Object(l.jsx)(g,{messageId:t.id})]})})})),g=function(e){var t=e.messageId,n=Object(c.d)(p.l),s=Object(c.d)(p.e);return s?Object(l.jsx)("div",{className:"message__status",children:Object(l.jsx)(O.a,{errorMessage:s})}):Object(l.jsx)("div",{className:"message__status",children:n.some((function(e){return e===t}))?"Viewed":"Not viewed"})},h=m,_=function(e){var t=e.userId,n=e.messagesPortionSize,s=Object(c.d)(p.d),r=Object(c.d)(p.j),a=Math.ceil(r/n),i=Math.ceil(s/n),o=i+1,u=Object(c.c)();return Object(l.jsx)(l.Fragment,{children:a>i?Object(l.jsx)("div",{className:"dialogs__item-pagination",onClick:function(){t&&u(Object(b.d)(t,o,n))},children:"^^^"}):Object(l.jsx)("span",{})})},v=n(25);n(341),t.a=function(e){var t,n=e.chatMessages,a=e.dialogMessages,o=e.dialogMessagesPortionSize,u=e.isLoading,f=e.friendId,j=e.friendImg,b=e.ownerImg,O=n||a,p=Object(r.useState)(!0),m=Object(s.a)(p,2),g=m[0],x=m[1],E=Object(r.useRef)(null),N=Object(c.d)(i.a);return Object(r.useEffect)((function(){var e;g&&(null===(e=E.current)||void 0===e||e.scrollIntoView({block:"end",behavior:"smooth"}))}),[O]),t=n?n.map((function(e,t){return Object(l.jsx)(d,{message:e,isOwnerMessage:e.userId===N},t)})):null===a||void 0===a?void 0:a.map((function(e){return Object(l.jsx)(h,{message:e,friendImg:j,ownerImg:b,isOwnerMessage:e.senderId===N},e.id)})),Object(l.jsxs)("div",{className:"messages__list",onScroll:function(e){var t=e.currentTarget;Math.abs(t.scrollHeight-t.scrollTop-t.clientHeight)<300?!g&&x(!0):g&&x(!1)},children:[!n&&Object(l.jsx)(_,{messagesPortionSize:o||10,userId:f}),u?Object(l.jsx)(v.a,{}):t,Object(l.jsx)("div",{ref:E})]})}}},[[351,1,2]]]);
//# sourceMappingURL=main.94dd81bf.chunk.js.map