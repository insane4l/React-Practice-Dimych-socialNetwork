(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[0],{147:function(e,t,n){},161:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),a=n(29),c=n(20),i=n(18),o=n(87),u=(n(339),n(0)),l=r.a.memo((function(e){var t=e.currentPage,n=e.totalItemsCount,r=e.pageSize,a=e.onPageSelected,l=e.portionSize,d=void 0===l?10:l,f=Object(s.useState)(t),j=Object(c.a)(f,2),b=j[0],m=j[1];Object(o.useMediaQuery)({query:"(max-width: 992px)"})&&(d=5),Object(s.useEffect)((function(){b!==h&&m(h)}),[t]);for(var O=Math.ceil(n/r),p=[],g=1;g<=O;g++)p.push(g);var h=Math.ceil(t/d),_=Math.ceil(O/d),v=(b-1)*d+1,x=b*d;return Object(u.jsxs)("div",{className:"pagination",children:[b>1?Object(u.jsx)("button",{onClick:function(){b>1&&m(b-1)},className:"pagination__prev-btn",children:Object(u.jsx)("img",{src:i.j,alt:"prev",className:"pagination__prev-arrow"})}):Object(u.jsx)("div",{className:"pagination__btn-stub"}),Object(u.jsx)("div",{className:"pagination__list",children:p.filter((function(e){return e>=v&&e<=x})).map((function(e){return Object(u.jsx)("button",{className:"pagination__item ".concat(e===t?"pagination__item_active":""),onClick:function(){return a(e)},children:e},e)}))}),b<_?Object(u.jsx)("button",{onClick:function(){b<_&&m(b+1)},className:"pagination__next-btn",children:Object(u.jsx)("img",{src:i.i,alt:"next",className:"pagination__next-arrow"})}):Object(u.jsx)("div",{className:"pagination__btn-stub"})]})})),d=n(3),f=n(90),j=n(89),b=n(36),m=n(45),O=r.a.memo((function(e){var t=e.user,n=e.isAuthorized,s=e.authUserId,r=t.id,a=t.photos,c=t.name,i=t.followed,o=t.status;return Object(u.jsxs)("li",{className:"users__list-item",children:[Object(u.jsx)(b.a,{className:"user__image",userImage:a.small,linkTo:"/profile/".concat(r)}),Object(u.jsxs)("div",{className:"user__details-wrapper",children:[Object(u.jsxs)("div",{className:"user__info",children:[Object(u.jsx)(m.a,{className:"user__name",userName:c,linkTo:"/profile/".concat(r)}),Object(u.jsx)("div",{className:"user__status",children:o})]}),n&&s!==r&&Object(u.jsxs)("div",{className:"user__buttons-wrapper",children:[Object(u.jsx)(j.a,{linkTo:"/dialogs/".concat(r)}),Object(u.jsx)(f.a,{isFollowed:i,userId:r})]})]})]})})),p=n(25),g=n(22),h=r.a.memo((function(){var e=Object(d.d)((function(e){return e.auth.isAuthorized})),t=Object(d.d)((function(e){return e.auth.id})),n=Object(d.d)(g.j),r=Object(d.d)(g.a),c=Object(d.c)();return Object(s.useEffect)((function(){return function(){c(a.a.setRequestError({changingSubscriptionStatusError:null}))}}),[c]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("ul",{className:"users__list",children:n.map((function(n){return Object(u.jsx)(O,{user:n,isAuthorized:e,authUserId:t},n.id)}))}),r&&Object(u.jsx)(p.a,{errorMessage:r,className:"users__list-item_error"})]})})),_=n(58),v=function(e){return{}},x=r.a.memo((function(e){var t=Object(d.d)((function(e){return e.auth.isAuthorized})),n=Object(d.d)(g.k),s=!1===n.friend?"Not Friends":!0===n.friend?"Friends Only":null;return Object(u.jsx)(_.d,{initialValues:{term:n.term,friend:s},enableReinitialize:!0,validate:v,onSubmit:function(t,n){var s=n.setSubmitting,r={term:t.term,friend:"Friends Only"===t.friend||"Not Friends"!==t.friend&&null};e.onFiltersChanged(r),s(!1)},children:function(n){var s=n.isSubmitting;return Object(u.jsxs)(_.c,{className:"users__search-form",children:[Object(u.jsxs)("div",{className:"search__field-wrapper",children:[Object(u.jsx)(_.b,{className:"users__search-field",type:"search",name:"term"}),Object(u.jsx)("button",{className:"users__search-btn",type:"submit",disabled:s,children:"Search"})]}),Object(u.jsx)(_.a,{className:"users__search-error",name:"term",component:"div"}),t&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("label",{className:"users__search-label",children:[Object(u.jsx)(_.b,{type:"radio",name:"friend",value:"Not Friends"}),"Not friends"]}),Object(u.jsxs)("label",{className:"users__search-label",children:[Object(u.jsx)(_.b,{type:"radio",name:"friend",value:"Friends Only"}),"Friends"]}),Object(u.jsx)("h3",{className:"users__search-title",children:e.searchTitle})]})]})}})})),E=n(26),N=n(15),S=n(159),w=n(19),I=(n(342),r.a.memo((function(){var e=Object(d.d)(g.i),t=Object(d.d)(g.e),n=Object(d.d)(g.b),r=Object(d.d)(g.d),c=Object(d.d)(g.l),i=Object(d.d)(g.k),o=Math.ceil(e/t),f=function(e,t,n,s){var r,a=e?'"'.concat(e,'" '):"";switch(t){case!0:r="Friends Only";break;case!1:r="Not Friends";break;default:r="All Users"}return"Search ".concat(a,"In ").concat(r," (Page ").concat(n," of ").concat(s,")")}(i.term,i.friend,n,o),j=Object(d.c)(),b=Object(N.g)();Object(s.useEffect)((function(){var e,n=b.location.search,s=S.parse(n,{ignoreQueryPrefix:!0}),r=Number(s.page)||1,c=s.term?s.term:"";switch(s.friend){case"true":e=!0;break;case"false":e=!1;break;default:e=null}return j(Object(a.e)(t,r,{term:c,friend:e})),function(){j(a.a.setFilters({term:"",friend:null}))}}),[]),Object(s.useEffect)((function(){m(n,i.term,i.friend)}),[i,n]);var m=function(e,t,n){var s,r=t?"&term=".concat(t):"";switch(n){case!0:case!1:s="&friend=".concat(n);break;default:s=""}b.push({pathname:"/users",search:"page=".concat(e).concat(r).concat(s)})},O=Object(s.useCallback)((function(e){j(Object(a.e)(t,1,e))}),[j,t]);return Object(u.jsx)(w.a,{pageTitle:f,children:Object(u.jsxs)("div",{className:"users__wrapper",children:[Object(u.jsx)(x,{onFiltersChanged:O,currentPage:n,pagesCount:o,searchTitle:f}),Object(u.jsx)(l,{currentPage:n,totalItemsCount:e,pageSize:t,onPageSelected:function(e){j(Object(a.e)(t,e,i))}}),r?Object(u.jsx)(E.a,{}):Object(u.jsx)(h,{}),c&&Object(u.jsx)(p.a,{errorMessage:c})]})})})));t.default=I},162:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),a=n(3),c=n(57),i=n(93),o=n(0),u=r.a.memo((function(e){var t=e.sendMessage,n=e.status;return Object(o.jsx)(i.a,{fieldName:"chatMessage",btnDisabled:"ready"!==n,sendMessage:t})})),l=n(95),d=n(37),f=function(e){return e.chat.status},j=function(e){return e.chat.messages},b=n(19),m=(n(349),r.a.memo((function(){return Object(o.jsx)(O,{})}))),O=r.a.memo((function(){var e=Object(a.d)(f),t=Object(a.d)(j),n=Object(a.c)(),r=Object(s.useCallback)((function(e){n(Object(c.c)(e))}),[n]);return Object(s.useEffect)((function(){return n(Object(c.d)()),function(){n(Object(c.e)()),n(c.a.messagesCleaned())}}),[n]),Object(o.jsx)(b.a,{pageTitle:"Developers Chat",children:Object(o.jsxs)("div",{className:"chat__page",children:["error"===e&&Object(o.jsx)("div",{className:"error-status",children:"Connection error. Try refreshing the page"}),Object(o.jsx)("div",{className:"chat__page-header",children:"Developers Chat"}),Object(o.jsx)(l.a,{chatMessages:t,isLoading:"pending"===e}),Object(o.jsx)(u,{sendMessage:r,status:e})]})})}));t.default=Object(d.a)(m)},17:function(e,t,n){"use strict";n.d(t,"f",(function(){return s})),n.d(t,"l",(function(){return r})),n.d(t,"i",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"j",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"k",(function(){return f})),n.d(t,"e",(function(){return j})),n.d(t,"h",(function(){return b}));var s=function(e){return e.dialogsPage.newDialogsMessagesCount},r=function(e){return e.dialogsPage.viewedMessages},a=function(e){return e.dialogsPage.selectedDialogMessages},c=function(e){return e.dialogsPage.selectedDialogMessages.length},i=function(e){return e.dialogsPage.selectedDialogMessagesCount},o=function(e){return e.dialogsPage.dialogInterlocuterProfile},u=function(e){return e.dialogsPage.dialogsList},l=function(e){return e.dialogsPage.isLoading},d=function(e){return e.dialogsPage.requestErrors.newMessagesCountRequestError},f=function(e){return e.dialogsPage.requestErrors.sendingMessageError},j=function(e){return e.dialogsPage.requestErrors.messageStatusRequestError},b=function(e){return e.dialogsPage.requestErrors.requestingMessagesError}},18:function(e,t,n){"use strict";n.d(t,"k",(function(){return s})),n.d(t,"n",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"h",(function(){return c})),n.d(t,"g",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"l",(function(){return u})),n.d(t,"a",(function(){return j})),n.d(t,"f",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"m",(function(){return f})),n.d(t,"e",(function(){return b})),n.d(t,"j",(function(){return m})),n.d(t,"i",(function(){return O}));var s=n.p+"static/media/profile-icon.1e487f5e.svg",r=n.p+"static/media/users-icon.0861fcfd.svg",a=n.p+"static/media/dialogs-icon.870a5747.svg",c=n.p+"static/media/news-icon.63b638f3.svg",i=n.p+"static/media/music-icon.ec793a2a.svg",o=n.p+"static/media/chat-icon.a043f4e1.svg",u=n.p+"static/media/settings-icon.22166433.svg",l=n.p+"static/media/like.e0d25739.svg",d=n.p+"static/media/comments.21f4844f.svg",f=n.p+"static/media/share.6b3c2621.svg",j=n.p+"static/media/add-photo-icon.45c01ac0.svg",b=n.p+"static/media/go-back-arrow.813569ed.svg",m=n.p+"static/media/left-arrow.7e40e9c0.svg",O=n.p+"static/media/right-arrow.1cb0f8bb.svg"},19:function(e,t,n){"use strict";var s=n(1),r=n.n(s),a=n(51),c=(n(293),n(0)),i=r.a.memo((function(e){var t=e.pageTitle,n=e.canonicalLink,s=e.children;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(a.a,{children:[Object(c.jsx)("title",{children:t}),n&&Object(c.jsx)("link",{rel:"canonical",href:n})]}),Object(c.jsx)("div",{className:"section",children:s})]})}));t.a=i},21:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return h})),n.d(t,"g",(function(){return _})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return x}));var s=n(6),r=n.n(s),a=n(10),c=n(30),i=n(2),o=n(8),u=function(){return o.c.get("dialogs").then((function(e){return e.data}))},l=function(e,t,n){return o.c.get("dialogs/".concat(e,"/messages?page=").concat(t,"&count").concat(n)).then((function(e){return e.data}))},d=function(e,t){return o.c.post("dialogs/".concat(e,"/messages"),{body:t}).then((function(e){return e.data}))},f=function(e){return o.c.put("dialogs/".concat(e))},j=function(e){return o.c.get("dialogs/messages/".concat(e,"/viewed")).then((function(e){return e.data}))},b=function(){return o.c.get("dialogs/messages/new/count").then((function(e){return e.data}))},m=n(24),O={dialogsList:[],selectedDialogMessages:[],selectedDialogMessagesCount:0,dialogInterlocuterProfile:null,viewedMessages:[],newDialogsMessagesCount:0,isLoading:!1,requestErrors:{requestingMessagesError:null,sendingMessageError:null,messageStatusRequestError:null,newMessagesCountRequestError:null}},p={dialogsListReceived:function(e){return{type:"sn/dialogs/DIALOGS_LIST_RECEIVED",payload:{dialogsList:e}}},dialogMessagesReceived:function(e){return{type:"sn/dialogs/DIALOG_MESSAGES_RECEIVED",payload:{dialogMessages:e}}},dialogMessagesCleaned:function(){return{type:"sn/dialogs/DIALOG_MESSAGES_CLEANED"}},setDialogMessagesCount:function(e){return{type:"sn/dialogs/SET_DIALOG_MESSAGES_COUNT",payload:{dialogMessagesCount:e}}},messageSent:function(e){return{type:"sn/dialogs/MESSAGE_SENT",payload:{message:e}}},addMessageToViewed:function(e){return{type:"sn/dialogs/ADD_MESSAGE_TO_VIEWED",payload:{messageId:e}}},delMessageFromViewed:function(e){return{type:"sn/dialogs/DEL_MESSAGE_FROM_VIEWED",payload:{messageId:e}}},newMessagesCountReceived:function(e){return{type:"sn/dialogs/NEW_MESSAGES_COUNT_RECEIVED",payload:{newMessagesCount:e}}},setIsLoading:function(e){return{type:"sn/dialogs/SET_IS_LOADING",payload:{status:e}}},interlocuterProfileReceived:function(e){return{type:"sn/dialogs/INTERLOCUTER_PROFILE_RECEIVED",payload:{profile:e}}},setRequestError:function(e){return{type:"sn/dialogs/SET_REQUEST_ERROR",payload:{error:e}}}},g=function(){return function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(p.setIsLoading(!0)),e.next=3,u();case 3:n=e.sent,t(p.setIsLoading(!1)),t(p.dialogsListReceived(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=function(e,t,n){return function(){var s=Object(a.a)(r.a.mark((function s(a){var c,i;return r.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a(p.setIsLoading(!0)),s.next=3,l(e,t,n);case 3:return c=s.sent,s.next=6,m.a.getUserProfile(e);case 6:i=s.sent,null===c.error?(a(p.setRequestError({requestingMessagesError:null})),a(p.setIsLoading(!1)),a(p.dialogMessagesReceived(c.items)),a(p.setDialogMessagesCount(c.totalCount)),f(e),a(x()),a(p.interlocuterProfileReceived(i))):a(p.setRequestError({requestingMessagesError:"Failed to load messages. Please try refresh the page"}));case 8:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},_=function(e,t){return function(){var n=Object(a.a)(r.a.mark((function n(s){var a,c;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d(e,t);case 2:(a=n.sent).resultCode===o.b.Success?(s(p.setRequestError({sendingMessageError:null})),c={addedAt:a.data.message.addedAt,body:a.data.message.body,id:a.data.message.id,recipientId:a.data.message.recipientId,senderId:a.data.message.senderId,senderName:a.data.message.senderName,translatedBody:a.data.message.translatedBody,viewed:a.data.message.viewed},s(p.messageSent(c))):s(p.setRequestError({sendingMessageError:"An error has occurred. The message was not sent. Please try refresh the page"}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(n){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j(e);case 3:s=t.sent,n(p.setRequestError({messageStatusRequestError:null})),!0===s&&n(p.addMessageToViewed(e)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(p.setRequestError({messageStatusRequestError:"An error has occurred. The message status cannot be shown. Please try to click again"}));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},x=function(){return function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b();case 3:n=e.sent,t(p.setRequestError({newMessagesCountRequestError:null})),t(p.newMessagesCountReceived(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(p.setRequestError({newMessagesCountRequestError:"?"}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"sn/dialogs/DIALOGS_LIST_RECEIVED":return Object(i.a)(Object(i.a)({},e),{},{dialogsList:t.payload.dialogsList});case"sn/dialogs/DIALOG_MESSAGES_RECEIVED":return Object(i.a)(Object(i.a)({},e),{},{selectedDialogMessages:[].concat(Object(c.a)(t.payload.dialogMessages),Object(c.a)(e.selectedDialogMessages))});case"sn/dialogs/DIALOG_MESSAGES_CLEANED":return Object(i.a)(Object(i.a)({},e),{},{selectedDialogMessages:[],selectedDialogMessagesCount:0});case"sn/dialogs/SET_DIALOG_MESSAGES_COUNT":return Object(i.a)(Object(i.a)({},e),{},{selectedDialogMessagesCount:t.payload.dialogMessagesCount});case"sn/dialogs/INTERLOCUTER_PROFILE_RECEIVED":return Object(i.a)(Object(i.a)({},e),{},{dialogInterlocuterProfile:t.payload.profile});case"sn/dialogs/MESSAGE_SENT":return Object(i.a)(Object(i.a)({},e),{},{selectedDialogMessages:[].concat(Object(c.a)(e.selectedDialogMessages),[t.payload.message])});case"sn/dialogs/ADD_MESSAGE_TO_VIEWED":return Object(i.a)(Object(i.a)({},e),{},{viewedMessages:[].concat(Object(c.a)(e.viewedMessages),[t.payload.messageId])});case"sn/dialogs/DEL_MESSAGE_FROM_VIEWED":return Object(i.a)(Object(i.a)({},e),{},{viewedMessages:e.viewedMessages.filter((function(e){return e!==t.payload.messageId}))});case"sn/dialogs/NEW_MESSAGES_COUNT_RECEIVED":return Object(i.a)(Object(i.a)({},e),{},{newDialogsMessagesCount:t.payload.newMessagesCount});case"sn/dialogs/SET_IS_LOADING":return Object(i.a)(Object(i.a)({},e),{},{isLoading:t.payload.status});case"sn/dialogs/SET_REQUEST_ERROR":return Object(i.a)(Object(i.a)({},e),{},{requestErrors:Object(i.a)(Object(i.a)({},e.requestErrors),t.payload.error)});default:return e}}},216:function(e,t,n){},22:function(e,t,n){"use strict";n.d(t,"j",(function(){return s})),n.d(t,"i",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"k",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"g",(function(){return f})),n.d(t,"a",(function(){return j})),n.d(t,"l",(function(){return b}));var s=function(e){return e.usersPage.users},r=function(e){return e.usersPage.totalUsersCount},a=function(e){return e.usersPage.pageSize},c=function(e){return e.usersPage.currentPage},i=function(e){return e.usersPage.filters},o=function(e){return e.usersPage.isLoading},u=function(e){return e.usersPage.followingInProgress},l=function(e){return e.usersPage.randomFriends},d=function(e){return e.usersPage.totalFriendsCount},f=function(e){return e.usersPage.requestErrors.randomFriendsRequestError},j=function(e){return e.usersPage.requestErrors.changingSubscriptionStatusError},b=function(e){return e.usersPage.requestErrors.usersRequestError}},221:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){},227:function(e,t,n){},228:function(e,t,n){},229:function(e,t,n){},23:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"d",(function(){return j})),n.d(t,"g",(function(){return b})),n.d(t,"c",(function(){return m})),n.d(t,"e",(function(){return O})),n.d(t,"h",(function(){return p})),n.d(t,"f",(function(){return g}));var s=n(6),r=n.n(s),a=n(10),c=n(30),i=n(2),o=n(44),u=n(8),l=n(24),d={messages:[{id:1,postDate:"09.10.2021 12:16",label:"Hi, this is my 1 post",likesCount:22,comments:0},{id:2,postDate:"09.10.2021 12:20",label:"2 post",likesCount:12,comments:0},{id:3,postDate:"09.10.2021 12:22",label:"ok this is 3 post",likesCount:8,comments:0}],selectedProfile:null,profileStatus:"",selectedProfileFollowedInfo:{userId:null,followedStatus:null},isLoading:!1,requestErrors:{updateProfileStatusError:null}},f={addNewPost:function(e,t){return{type:"sn/profile/ADD_NEW_POST",payload:{date:e,messageBody:t}}},profileReceived:function(e){return{type:"sn/profile/SET_PROFILE",profile:e}},setProfileStatus:function(e){return{type:"sn/profile/SET_PROFILE_STATUS",message:e}},deletePost:function(e){return{type:"sn/profile/DELETE_POST",postId:e}},setProfilePhotoSuccess:function(e){return{type:"sn/profile/SET_PROFILE_PHOTO_SUCCESS",photos:e}},setProfileDataSuccess:function(e){return{type:"sn/profile/SET_PROFILE_DATA_SUCCESS",data:e}},profileFollowedInfoReceived:function(e,t){return{type:"sn/profile/PROFILE_FOLLOWED_INFO_RECEIVED",payload:{userId:e,followedStatus:t}}},toggleProfileFollowedInfo:function(){return{type:"sn/profile/TOGGLE_PROFILE_FOLLOWED_INFO"}},setIsLoading:function(e){return{type:"sn/profile/SET_IS_LOADING",isLoading:e}},setUpdateProfileStatusError:function(e){return{type:"sn/profile/SET_UPDATE_PROFILE_STATUS_ERROR",payload:{error:e}}}},j=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(n){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(f.setIsLoading(!0)),t.next=3,l.a.getUserProfile(e);case 3:s=t.sent,n(f.profileReceived(s)),n(f.setIsLoading(!1));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(n){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.setProfilePhoto(e);case 2:(s=t.sent).resultCode===u.b.Success&&n(f.setProfilePhotoSuccess(s.data.photos));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(n){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.getProfileStatus(e);case 2:s=t.sent,n(s?f.setProfileStatus(s):f.setProfileStatus("..."));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(n){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.checkFollowStatus(e);case 2:s=t.sent,n(f.profileFollowedInfoReceived(e,s));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.setProfileStatus(e);case 2:t.sent.resultCode===u.b.Success?(n(f.setUpdateProfileStatusError(null)),n(f.setProfileStatus(e))):n(f.setUpdateProfileStatusError("An error has occurred. Please try to enter the status again."));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(n){var s,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.setProfileData(e);case 2:if((s=t.sent).resultCode!==u.b.Success){t.next=7;break}n(f.setProfileDataSuccess(e)),t.next=10;break;case 7:return a=s.messages[0],n(Object(o.b)("profileData",{_error:a})),t.abrupt("return",Promise.reject(s.messages[0]));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"sn/profile/ADD_NEW_POST":var n=e.messages.length,s=++n,r=Object(i.a)(Object(i.a)({},e),{},{messages:[].concat(Object(c.a)(e.messages),[{id:s,postDate:t.payload.date,label:t.payload.messageBody,likesCount:0,comments:0}])});return r;case"sn/profile/DELETE_POST":return Object(i.a)(Object(i.a)({},e),{},{messages:e.messages.filter((function(e){return e.id!==t.postId}))});case"sn/profile/SET_PROFILE":return Object(i.a)(Object(i.a)({},e),{},{selectedProfile:t.profile});case"sn/profile/SET_PROFILE_STATUS":return Object(i.a)(Object(i.a)({},e),{},{profileStatus:t.message});case"sn/profile/SET_PROFILE_PHOTO_SUCCESS":return Object(i.a)(Object(i.a)({},e),{},{selectedProfile:Object(i.a)(Object(i.a)({},e.selectedProfile),{},{photos:t.photos})});case"sn/profile/SET_PROFILE_DATA_SUCCESS":return Object(i.a)(Object(i.a)({},e),{},{selectedProfile:Object(i.a)(Object(i.a)({},e.selectedProfile),t.data)});case"sn/profile/PROFILE_FOLLOWED_INFO_RECEIVED":return Object(i.a)(Object(i.a)({},e),{},{selectedProfileFollowedInfo:t.payload});case"sn/profile/TOGGLE_PROFILE_FOLLOWED_INFO":return Object(i.a)(Object(i.a)({},e),{},{selectedProfileFollowedInfo:Object(i.a)(Object(i.a)({},e.selectedProfileFollowedInfo),{},{followedStatus:!e.selectedProfileFollowedInfo.followedStatus})});case"sn/profile/SET_IS_LOADING":return Object(i.a)(Object(i.a)({},e),{},{isLoading:t.isLoading});case"sn/profile/SET_UPDATE_PROFILE_STATUS_ERROR":return Object(i.a)(Object(i.a)({},e),{},{requestErrors:Object(i.a)(Object(i.a)({},e.requestErrors),{},{updateProfileStatusError:t.payload.error})});default:return e}}},230:function(e,t,n){},231:function(e,t,n){},24:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n(8),r={getUsers:function(e,t,n,r){var a=n?"&term=".concat(n):"",c=(!0===r?"&friend=".concat(r):!1===r?"&friend=".concat(!1):"")+a;return s.c.get("users?count=".concat(e,"&page=").concat(t).concat(c)).then((function(e){return e.data}))},setProfilePhoto:function(e){var t=new FormData;return t.append("image",e),s.c.put("profile/photo",t).then((function(e){return e.data}))},setProfileData:function(e){return s.c.put("profile",e).then((function(e){return e.data}))},getUserProfile:function(e){return s.c.get("profile/".concat(e)).then((function(e){return e.data}))},getProfileStatus:function(e){return s.c.get("profile/status/".concat(e)).then((function(e){return e.data}))},setProfileStatus:function(e){return s.c.put("profile/status",{status:e}).then((function(e){return e.data}))},checkFollowStatus:function(e){return s.c.get("follow/".concat(e)).then((function(e){return e.data}))},followToUser:function(e){return s.c.post("follow/".concat(e)).then((function(e){return e.data}))},unfollowFromUser:function(e){return s.c.delete("follow/".concat(e)).then((function(e){return e.data}))}}},25:function(e,t,n){"use strict";var s=n(1),r=n.n(s),a=(n(221),n(0)),c=r.a.memo((function(e){var t=e.errorMessage,n=e.className;return Object(a.jsx)("div",{className:"request-error__block ".concat(n),children:Object(a.jsx)("div",{className:"request-error__message",children:t})})}));t.a=c},26:function(e,t,n){"use strict";n(1),n(226);var s=n(0),r=function(){return Object(s.jsx)("div",{className:"spinner__wrapper",children:Object(s.jsx)("div",{className:"spinner"})})};t.a=r},29:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return b})),n.d(t,"e",(function(){return m})),n.d(t,"d",(function(){return O}));var s=n(6),r=n.n(s),a=n(10),c=n(30),i=n(2),o=n(8),u=n(24),l=n(23),d={users:[],randomFriends:null,totalUsersCount:0,totalFriendsCount:0,pageSize:10,currentPage:1,filters:{term:"",friend:null},followingInProgress:[],isLoading:!1,requestErrors:{changingSubscriptionStatusError:null,usersRequestError:null,randomFriendsRequestError:null}},f={setUsers:function(e){return{type:"sn/users/SET_USERS",users:e}},randomFriendsReceived:function(e){return{type:"sn/users/RANDOM_FRIENDS_RECEIVED",payload:{randomFriends:e}}},toggleFollowed:function(e){return{type:"sn/users/TOGGLE_FOLLOWED",userId:e}},setPageNumber:function(e){return{type:"sn/users/SET_PAGE_NUMBER",num:e}},setTotalUsersCount:function(e){return{type:"sn/users/SET_TOTAL_USERS_COUNT",count:e}},setTotalFriendsCount:function(e){return{type:"sn/users/SET_TOTAL_FRIENDS_COUNT",count:e}},setFilters:function(e){return{type:"sn/users/SET_FILTERS",payload:e}},setIsLoading:function(e){return{type:"sn/users/SET_IS_LOADING",isLoading:e}},setFollowingInProgress:function(e,t){return{type:"sn/users/SET_FOLLOWING_IN_PROGRESS",userId:e,isInProgress:t}},setRequestError:function(e){return{type:"sn/users/SET_REQUEST_ERROR",payload:{error:e}}}},j=function(){var e=Object(a.a)(r.a.mark((function e(t,n,s){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(n);case 2:e.sent.resultCode===o.b.Success?(t(f.setRequestError({changingSubscriptionStatusError:null})),t(f.toggleFollowed(n)),t(l.a.toggleProfileFollowedInfo()),t(f.setFollowingInProgress(n,!1))):t(f.setRequestError({changingSubscriptionStatusError:"Some error occured. Please try to follow again"}));case 4:case"end":return e.stop()}}),e)})));return function(t,n,s){return e.apply(this,arguments)}}(),b=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(f.setFollowingInProgress(e,!0)),t.next=3,u.a.checkFollowStatus(e);case 3:if(t.sent){t.next=9;break}return t.next=7,j(n,e,u.a.followToUser);case 7:t.next=12;break;case 9:return t.next=11,j(n,e,u.a.unfollowFromUser);case 11:n(O(void 0,1));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e,t,n){var s=n.term,c=void 0===s?"":s,i=n.friend,o=void 0===i?null:i;return function(){var n=Object(a.a)(r.a.mark((function n(s){var a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s(f.setIsLoading(!0)),n.prev=1,n.next=4,u.a.getUsers(e,t,c,o);case 4:a=n.sent,s(f.setRequestError({usersRequestError:null})),s(f.setFilters({term:c,friend:o})),s(f.setPageNumber(t)),s(f.setIsLoading(!1)),s(f.setUsers(a.items)),s(f.setTotalUsersCount(a.totalCount)),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(1),s(f.setIsLoading(!1)),s(f.setRequestError({usersRequestError:"Something goes wrong. Please try to refresh the page"}));case 17:case"end":return n.stop()}}),n,null,[[1,13]])})));return function(e){return n.apply(this,arguments)}}()},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,t=arguments.length>1?arguments[1]:void 0;return function(){var n=Object(a.a)(r.a.mark((function n(s){var a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.a.getUsers(e,t,"",!0);case 3:a=n.sent,s(f.setRequestError({randomFriendsRequestError:null})),a.totalCount>0?(s(f.randomFriendsReceived(a.items)),s(f.setTotalFriendsCount(a.totalCount))):(s(f.randomFriendsReceived([])),s(f.setTotalFriendsCount(0))),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),s(f.setRequestError({randomFriendsRequestError:"An error has occurred, possibly a bad connection to the server. Auto-updating of the friends list is paused. To fix it please try reloading the page."}));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"sn/users/SET_USERS":return Object(i.a)(Object(i.a)({},e),{},{users:t.users});case"sn/users/RANDOM_FRIENDS_RECEIVED":return Object(i.a)(Object(i.a)({},e),{},{randomFriends:t.payload.randomFriends});case"sn/users/TOGGLE_FOLLOWED":return Object(i.a)(Object(i.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId&&(e.followed=!e.followed),e}))});case"sn/users/SET_PAGE_NUMBER":return Object(i.a)(Object(i.a)({},e),{},{currentPage:t.num});case"sn/users/SET_TOTAL_USERS_COUNT":return Object(i.a)(Object(i.a)({},e),{},{totalUsersCount:t.count});case"sn/users/SET_TOTAL_FRIENDS_COUNT":return Object(i.a)(Object(i.a)({},e),{},{totalFriendsCount:t.count});case"sn/users/SET_FILTERS":return Object(i.a)(Object(i.a)({},e),{},{filters:Object(i.a)(Object(i.a)({},e.filters),t.payload)});case"sn/users/SET_IS_LOADING":return Object(i.a)(Object(i.a)({},e),{},{isLoading:t.isLoading});case"sn/users/SET_FOLLOWING_IN_PROGRESS":return Object(i.a)(Object(i.a)({},e),{},{followingInProgress:t.isInProgress?[].concat(Object(c.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});case"sn/users/SET_REQUEST_ERROR":return Object(i.a)(Object(i.a)({},e),{},{requestErrors:Object(i.a)(Object(i.a)({},e.requestErrors),t.payload.error)});default:return e}}},293:function(e,t,n){},294:function(e,t,n){},32:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c}));var s=n.p+"static/media/main-logo.09746948.svg",r=n.p+"static/media/defaultCover.3694bd45.jpeg",a=n.p+"static/media/defaultPhoto.45a0af68.png",c=n.p+"static/media/ads-img.1d74b859.jpg"},333:function(e,t,n){},334:function(e,t,n){},335:function(e,t,n){},336:function(e,t,n){},337:function(e,t,n){},338:function(e,t,n){},339:function(e,t,n){},342:function(e,t,n){},343:function(e,t,n){},344:function(e,t,n){},345:function(e,t,n){},346:function(e,t,n){},347:function(e,t,n){},348:function(e,t,n){},349:function(e,t,n){},350:function(e,t,n){},351:function(e,t,n){},352:function(e,t,n){},353:function(e,t,n){},354:function(e,t,n){},355:function(e,t,n){},356:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),a=n(82),c=n.n(a),i=n(11),o=n(84),u=n(85),l=n(96),d=n(94),f=n(3),j=n(6),b=n.n(j),m=n(10),O=n(2),p=n(8),g=function(){return p.c.get("auth/me").then((function(e){return e.data}))},h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return p.c.post("/auth/login",{email:e,password:t,rememberMe:n,captcha:s}).then((function(e){return e.data}))},_=function(){return p.c.delete("auth/login").then((function(e){return e.data}))},v=function(){return p.c.get("security/get-captcha-url").then((function(e){return e.data}))},x=n(44),E=n(24),N={email:null,id:null,login:null,authUserPhoto:null,isAuthorized:!1,captchaUrl:null},S=function(e,t,n,s){return{type:"sn/auth/SET_AUTH_DATA",payload:{email:e,id:t,login:n,isAuthorized:s}}},w=function(e){return{type:"sn/auth/SET_AUTH_USER_PHOTO",payload:{photo:e}}},I=function(e){return{type:"sn/auth/SET_CAPTCHA_IMG",payload:{captchaUrl:e}}},y=function(e){return function(){var t=Object(m.a)(b.a.mark((function t(n){var s,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.getUserProfile(e);case 2:s=t.sent,(r=s.photos.small)&&n(w(r));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},P=function(){return function(){var e=Object(m.a)(b.a.mark((function e(t){var n,s,r,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:n=e.sent,s=n.data,r=s.email,a=s.id,c=s.login,n.resultCode===p.b.Success&&(t(S(r,a,c,!0)),t(y(a)));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"sn/auth/SET_AUTH_DATA":return Object(O.a)(Object(O.a)({},e),t.payload);case"sn/auth/SET_AUTH_USER_PHOTO":return Object(O.a)(Object(O.a)({},e),{},{authUserPhoto:t.payload.photo});case"sn/auth/SET_CAPTCHA_IMG":return Object(O.a)(Object(O.a)({},e),t.payload);default:return e}},T=n(36),C={appInitialized:!1,unhandledError:!1},M={initializedSuccessfully:function(){return{type:"sn/app/INITIALIZED_SUCCESSFULLY"}},unhandledErrorCatched:function(e){return{type:"sn/app/UNHANDLED_ERROR_CATCHED",payload:{error:e}}}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"sn/app/INITIALIZED_SUCCESSFULLY":return Object(O.a)(Object(O.a)({},e),{},{appInitialized:!0});case"sn/app/UNHANDLED_ERROR_CATCHED":return Object(O.a)(Object(O.a)({},e),{},{unhandledError:t.payload.error});default:return e}},D=n(25),L=n(20),A=n(21),F=n(41),U=n(17),q=(n(222),n(0)),G=r.a.memo((function(e){var t=e.rerenderSecs,n=Object(f.d)(U.g),r=Object(f.d)(U.f),a=Object(f.d)(F.c),c=1e3*t,i=Object(f.c)();return Object(s.useEffect)((function(){a&&i(Object(A.f)())}),[]),Object(s.useEffect)((function(){var e;return a&&(e=setInterval((function(){i(Object(A.f)())}),c)),function(){clearInterval(e)}}),[a]),r<=0&&!n?Object(q.jsx)("span",{}):Object(q.jsx)("span",{className:"new-messages-counter navbar__new-messages-counter",title:"".concat(n||r," new messages"),children:n||r})})),z=n(18),H=(n(223),r.a.memo((function(e){var t=e.closeMenu,n=Object(s.useCallback)((function(e){t&&t()}),[t]);return Object(q.jsx)("nav",{className:"navbar",children:Object(q.jsxs)("ul",{className:"navbar__list",onClick:n,children:[Object(q.jsx)(V,{url:"/profile",iconLink:z.k,label:"Profile"}),Object(q.jsx)(V,{url:"/users",iconLink:z.n,label:"Users"}),Object(q.jsx)(V,{url:"/dialogs",iconLink:z.d,label:"Dialogs",showNewMessagesCounter:!0}),Object(q.jsx)(V,{url:"/chat",iconLink:z.b,label:"Developers Chat"}),Object(q.jsx)(V,{url:"/news",iconLink:z.h,label:"News"}),Object(q.jsx)(V,{url:"/music",iconLink:z.g,label:"Music"}),Object(q.jsx)(V,{url:"/settings",iconLink:z.l,label:"Settings"})]})})}))),V=r.a.memo((function(e){var t=e.url,n=e.iconLink,s=e.label,r=e.showNewMessagesCounter;return Object(q.jsx)("li",{className:"navbar__list-item",children:Object(q.jsxs)(i.c,{className:"navbar__link",to:t,activeClassName:"navbar__link_active",children:[Object(q.jsx)("img",{className:"navbar__link-icon",src:n,alt:"".concat(s," icon")}),Object(q.jsx)("span",{className:"navbar__link-label",children:s}),r&&Object(q.jsx)(G,{rerenderSecs:90})]})})})),W=H,Y=(n(224),r.a.memo((function(){var e=Object(s.useState)(!1),t=Object(L.a)(e,2),n=t[0],r=t[1],a=Object(s.useCallback)((function(){r((function(e){return!e}))}),[]),c=Object(s.useCallback)((function(){r(!1)}),[]),i=n?"mobile__menu-btn mobile__menu-btn_active":"mobile__menu-btn";return Object(q.jsxs)("div",{className:"mobile__menu",children:[Object(q.jsxs)("div",{className:i,onClick:a,children:[Object(q.jsx)("span",{}),Object(q.jsx)("span",{}),Object(q.jsx)("span",{})]}),n&&Object(q.jsx)("div",{className:"mobile__menu-content",children:Object(q.jsx)(W,{closeMenu:c})})]})}))),B=function(e){return e.app.unhandledError},J=n(32),Q=(n(225),r.a.memo((function(){var e=Object(f.d)(F.c),t=Object(f.d)(F.a),n=Object(f.d)(F.d),r=Object(f.d)(F.b),a=Object(f.d)(B),c=Object(f.c)();Object(s.useEffect)((function(){a&&setTimeout((function(){c(M.unhandledErrorCatched(!1))}),1e4)}),[a,c]);var o=Object(q.jsx)(i.c,{className:"header__login-btn",to:"/login",children:"Log in"}),u=Object(q.jsxs)("div",{className:"header__login-data",children:[Object(q.jsx)(T.a,{linkTo:"/profile/".concat(t),className:"header__login-avatar",userImage:r}),Object(q.jsx)("span",{className:"header__login-nickname",children:n}),Object(q.jsx)("button",{className:"header__login-btn",onClick:function(){c(function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:e.sent.resultCode===p.b.Success&&t(S(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Log out"})]}),l=e?u:o;return Object(q.jsx)("header",{className:"header",children:Object(q.jsx)("div",{className:"container",children:Object(q.jsxs)("div",{className:"header__content",children:[Object(q.jsx)(Y,{}),Object(q.jsxs)(i.b,{className:"header__logo",to:"/chat",children:[Object(q.jsx)("img",{className:"header__logo-img",src:J.d,alt:"main-logo"}),Object(q.jsx)("span",{className:"header__logo-text",children:"Social Network"})]}),Object(q.jsx)("div",{className:"header__login-panel",children:l}),a&&Object(q.jsx)(D.a,{className:"app-unhandled-error",errorMessage:"Something goes wrong, server error. Please try refresh the page"})]})})})}))),K=n(29);var X=n(26),Z=n(45),$=n(22),ee=(n(227),r.a.memo((function(e){var t=e.friendsPerPage,n=e.intervalSeconds,r=Object(f.d)($.f),a=Object(f.d)($.g),c=Object(f.d)($.h),o=Object(f.c)(),u=Math.ceil(c/t),l=1e3*n;Object(s.useEffect)((function(){o(Object(K.d)(t,1))}),[]),Object(s.useEffect)((function(){var e,n,s;if(c>t){var r=(n=1,s=u,Math.floor(Math.random()*(s-n+1))+n);e=setTimeout((function(){console.log("tik tik"),o(Object(K.d)(t,r))}),l)}return function(){clearTimeout(e)}}),[r,c]);var d=null===r||void 0===r?void 0:r.map((function(e){return Object(q.jsx)(te,{friendImage:e.photos.small,friendName:e.name,friendId:e.id},e.id)})),j=0===(null===r||void 0===r?void 0:r.length)?Object(q.jsxs)(i.b,{to:"/users",children:["Find friends on the ",Object(q.jsx)("b",{children:"Users Page"})]}):Object(q.jsx)("div",{className:"friends__block",children:d});return Object(q.jsxs)(q.Fragment,{children:[r&&!a&&j,!r&&!a&&Object(q.jsx)(X.a,{}),a&&Object(q.jsx)(D.a,{errorMessage:a})]})}))),te=r.a.memo((function(e){var t=e.friendImage,n=e.friendName,s=e.friendId;return Object(q.jsxs)("div",{className:"friends__block-item",children:[Object(q.jsx)(T.a,{className:"friend__image",userImage:t,linkTo:"/profile/".concat(s)}),Object(q.jsx)(Z.a,{className:"friend__name",userName:n,linkTo:"/profile/".concat(s)})]})})),ne=ee,se=(n(228),r.a.memo((function(){return Object(q.jsxs)("a",{href:"https://karpeyev.com",target:"_blank",rel:"noreferrer",className:"ads__content",children:[Object(q.jsx)("div",{className:"ads__content-img",children:Object(q.jsx)("img",{src:J.a,alt:"ads_image"})}),Object(q.jsx)("div",{className:"ads__content-link",children:"karpeyev.com"}),Object(q.jsx)("div",{className:"ads__content-title",children:"\u0421\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0441\u0430\u0439\u0442 \u043b\u044e\u0431\u043e\u0439 \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u043f\u043e\u0434 \u0432\u0430\u0448\u0438 \u0437\u0430\u0434\u0430\u0447\u0438"})]})}))),re=(n(229),r.a.memo((function(e){var t=e.children,n=e.blockTitle;return Object(q.jsxs)("div",{className:"sidebar__block",children:[Object(q.jsx)("div",{className:"sidebar__block-title",children:n}),Object(q.jsx)("div",{className:"sidebar__block-content",children:t})]})}))),ae=n(87),ce=(n(230),r.a.memo((function(e){return Object(ae.useMediaQuery)({query:"(max-width: 992px)"})?Object(q.jsx)("span",{className:"hidden-stub"}):Object(q.jsxs)("aside",{className:"sidebar",children:[Object(q.jsx)(W,{}),e.isUserAuthorized&&Object(q.jsx)(re,{blockTitle:Object(q.jsx)(i.b,{to:"/users?page=1&friend=true",children:"Friends"}),children:Object(q.jsx)(ne,{friendsPerPage:9,intervalSeconds:300})}),Object(q.jsx)(re,{blockTitle:"Ads",children:Object(q.jsx)(se,{})})]})}))),ie=Object(f.b)((function(e){return{isUserAuthorized:e.auth.isAuthorized}}))(ce),oe=n(15),ue=n(149),le=function(e){if(!e)return"Field required"},de=n(60),fe=n(148),je=(n(231),["input","meta"]),be=function(e){return function(t){var n=t.input,s=t.meta,r=Object(de.a)(t,je),a=s.error,c=a&&s.touched,i=c?"error":"",o=r.className||"";return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(e,Object(O.a)(Object(O.a)(Object(O.a)({},n),r),{},{className:"".concat(o," ").concat(i)})),c&&Object(q.jsx)("span",{className:"error-status",children:a})]})}},me=be("textarea"),Oe=be("input");function pe(e,t,n,s){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return Object(q.jsx)(fe.a,Object(O.a)({name:e,component:t,validate:n,placeholder:s},r))}var ge,he=n(37),_e=n(14),ve=n(19),xe=(n(294),ge=25,function(e){if(e&&e.length>ge)return"Max ".concat(ge," symbols")}),Ee=r.a.memo((function(e){return Object(q.jsxs)("form",{className:"login__form",onSubmit:e.handleSubmit,children:[Object(q.jsx)("div",{children:pe("email",Oe,[le,xe],"enter user name",{className:"login__input-email"})}),Object(q.jsx)("div",{children:pe("password",Oe,[le,xe],"enter user password",{type:"password",className:"login__input-password"})}),Object(q.jsxs)("div",{children:[pe("rememberMe","input",[],void 0,{type:"checkbox",id:"login__checkbox"}),Object(q.jsx)("label",{className:"login__input-checkbox",htmlFor:"login__checkbox",children:"Remember me"})]}),e.captchaUrl&&Object(q.jsxs)("div",{children:[pe("captcha",Oe,[le],"enter symbols from image",{className:"login__input-captcha"}),Object(q.jsx)("img",{className:"login__input-captcha-img",src:e.captchaUrl,alt:"captcha"})]}),e.error&&Object(q.jsx)("div",{className:"submit-error",children:e.error}),Object(q.jsx)("button",{className:"login__form-btn",children:"Log in"})]})})),Ne=Object(ue.a)({form:"login"})(Ee),Se=r.a.memo((function(e){return Object(q.jsx)(ve.a,{pageTitle:"Login",children:Object(q.jsxs)("div",{className:"login-page__wrapper",children:[Object(q.jsx)("h2",{className:"login-page__title",children:"Login"}),Object(q.jsx)(Ne,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe,t.captcha)},captchaUrl:e.captchaUrl})]})})})),we=Object(_e.d)(he.b,Object(f.b)((function(e){return{captchaUrl:e.auth.captchaUrl}}),{login:function(e,t,n,s){return function(){var r=Object(m.a)(b.a.mark((function r(a){var c,i;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,h(e,t,n,s);case 2:(c=r.sent).resultCode===p.b.Success?a(P()):c.resultCode===p.a.CaptchaIsRequired?a(function(){var e=Object(m.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:n=e.sent,t(I(n.url));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):(i=c.messages.length>0?c.messages[0]:"Some error",a(Object(x.b)("login",{_error:i})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}}))(Se),Ie=n(23),ye=n(30),Pe=n(56),ke=n.n(Pe),Te=function(e){return e.profilePage.selectedProfile},Ce=function(e){return e.profilePage.selectedProfileFollowedInfo},Me=function(e){return e.profilePage.profileStatus},Re=function(e){return e.profilePage.requestErrors.updateProfileStatusError},De=r.a.memo((function(e){var t=e.item,n=Object(f.d)(Te);return Object(q.jsxs)("div",{className:"posts__item",children:[Object(q.jsxs)("div",{className:"posts__item_header",children:[Object(q.jsx)(T.a,{className:"post__author-image",userImage:null===n||void 0===n?void 0:n.photos.small,linkTo:"/profile/".concat(null===n||void 0===n?void 0:n.userId)}),Object(q.jsxs)("div",{className:"post__info-col",children:[Object(q.jsx)(Z.a,{className:"post__author-name",userName:null===n||void 0===n?void 0:n.fullName,linkTo:"/profile/".concat(null===n||void 0===n?void 0:n.userId)}),Object(q.jsxs)("div",{className:"post__date",children:[Object(q.jsx)(ke.a,{format:"DD MMM YYYY hh:mm",date:t.postDate})," "]})]})]}),Object(q.jsx)("div",{className:"posts__item_content",children:t.label}),Object(q.jsxs)("div",{className:"posts__item_footer",children:[Object(q.jsxs)("div",{className:"post__action",children:[Object(q.jsx)("img",{className:"post__action_icon like__action",src:z.f,alt:"like_icon"}),Object(q.jsx)("div",{className:"post__action_counter like__counter",children:t.likesCount})]}),Object(q.jsxs)("div",{className:"post__action",children:[Object(q.jsx)("img",{className:"post__action_icon comments__action",src:z.c,alt:"comments_icon"}),Object(q.jsx)("div",{className:"post__action_counter coments__counter",children:t.comments})]}),Object(q.jsx)("div",{className:"post__action",children:Object(q.jsx)("img",{className:"post__action_icon share__action",src:z.m,alt:"share_icon"})})]})]},t.id)})),Le=(n(333),Object(ue.a)({form:"postsForm"})((function(e){return Object(q.jsxs)("form",{onSubmit:e.handleSubmit,className:"add-post__form",children:[pe("postBody",me,[le],"Type new post message here..",{className:"add-post__textarea",maxLength:"1500"}),Object(q.jsx)("button",{className:"add-post__btn",children:"Post"})]})}))),Ae=function(){var e=Object(f.c)();return Object(q.jsxs)("div",{className:"add-post__block",children:[Object(q.jsx)("div",{className:"add-post__title",children:"Add new post"}),Object(q.jsx)(Le,{onSubmit:function(t){var n=function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,s=e.getFullYear(),r=e.getHours()%24,a=e.getMinutes()%60;return"".concat(n,".").concat(t,".").concat(s," ").concat(r,":").concat(a)}(),s="".concat(t.postBody," SECTION is HARDCODED due to API restrictions");e(Ie.a.addNewPost(n,s)),e(Object(x.a)("postsForm"))}})]})},Fe=(n(334),r.a.memo((function(e){var t=e.isOwner,n=Object(f.d)((function(e){return e.profilePage.messages}));return Object(q.jsxs)(q.Fragment,{children:[t&&Object(q.jsx)(Ae,{}),Object(q.jsx)("div",{className:"posts__timeline",children:Object(ye.a)(n).reverse().map((function(e){return Object(q.jsx)(De,{item:e},e.id)}))})]})}))),Ue=function(e){var t=function(){var e=document.createElement("div");e.style.width="50px",e.style.height="50px",e.style.overflowY="scroll",e.style.visibility="hidden",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return e.remove(),t}(),n="show"===e?"unset":"hidden",s="show"===e?"0":"".concat(t,"px");document.body.style.overflow=n,document.body.style.marginRight=s,document.querySelector("header.header").style.paddingRight=s},qe=(n(335),r.a.memo((function(e){var t=e.source,n=e.closeHandler;Object(s.useEffect)((function(){return Ue("hide"),function(){Ue("show")}}),[]);return Object(q.jsx)("div",{className:"fsi",onClick:function(e){var t,s;(null===(t=e.target)||void 0===t||null===(s=t.classList)||void 0===s?void 0:s.contains("fsi__picture"))||n()},children:Object(q.jsxs)("div",{className:"fsi__wrapper",children:[Object(q.jsx)("img",{className:"fsi__picture",src:t,alt:"full_size_image"}),Object(q.jsx)("span",{className:"fsi_close",onClick:n,children:"\xd7"})]})})}))),Ge=r.a.memo((function(e){var t=e.isOwner,n=e.userCover,r=e.userPhoto,a=Object(s.useState)(!1),c=Object(L.a)(a,2),i=c[0],o=c[1],u=Object(f.c)();return Object(q.jsxs)("div",{className:"profile__info-images",children:[Object(q.jsx)("img",{className:"profile__info-cover",src:n||J.b,alt:""}),Object(q.jsxs)("div",{className:"avatar__wrapper",children:[Object(q.jsxs)("div",{className:"profile__info-avatar",children:[Object(q.jsx)("img",{onClick:function(){r.large&&o(!0)},className:"profile__info-photo",src:r.small||J.c,alt:"user_photo"}),i&&r.large&&Object(q.jsx)(qe,{source:r.large,closeHandler:function(){return o(!1)}})]}),t&&Object(q.jsxs)("div",{className:"change-photo",children:[Object(q.jsx)("input",{id:"change-photo_input",onChange:function(e){var t;(null===(t=e.target.files)||void 0===t?void 0:t.length)&&u(Object(Ie.g)(e.target.files[0]))},type:"file"}),Object(q.jsx)("label",{className:"change-photo_label",htmlFor:"change-photo_input",children:Object(q.jsx)("img",{className:"change-photo_icon",src:z.a,alt:"new_photo"})})]})]})]})})),ze=r.a.memo((function(e){var t=e.isOwner,n=Object(f.d)(Re),r=Object(f.d)(Me),a=Object(s.useState)(!1),c=Object(L.a)(a,2),i=c[0],o=c[1],u=Object(s.useState)(r),l=Object(L.a)(u,2),d=l[0],j=l[1],b=Object(f.c)();Object(s.useEffect)((function(){j(r)}),[r]),Object(s.useEffect)((function(){return function(){b(Ie.a.setUpdateProfileStatusError(null))}}),[]);var m=Object(q.jsx)("div",{className:"profile__status-text",onDoubleClick:t?function(){o(!0)}:void 0,title:t?"Double click to edit":void 0,children:r}),O=Object(q.jsx)("input",{className:"profile__status-input",value:d,type:"text",autoFocus:!0,onChange:function(e){j(e.currentTarget.value)},onBlur:function(){o(!1),b(Object(Ie.h)(d))}});return Object(q.jsxs)("div",{className:"profile__status",children:[i?O:m,n&&Object(q.jsx)(D.a,{errorMessage:n})]})})),He=["title","inputName","element"],Ve=r.a.memo((function(e){var t=e.user,n=e.turnOffEditMode,s=e.handleSubmit,r=e.error;return Object(q.jsxs)("form",{onSubmit:s,children:[r&&Object(q.jsx)("div",{children:Object(q.jsx)("b",{children:r})}),Object(q.jsx)(We,{title:"Are you looking for a job?",inputName:"lookingForAJob",type:"checkbox",element:"input"}),Object(q.jsx)(We,{title:"Your professional skills",inputName:"lookingForAJobDescription",element:me}),Object(q.jsx)(We,{title:"Full Name",inputName:"fullName",element:Oe}),Object(q.jsx)(We,{title:"About Me",inputName:"aboutMe",element:me}),Object.keys(t.contacts).map((function(e){return Object(q.jsx)(We,{title:e,inputName:"contacts."+e,element:Oe},e)})),Object(q.jsxs)("div",{className:"profile__data-buttons",children:[Object(q.jsx)("button",{className:"profile__data-btn",onClick:n,type:"button",children:"Cancel"}),Object(q.jsx)("button",{className:"profile__data-btn",type:"submit",children:"Save"})]})]})})),We=r.a.memo((function(e){var t=e.title,n=e.inputName,s=e.element,r=Object(de.a)(e,He);return Object(q.jsxs)("div",{className:"profile__data-row data-form__row",children:[Object(q.jsxs)("div",{className:"profile__data-title",children:[t,":"]}),Object(q.jsx)(fe.a,Object(O.a)({name:n,component:s,className:"profile__data-descr profile__data-field"},r))]})})),Ye=Object(ue.a)({form:"profileData"})(Ve),Be=r.a.memo((function(e){var t=e.isOwner,n=e.turnOnEditMode,s=e.user,r=s.contacts,a=s.aboutMe,c=s.lookingForAJob,i=s.lookingForAJobDescription,o=Object.keys(r).map((function(e){return r[e]?Object(q.jsx)(Je,{title:e,data:r[e],isLink:!0},e):null}));return Object(q.jsxs)(q.Fragment,{children:[a&&Object(q.jsx)(Je,{title:"About me",data:a}),i&&Object(q.jsx)(Je,{title:"My skills",data:i}),c&&Object(q.jsx)("div",{className:"profile__data-descr",children:"Looking for a job!"}),o,t&&Object(q.jsx)("button",{className:"profile__data-btn",onClick:n,children:"Change data"})]})})),Je=r.a.memo((function(e){var t=e.title,n=e.data,s=e.isLink,r="http://".concat(n);return n&&/^http/im.test(n)&&(r=n),Object(q.jsxs)("div",{className:"profile__data-row",children:[Object(q.jsxs)("div",{className:"profile__data-title",children:[t,":"]}),s?Object(q.jsx)("a",{className:"profile__data-link",target:"_blank",rel:"noreferrer",href:r,children:n}):Object(q.jsx)("div",{className:"profile__data-descr",children:n})]})})),Qe=Be,Ke=n(89),Xe=n(90),Ze=r.a.memo((function(e){var t=e.isOwner,n=e.user,s=e.updateProfileData,r=e.isUserAuthorized;return Object(q.jsxs)("div",{className:"profile__data",children:[!t&&r&&Object(q.jsx)($e,{userId:n.userId}),Object(q.jsx)("h1",{className:"page__name",children:n.fullName}),Object(q.jsx)(ze,{isOwner:t}),Object(q.jsx)(et,{isOwner:t,user:n,updateProfileData:s})]})})),$e=r.a.memo((function(e){var t=e.userId,n=Object(f.d)(Ce);return Object(q.jsxs)("div",{className:"profile__buttons-wrapper",children:[Object(q.jsx)(Xe.a,{isFollowed:n.followedStatus,userId:n.userId}),Object(q.jsx)(Ke.a,{linkTo:"/dialogs/".concat(t)})]})})),et=r.a.memo((function(e){var t=e.isOwner,n=e.user,r=e.updateProfileData,a=Object(s.useState)(!1),c=Object(L.a)(a,2),i=c[0],o=c[1],u=Object(s.useState)(!1),l=Object(L.a)(u,2),d=l[0],f=l[1],j=Object(s.useCallback)((function(){o((function(e){return!e}))}),[]),b=Object(s.useCallback)((function(){f(!1)}),[]),m=Object(s.useCallback)((function(){f(!0)}),[]),O=Object(s.useCallback)((function(e){r(e).then((function(){f(!1)}))}),[r]),p=d?Object(q.jsx)(Ye,{initialValues:n,onSubmit:O,user:n,turnOffEditMode:b}):Object(q.jsx)(Qe,{user:n,isOwner:t,turnOnEditMode:m});return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("button",{onClick:j,className:"view-data__btn",children:i?"Hide Profile Info":"Show Profile Info"}),i&&Object(q.jsx)("div",{className:"profile__data-list",children:p})]})})),tt=Ze,nt=(n(337),r.a.memo((function(e){var t=e.user,n=e.isOwner,s=e.isUserAuthorized,r=e.updateProfileData;return Object(q.jsxs)("div",{className:"profile__info",children:[Object(q.jsx)(Ge,{isOwner:n,userCover:t.photos.large,userPhoto:t.photos}),Object(q.jsx)(tt,{isOwner:n,isUserAuthorized:s,user:t,updateProfileData:r})]})}))),st=(n(338),r.a.memo((function(e){var t=e.isOwner,n=e.isUserAuthorized,r=e.updateProfileData,a=Object(s.useRef)(null),c=Object(f.d)(Te);return Object(s.useEffect)((function(){var e;null===(e=a.current)||void 0===e||e.scrollIntoView({block:"start",behavior:"smooth"})}),[c]),c?Object(q.jsxs)(ve.a,{pageTitle:c.fullName,children:[Object(q.jsx)("div",{className:"page-top-anchor",ref:a}),Object(q.jsxs)("div",{className:"profile__page",children:[Object(q.jsx)(nt,{user:c,isOwner:t,isUserAuthorized:n,updateProfileData:r}),Object(q.jsx)(Fe,{isOwner:t}),Object(q.jsx)("span",{className:"section-hardcoded",children:"Section Hardcoded"})]})]}):Object(q.jsx)(X.a,{})}))),rt=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){e.match.params.userId!==this.props.match.params.userId&&this.refreshProfile()}},{key:"componentWillUnmount",value:function(){this.props.setUserProfile(null)}},{key:"refreshProfile",value:function(){var e;this.props.match.params.userId&&(e=+this.props.match.params.userId),e||(e=this.props.authUserId,this.props.history.push("/profile")),e?(this.props.getUserProfile(e),this.props.getProfileStatus(e),this.props.isUserAuthorized&&this.props.requestProfileFollowedInfo(e)):(console.error("the userId must exist in the URI params or the user must be authorized"),alert("Please add the correct user id to the url (/profile/<userID>)"))}},{key:"render",value:function(){return this.props.match.params.userId||this.props.isUserAuthorized?this.props.isLoading?Object(q.jsx)(X.a,{}):Object(q.jsx)(st,{isOwner:this.props.isUserAuthorized&&(!this.props.match.params.userId||+this.props.match.params.userId===this.props.authUserId),isUserAuthorized:this.props.isUserAuthorized,updateProfileData:this.props.updateProfileData}):Object(q.jsx)(oe.a,{to:"/login"})}}]),n}(s.Component),at={getUserProfile:Ie.d,getProfileStatus:Ie.c,requestProfileFollowedInfo:Ie.e,updateProfileData:Ie.f,setUserProfile:Ie.a.profileReceived},ct=Object(_e.d)(oe.i,Object(f.b)((function(e){return{isUserAuthorized:e.auth.isAuthorized,isLoading:e.profilePage.isLoading,authUserId:e.auth.id}}),at))(rt),it=(n(161).default,r.a.memo((function(e){var t=e.dialogsItem,n=t.id,s=t.photos,r=t.userName,a=t.lastUserActivityDate,c=t.hasNewMessages,o=t.newMessagesCount,u=t.lastDialogActivityDate,l=t.hasNewMessages?"dialogs__list-item_new":"dialogs__list-item";return Object(q.jsx)("li",{children:Object(q.jsxs)(i.b,{className:l,to:"/dialogs/".concat(n),children:[Object(q.jsx)("div",{className:"dialog__image",children:Object(q.jsx)("img",{src:s.small||J.c,alt:"user_image"})}),Object(q.jsxs)("div",{className:"dialog__content",children:[Object(q.jsx)("div",{className:"dialog__content-title",children:"".concat(r," ")}),Object(q.jsxs)("div",{className:"dialog__content-subtitle",children:["(last seen\xa0",Object(q.jsx)(ke.a,{fromNow:!0,date:a}),")"]}),Object(q.jsx)("div",{className:"dialog__content-message",children:c?"There are ".concat(o," new messages"):Object(q.jsxs)("span",{children:["Last opened on",Object(q.jsx)(ke.a,{format:" MMM DD YYYY hh:mm",date:u})]})})]})]})})}))),ot=(n(343),r.a.memo((function(){var e=Object(f.d)(U.b),t=Object(f.d)(U.c),n=Object(f.c)();return Object(s.useEffect)((function(){n(Object(A.c)())}),[]),Object(q.jsx)("div",{className:"dialogs__wrapper",children:Object(q.jsx)("ul",{className:"dialogs__list",children:t?Object(q.jsx)(X.a,{}):e.map((function(e){return Object(q.jsx)(it,{dialogsItem:e},e.id)}))})})}))),ut=n(93),lt=r.a.memo((function(e){var t=e.sendMessage,n=Object(f.d)(U.k);return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(ut.a,{fieldName:"dialogMessage",btnDisabled:!1,sendMessage:t}),n&&Object(q.jsx)(D.a,{errorMessage:n})]})})),dt=(n(345),n(95)),ft=n(51),jt=r.a.memo((function(){var e=Object(f.d)(U.i),t=Object(f.d)(U.a),n=Object(f.d)(U.c),r=Object(f.d)(U.h),a=Object(f.d)(F.b),c=Object(oe.h)(),i=Object(f.c)(),o=Number(c.params.userId),u=Object(s.useCallback)((function(e){i(Object(A.g)(o,e))}),[i,o]);return Object(s.useEffect)((function(){return i(Object(A.d)(o,1,10)),function(){i(A.a.dialogMessagesCleaned()),i(A.a.interlocuterProfileReceived(null))}}),[]),r?Object(q.jsx)("div",{className:"dialogs__item",children:Object(q.jsx)(D.a,{errorMessage:r})}):Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(ft.a,{children:Object(q.jsx)("title",{children:"".concat((null===t||void 0===t?void 0:t.fullName)||""," Messages")})}),Object(q.jsxs)("div",{className:"dialogs__item",children:[Object(q.jsx)(bt,{friend:t}),Object(q.jsx)(dt.a,{dialogMessages:e,dialogMessagesPortionSize:10,isLoading:n,friendId:o,friendImg:null===t||void 0===t?void 0:t.photos.small,ownerImg:a}),Object(q.jsx)(lt,{sendMessage:u})]})]})})),bt=r.a.memo((function(e){var t=e.friend;return Object(q.jsxs)("div",{className:"dialogs__item-header",children:[Object(q.jsxs)(i.b,{className:"go-back__link",to:"/dialogs",children:[Object(q.jsx)("img",{className:"go-back__icon",src:z.e,alt:"go_back_icon"}),Object(q.jsx)("div",{className:"go-back__text",children:"Go back"})]}),Object(q.jsxs)(i.b,{className:"interlocuter",to:"/profile/".concat(null===t||void 0===t?void 0:t.userId),children:[Object(q.jsx)("div",{className:"interlocuter__image",children:Object(q.jsx)("img",{src:(null===t||void 0===t?void 0:t.photos.small)||J.c,alt:"interlocuter_image"})}),Object(q.jsx)("div",{className:"interlocuter__name",children:null===t||void 0===t?void 0:t.fullName})]})]})})),mt=jt,Ot=r.a.memo((function(){return Object(q.jsx)(ve.a,{pageTitle:"Dialogs",children:Object(q.jsxs)(oe.d,{children:[Object(q.jsx)(oe.b,{exact:!0,path:"/dialogs",component:ot}),Object(q.jsx)(oe.b,{path:"/dialogs/:userId",component:mt})]})})})),pt=Object(he.a)(Ot),gt=(n(347),r.a.memo((function(){return Object(q.jsx)(ve.a,{pageTitle:"News",children:Object(q.jsx)("div",{children:"News Page"})})}))),ht=Object(he.a)(gt),_t=(n(348),r.a.memo((function(){return Object(q.jsx)(ve.a,{pageTitle:"Music",children:Object(q.jsx)("div",{children:"Music Page"})})}))),vt=Object(he.a)(_t),xt=(n(162).default,n(350),r.a.memo((function(){return Object(q.jsx)(ve.a,{pageTitle:"Settings",children:Object(q.jsx)("div",{className:"section",children:"Settings Page"})})}))),Et=Object(he.a)(xt),Nt=(n(351),function(){return Object(q.jsx)(ve.a,{pageTitle:"404 Page Not Found",children:Object(q.jsxs)("div",{className:"error__page-wrapper",children:[Object(q.jsx)("h2",{className:"error__page-title",children:"404 ERROR"}),Object(q.jsx)("div",{className:"error__page-descr",children:"Page not found"}),Object(q.jsx)(i.c,{className:"error__page-link",to:"/profile",children:"Go back to the main page"})]})})}),St=(n(352),r.a.lazy((function(){return Promise.resolve().then(n.bind(null,161))}))),wt=r.a.lazy((function(){return Promise.resolve().then(n.bind(null,162))})),It=r.a.memo((function(){return Object(q.jsx)("main",{className:"main-section",children:Object(q.jsx)(r.a.Suspense,{fallback:X.a,children:Object(q.jsxs)(oe.d,{children:[Object(q.jsx)(oe.a,{exact:!0,from:"/",to:"/profile"}),Object(q.jsx)(oe.b,{path:"/login",component:we}),Object(q.jsx)(oe.b,{path:"/profile/:userId?",component:ct}),Object(q.jsx)(oe.b,{path:"/users",component:St}),Object(q.jsx)(oe.b,{path:"/dialogs",component:pt}),Object(q.jsx)(oe.b,{path:"/news",component:ht}),Object(q.jsx)(oe.b,{path:"/music",component:vt}),Object(q.jsx)(oe.b,{path:"/chat",component:wt}),Object(q.jsx)(oe.b,{path:"/settings",component:Et}),Object(q.jsx)(oe.b,{path:"*",component:Nt})]})})})})),yt=(n(353),r.a.memo((function(){return Object(q.jsx)("div",{className:"container",children:Object(q.jsxs)("footer",{className:"footer",children:["Created for educational purposes \xa9 ",Object(q.jsx)("a",{href:"http://karpeyev.com",target:"_blank",rel:"noreferrer",className:"author-link",children:"insane4L"})]})})}))),Pt=(n(354),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).catchAllUnhandledErrors=function(){e.props.unhandledErrorCatched(!0)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp(),window.addEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"render",value:function(){return this.props.appInitialized?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(ft.a,{children:Object(q.jsx)("title",{children:"Social Network"})}),Object(q.jsxs)("div",{className:"app__wrapper",children:[Object(q.jsx)(Q,{}),Object(q.jsxs)("div",{className:"container page__layout",children:[Object(q.jsx)(ie,{}),Object(q.jsx)(It,{})]}),Object(q.jsx)(yt,{})]})]}):Object(q.jsx)(X.a,{})}}]),n}(r.a.Component)),kt=Object(f.b)((function(e){return{appInitialized:e.app.appInitialized}}),{initializeApp:function(){return function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(P());case 2:t(M.initializedSuccessfully());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},unhandledErrorCatched:M.unhandledErrorCatched})(Pt),Tt=n(160),Ct=n(150),Mt=n(57),Rt=Object(_e.c)({dialogsPage:A.b,profilePage:Ie.b,usersPage:K.b,app:R,auth:k,form:Ct.a,chat:Mt.b}),Dt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||_e.d,Lt=Object(_e.e)(Rt,Dt(Object(_e.a)(Tt.a)));window.store=Lt;var At=Lt;n(355);c.a.render(Object(q.jsx)(r.a.StrictMode,{children:Object(q.jsx)(i.a,{children:Object(q.jsx)(ft.b,{children:Object(q.jsx)(f.a,{store:At,children:Object(q.jsx)(kt,{})})})})}),document.getElementById("root"))},36:function(e,t,n){"use strict";var s=n(1),r=n.n(s),a=n(11),c=n(32),i=(n(216),n(0)),o=r.a.memo((function(e){var t=e.userImage,n=e.linkTo,s=e.className;return Object(i.jsx)(a.b,{className:s,to:n,children:Object(i.jsx)("div",{className:"user__component-avatar",children:Object(i.jsx)("img",{className:"user__component-avatar-img",src:t||c.c,alt:"user_image"})})})}));t.a=o},37:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f}));var s=n(2),r=n(60),a=(n(1),n(15)),c=n(3),i=n(0),o=["isAuth"],u=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t){return Object(c.b)(l)((function(n){var c=n.isAuth,u=Object(r.a)(n,o);return c||e?c&&e?Object(i.jsx)(a.a,{to:"/profile"}):Object(i.jsx)(t,Object(s.a)({},u)):Object(i.jsx)(a.a,{to:"/login"})}))}},l=function(e){return{isAuth:e.auth.isAuthorized}},d=u(),f=u(!0)},41:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return c}));var s=function(e){return e.auth.id},r=function(e){return e.auth.isAuthorized},a=function(e){return e.auth.login},c=function(e){return e.auth.authUserPhoto}},45:function(e,t,n){"use strict";var s=n(1),r=n.n(s),a=n(11),c=n(0),i=r.a.memo((function(e){var t=e.linkTo,n=e.userName,s=e.className;return Object(c.jsx)(a.b,{className:s,to:t,children:Object(c.jsx)("div",{className:"user__component-name",children:n})})}));t.a=i},57:function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return P})),n.d(t,"c",(function(){return k}));var s=n(6),r=n.n(s),a=n(10),c=n(30),i=n(2),o={"messages-received":[],"status-changed":[]},u=null,l=function(){b("pending"),setTimeout(O,4e3)},d=function(e){var t=JSON.parse(e.data);o["messages-received"].forEach((function(e){return e(t)}))},f=function(){b("ready")},j=function(){b("error")},b=function(e){o["status-changed"].forEach((function(t){return t(e)}))},m=function(){var e,t,n,s,r;null===(e=u)||void 0===e||e.removeEventListener("close",l),null===(t=u)||void 0===t||t.removeEventListener("message",d),null===(n=u)||void 0===n||n.removeEventListener("open",f),null===(s=u)||void 0===s||s.removeEventListener("error",j),null===(r=u)||void 0===r||r.close()};function O(){m(),u=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"),b("pending"),u.addEventListener("close",l),u.addEventListener("message",d),u.addEventListener("open",f),u.addEventListener("error",j)}var p=function(){O()},g=function(){o["messages-received"]=[],o["status-changed"]=[],m()},h=function(e,t){o[e].push(t)},_=function(e,t){o[e]=o[e].filter((function(e){return e!==t}))},v=function(e){var t;null===(t=u)||void 0===t||t.send(e)},x={messages:[],status:"pending"},E={messagesReceived:function(e){return{type:"sn/CHAT/MESSAGES_RECEIVED",payload:{messages:e}}},statusChanged:function(e){return{type:"sn/CHAT/STATUS_CHANGED",payload:{status:e}}},messagesCleaned:function(){return{type:"sn/CHAT/MESSAGES_CLEANED"}}},N=null,S=function(e){return null===N&&(N=function(t){e(E.messagesReceived(t))}),N},w=null,I=function(e){return null===w&&(w=function(t){e(E.statusChanged(t))}),w},y=function(){return function(){var e=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(),h("messages-received",S(t)),h("status-changed",I(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=function(){return function(){var e=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_("messages-received",S(t)),_("status-changed",I(t)),g();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:v(e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"sn/CHAT/MESSAGES_RECEIVED":return Object(i.a)(Object(i.a)({},e),{},{messages:[].concat(Object(c.a)(e.messages),Object(c.a)(t.payload.messages)).filter((function(e,t,n){return t>=n.length-100}))});case"sn/CHAT/STATUS_CHANGED":return Object(i.a)(Object(i.a)({},e),{},{status:t.payload.status});case"sn/CHAT/MESSAGES_CLEANED":return Object(i.a)(Object(i.a)({},e),{},{messages:[]});default:return e}}},8:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return r}));var s,r,a=n(152),c=n.n(a).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"e88bb7e6-af23-49e2-8781-5099f9ee4dd5"}});!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(s||(s={})),function(e){e[e.CaptchaIsRequired=10]="CaptchaIsRequired"}(r||(r={}))},89:function(e,t,n){"use strict";var s=n(1),r=n.n(s),a=n(11),c=n(0),i=r.a.memo((function(e){var t=e.linkTo;return Object(c.jsx)(a.b,{to:t,className:"user__messages-btn",children:"Write message"})}));t.a=i},90:function(e,t,n){"use strict";var s=n(1),r=n.n(s),a=n(3),c=n(29),i=n(22),o=(n(336),n(0)),u=r.a.memo((function(e){var t=e.isFollowed,n=e.userId,s=Object(a.d)(i.c),r=t?"Unfollow":!1===t?"Follow":"",u=t?"user__follow-btn unfollow-btn":"user__follow-btn",l=Object(a.c)();return null!==t&&n?Object(o.jsx)("button",{className:u,disabled:s.some((function(e){return e===n})),onClick:function(){return function(e){l(Object(c.c)(e))}(n)},children:r}):Object(o.jsx)("div",{})}));t.a=u},93:function(e,t,n){"use strict";var s=n(20),r=n(1),a=n.n(r),c=(n(344),n(0)),i=a.a.memo((function(e){var t=e.fieldName,n=e.btnDisabled,a=e.sendMessage,i=Object(r.useState)(""),o=Object(s.a)(i,2),u=o[0],l=o[1],d=function(e){null===e||void 0===e||e.preventDefault(),u&&(a(u),l(""))};return Object(c.jsxs)("form",{onSubmit:d,className:"send-message__form",children:[Object(c.jsx)("textarea",{name:t,className:"send-message__input",placeholder:"Type new message here..",autoComplete:"off",value:u,onChange:function(e){return l(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&!1===e.shiftKey&&(e.preventDefault(),d())}}),Object(c.jsx)("button",{disabled:n||!u,className:"send-message__btn",children:"Send Message"})]})}));t.a=i},95:function(e,t,n){"use strict";var s=n(20),r=n(1),a=n.n(r),c=n(3),i=n(41),o=n(36),u=n(45),l=(n(147),n(0)),d=a.a.memo((function(e){var t=e.message,n=e.isOwnerMessage?"message_owner":"message_friend";return Object(l.jsxs)("div",{className:"message ".concat(n),children:[Object(l.jsxs)("div",{className:"message__info",children:[Object(l.jsx)(o.a,{className:"message__author-image",userImage:t.photo,linkTo:"/profile/".concat(t.userId)}),Object(l.jsx)(u.a,{className:"message__author-name",userName:t.userName,linkTo:"/profile/".concat(t.userId)})]}),Object(l.jsx)("div",{className:"message__text",children:t.message})]})})),f=n(56),j=n.n(f),b=n(21),m=n(25),O=n(17),p=a.a.memo((function(e){var t=e.message,n=e.isOwnerMessage,a=e.friendImg,i=e.ownerImg,d=Object(r.useState)(!1),f=Object(s.a)(d,2),m=f[0],O=f[1],p=Object(c.c)(),h=n?"message_owner":"message_friend",_=function(e){var t=1e3*e;O(!0);setTimeout((function(){O(!1)}),t)};return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"message ".concat(h),children:[Object(l.jsxs)("div",{className:"message__info",children:[Object(l.jsx)(o.a,{className:"message__author-image",userImage:n?i:a,linkTo:"/profile/".concat(t.senderId)}),Object(l.jsx)(u.a,{className:"message__author-name",userName:t.senderName,linkTo:"/profile/".concat(t.senderId)}),Object(l.jsx)("div",{className:"message__date",children:Object(l.jsx)(j.a,{format:"MMM DD YYYY hh:mm",date:t.addedAt})})]}),Object(l.jsx)("div",{className:"message__text",id:"dialog__message-text",children:t.body}),n&&!m&&Object(l.jsx)("div",{className:"check-status__btn",onClick:function(){!0===t.viewed&&(p(b.a.setRequestError({messageStatusRequestError:null})),p(b.a.addMessageToViewed(t.id)),_(4)),!1===t.viewed&&(p(Object(b.e)(t.id)),_(4))},children:"Check status"}),m&&Object(l.jsx)(g,{messageId:t.id})]})})})),g=a.a.memo((function(e){var t=e.messageId,n=Object(c.d)(O.l),s=Object(c.d)(O.e);return s?Object(l.jsx)("div",{className:"message__status",children:Object(l.jsx)(m.a,{errorMessage:s})}):Object(l.jsx)("div",{className:"message__status",children:n.some((function(e){return e===t}))?"Viewed":"Not viewed"})})),h=p,_=a.a.memo((function(e){var t=e.userId,n=e.messagesPortionSize,s=Object(c.d)(O.d),r=Object(c.d)(O.j),a=Math.ceil(r/n),i=Math.ceil(s/n),o=i+1,u=Object(c.c)();return Object(l.jsx)(l.Fragment,{children:a>i?Object(l.jsx)("div",{className:"dialogs__item-pagination",onClick:function(){t&&u(Object(b.d)(t,o,n))},children:"^^^"}):Object(l.jsx)("span",{})})})),v=n(26),x=(n(346),a.a.memo((function(e){var t,n=e.chatMessages,a=e.dialogMessages,o=e.dialogMessagesPortionSize,u=e.isLoading,f=e.friendId,j=e.friendImg,b=e.ownerImg,m=n||a,O=Object(r.useState)(!0),p=Object(s.a)(O,2),g=p[0],x=p[1],E=Object(r.useRef)(null),N=Object(c.d)(i.a);return Object(r.useEffect)((function(){var e;g&&(null===(e=E.current)||void 0===e||e.scrollIntoView({block:"end",behavior:"smooth"}))}),[m]),t=n?n.map((function(e,t){return Object(l.jsx)(d,{message:e,isOwnerMessage:e.userId===N},t)})):null===a||void 0===a?void 0:a.map((function(e){return Object(l.jsx)(h,{message:e,friendImg:j,ownerImg:b,isOwnerMessage:e.senderId===N},e.id)})),Object(l.jsxs)("div",{className:"messages__list",onScroll:function(e){var t=e.currentTarget;Math.abs(t.scrollHeight-t.scrollTop-t.clientHeight)<300?!g&&x(!0):g&&x(!1)},children:[!n&&Object(l.jsx)(_,{messagesPortionSize:o||10,userId:f}),u?Object(l.jsx)(v.a,{}):t,Object(l.jsx)("div",{ref:E})]})})));t.a=x}},[[356,1,2]]]);
//# sourceMappingURL=main.c196f34d.chunk.js.map