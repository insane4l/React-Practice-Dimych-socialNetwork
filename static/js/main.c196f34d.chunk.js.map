{"version":3,"sources":["components/common/pagination/pagination.tsx","components/app/pages/usersPage/user.tsx","components/app/pages/usersPage/usersList.tsx","components/app/pages/usersPage/usersSearchForm.tsx","components/app/pages/usersPage/usersPage.tsx","utils/transformFuncs.ts","components/app/pages/chatPage/chatForm.tsx","selectors/chat.ts","components/app/pages/chatPage/chatPage.tsx","selectors/dialogs.ts","assets/icons/profile-icon.svg","assets/icons/users-icon.svg","assets/icons/dialogs-icon.svg","assets/icons/news-icon.svg","assets/icons/music-icon.svg","assets/icons/chat-icon.svg","assets/icons/settings-icon.svg","assets/icons/like.svg","assets/icons/comments.svg","assets/icons/share.svg","assets/icons/add-photo-icon.svg","assets/icons/go-back-arrow.svg","assets/icons/left-arrow.svg","assets/icons/right-arrow.svg","components/common/appPage/AppPage.tsx","services/dialogsAPI.ts","reducers/dialogsReducer.ts","selectors/users.ts","reducers/profileReducer.ts","services/usersAPI.ts","components/common/errors/requestError.tsx","components/common/spinner/spinner.tsx","components/common/spinner/index.js","reducers/usersReducer.ts","assets/images/main-logo.svg","assets/images/defaultCover.jpeg","assets/images/defaultPhoto.png","assets/images/ads-img.jpg","services/authAPI.ts","reducers/authReducer.ts","reducers/appReducer.ts","components/app/navBar/newMessagesCounter.tsx","components/app/navBar/navBar.tsx","components/app/navBar/index.js","components/app/header/mobileMenu.tsx","selectors/app.ts","components/app/header/index.js","components/app/header/header.tsx","components/app/friendsBlock/friendsBlock.tsx","utils/getValueFuncs.ts","components/app/friendsBlock/index.js","components/app/adsBlock/index.js","components/app/adsBlock/adsBlock.tsx","components/app/sideBar/sideBarBlock/index.js","components/app/sideBar/sideBarBlock/sideBarBlock.tsx","components/app/sideBar/sideBar.tsx","components/app/sideBar/index.js","utils/validation/validators.ts","components/common/formsControls/formsControls.tsx","components/app/pages/loginPage/loginPage.tsx","components/app/pages/loginPage/index.js","selectors/profile.ts","components/app/pages/profilePage/postsTimeline/post.tsx","components/app/pages/profilePage/postsTimeline/postAddForm/postAddForm.tsx","components/app/pages/profilePage/postsTimeline/postAddForm/index.js","components/app/pages/profilePage/postsTimeline/index.js","components/app/pages/profilePage/postsTimeline/postsTimeline.tsx","utils/toggleBodyScroll.ts","utils/calcBrowserScrollWidth.ts","components/common/imagesPresentation/fullSizeImage.tsx","components/app/pages/profilePage/profileInfo/profileImages.tsx","components/app/pages/profilePage/profileInfo/profileStatus.tsx","components/app/pages/profilePage/profileInfo/profileDataForm.tsx","components/app/pages/profilePage/profileInfo/profileDataTable.tsx","components/app/pages/profilePage/profileInfo/profileData.tsx","components/app/pages/profilePage/profileInfo/profileInfo.tsx","components/app/pages/profilePage/profilePage.tsx","components/app/pages/profilePage/profilePageContainer.tsx","components/app/pages/profilePage/index.js","components/app/pages/dialogsPage/dialogsList/dialogsListItem.tsx","components/app/pages/usersPage/index.js","components/app/pages/dialogsPage/dialogsList/dialogsList.tsx","components/app/pages/dialogsPage/dialogsItem/dialogForm.tsx","components/app/pages/dialogsPage/dialogsItem/dialogsItem.tsx","components/app/pages/dialogsPage/dialogsPage.tsx","components/app/pages/dialogsPage/index.js","components/app/pages/newsPage/newsPage.tsx","components/app/pages/newsPage/index.js","components/app/pages/musicPage/musicPage.tsx","components/app/pages/musicPage/index.js","components/app/pages/settingsPage/settingsPage.tsx","components/app/pages/chatPage/index.js","components/app/pages/settingsPage/index.js","components/app/pages/pageNotFound/index.js","components/app/pages/pageNotFound/pageNotFound.tsx","components/app/mainSection/mainSection.tsx","components/app/mainSection/index.js","components/app/footer/index.js","components/app/footer/footer.tsx","components/app/app.tsx","components/app/index.js","reduxStore.ts","index.tsx","components/common/userAvatar/userAvatar.tsx","components/HOCs/withRedirect.tsx","selectors/auth.ts","components/common/userName/userName.tsx","services/chatAPI.ts","reducers/chatReducer.ts","services/API.ts","components/common/buttons/messagesBtn/messagesBtn.tsx","components/common/buttons/followBtn/followBtn.tsx","components/common/messagesComponents/sendMessageForm.tsx","components/app/pages/chatPage/chatMessage.tsx","components/app/pages/dialogsPage/dialogsItem/dialogMessage.tsx","components/app/pages/dialogsPage/dialogsItem/dialogPagination.tsx","components/common/messagesComponents/messagesList.tsx"],"names":["Pagination","React","memo","currentPage","totalItemsCount","pageSize","onPageSelected","portionSize","useState","currentPortion","setCurrentPortion","useMediaQuery","query","useEffect","selectedPagePortion","pagesCount","Math","ceil","pages","i","push","portionsCount","firstPortionPageNum","lastPortionPageNum","className","onClick","src","prevArrow","alt","filter","num","map","nextArrow","User","user","isAuthorized","authUserId","id","photos","name","followed","status","userImage","small","linkTo","userName","isFollowed","userId","UsersList","useSelector","state","auth","users","usersSelectors","changingSubscriptionStatusError","dispatch","useDispatch","actions","setRequestError","u","errorMessage","usersSearchFormValidators","values","UsersSearchForm","props","stateFilters","friendInputValue","friend","initialValues","term","enableReinitialize","validate","onSubmit","setSubmitting","onFiltersChanged","isSubmitting","type","disabled","component","value","searchTitle","UsersPage","totalUsersCount","isLoading","usersRequestError","filters","friendFilter","filter2","filter1","getSearchTitleFromSetParameters","history","useHistory","queryString","location","search","parsedQS","qs","ignoreQueryPrefix","queryPage","Number","page","requestUsers","setFilters","pushSearchParams","P","T","F","pathname","useCallback","AppPage","pageTitle","ChatForm","sendMessage","fieldName","btnDisabled","getStatus","chat","getMessages","messages","ChatPage","Chat","chatSelectors","sendChatMessage","message","startMessagesListening","stopMessagesListening","messagesCleaned","chatMessages","withAnonUserRedirect","getNewDialogsMessagesCount","dialogsPage","newDialogsMessagesCount","getViewedMessages","viewedMessages","getSelectedDialogMessages","selectedDialogMessages","getLoadedMessagesCount","length","getSelectedDialogMessagesCount","selectedDialogMessagesCount","getDialogInterlocuterProfile","dialogInterlocuterProfile","getDialogsList","dialogsList","getIsLoading","getNewMessagesCountRequestError","requestErrors","newMessagesCountRequestError","getSendingMessageError","sendingMessageError","getMessageStatusRequestError","messageStatusRequestError","getRequestingMessagesError","requestingMessagesError","canonicalLink","children","rel","href","dialogsAPI","apiBase","get","then","res","data","pageNumber","post","body","put","messageId","initialState","dialogsListReceived","payload","dialogMessagesReceived","dialogMessages","dialogMessagesCleaned","setDialogMessagesCount","dialogMessagesCount","messageSent","addMessageToViewed","delMessageFromViewed","newMessagesCountReceived","newMessagesCount","setIsLoading","interlocuterProfileReceived","profile","error","requestAllDialogsList","a","dialogs","requestDialogMessages","usersAPI","getUserProfile","items","totalCount","requestNewMessagesCount","resultCode","ResultCodesEnum","Success","sentMessage","addedAt","recipientId","senderId","senderName","translatedBody","viewed","requestMessageStatus","dialogsReducer","action","getUsers","usersPage","getTotalUsersCount","getPageSize","getCurrentPage","getUsersListFilters","getLoadingStatus","getFollowingInProgress","followingInProgress","getRandomFriends","randomFriends","getTotalFriendsCount","totalFriendsCount","getRandomFriendsRequestError","randomFriendsRequestError","getChangingSubscriptionStatusError","getUsersRequestError","postDate","label","likesCount","comments","selectedProfile","profileStatus","selectedProfileFollowedInfo","followedStatus","updateProfileStatusError","addNewPost","date","messageBody","profileReceived","setProfileStatus","deletePost","postId","setProfilePhotoSuccess","setProfileDataSuccess","profileFollowedInfoReceived","toggleProfileFollowedInfo","setUpdateProfileStatusError","updateProfilePhoto","photoFile","setProfilePhoto","updatedPhotosData","getProfileStatus","requestProfileFollowedInfo","checkFollowStatus","updateProfileStatus","updateProfileData","formData","setProfileData","stopSubmit","_error","Promise","reject","profileReducer","newState","item","isFriendFilter","queryParams","FormData","append","followToUser","unfollowFromUser","delete","RequestError","Spinner","setUsers","randomFriendsReceived","toggleFollowed","setPageNumber","setTotalUsersCount","count","setTotalFriendsCount","setFollowingInProgress","isInProgress","followUnfollowFlow","apiMethod","profileActions","followOrUnfollow","requestRandomFriends","undefined","usersReducer","authAPI","email","password","rememberMe","captcha","login","authUserPhoto","captchaUrl","photo","requestAuthUserPhoto","authProfile","requestUserAuthData","meData","authReducer","appInitialized","unhandledError","initializedSuccessfully","unhandledErrorCatched","appReducer","NewMessagesCounter","rerenderSecs","dialogsSelectors","isUserAuthorized","authSelectors","rerenderInterval","timerId","setInterval","clearInterval","title","NavBar","closeMenu","onMobileMenuClick","e","NavbarLink","url","iconLink","icons","showNewMessagesCounter","to","activeClassName","MobileMenu","isMenuVisible","setMenuVisibility","toggleMenuVisibility","hideMenu","burgerBtnStyle","getUnhandledError","app","Header","userLogin","userAvatar","appSelectors","setTimeout","loginLink","loginPanel","mainLogo","FriendsBlock","friendsPerPage","intervalSeconds","selectors","lastPage","timerInterval","min","max","randomPageNumber","floor","random","console","log","clearTimeout","randomFriendsList","f","Friend","friendImage","friendName","friendId","friendsBlockContent","AdsBlock","target","adsImg","SideBarBlock","blockTitle","SideBar","connect","required","CustomField","Component","input","meta","errorStatus","hasError","touched","errorClassName","fieldClassName","Textarea","Input","createField","validators","placeholder","Field","maxLength","maxLength25","LoginForm","handleSubmit","htmlFor","LoginReduxForm","reduxForm","form","LoginPage","compose","withSuccesAuthRedirect","ResultCodeForCaptchaEnum","CaptchaIsRequired","getSelectedProfile","profilePage","getSelectedProfileFollowedInfo","getUpdateProfileStatusError","Post","profileSelectors","fullName","format","ProfilePostsReduxForm","PostAddForm","newDate","Date","day","getDate","month","getMonth","year","getFullYear","hours","getHours","minutes","getMinutes","getCurrentDate","postMessage","postBody","reset","PostsTimline","isOwner","reverse","el","toggleBodyScroll","mode","browserScrollWidth","div","document","createElement","style","width","height","overflowY","visibility","appendChild","scrollWidth","offsetWidth","clientWidth","remove","calcBrowserScrollWidth","bodyOverflow","stubWidth","overflow","marginRight","querySelector","paddingRight","FullSizeImage","source","closeHandler","classList","contains","ProfileImages","userCover","userPhoto","displayFSImage","setFSImageDisplay","defaultCover","large","defaultPhoto","onChange","files","ProfileStatus","profileStatusMessage","editMode","setEditMode","statusMessage","setStatus","statusText","onDoubleClick","statusInput","autoFocus","currentTarget","onBlur","ProfileDataForm","turnOffEditMode","Row","inputName","element","Object","keys","contacts","key","ProfileDataReduxForm","ProfileDataTable","turnOnEditMode","aboutMe","lookingForAJob","lookingForAJobDescription","contactsList","isLink","link","test","ProfileData","ProfileButtons","ProfileDataList","profileFollowedInfo","dataVisibility","setDataVisibility","toggleDataVisibility","isVisible","onProfileDataSubmit","displayedDataContent","ProfileInfo","ProfilePage","topAnchor","useRef","current","scrollIntoView","block","behavior","ref","ProfilePageContainer","this","refreshProfile","prevProps","match","params","setUserProfile","alert","mapDispatchToProps","withRouter","DialogsListItem","dialogsItem","lastUserActivityDate","hasNewMessages","lastDialogActivityDate","fromNow","DialogsList","d","DialogForm","DialogsItem","interlocuter","authUserImg","useRouteMatch","sendDialogMessage","DialogsItemHeader","dialogMessagesPortionSize","friendImg","ownerImg","DialogsPage","exact","path","NewsPage","MusicPage","SettingsPage","PageNotFound","lazy","MainSection","Suspense","fallback","from","Footer","App","catchAllUnhandledErrors","initializeApp","window","addEventListener","removeEventListener","rootReducer","combineReducers","formReducer","chatReducer","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","createStore","applyMiddleware","thunkMiddleware","ReactDOM","render","StrictMode","getElementById","UserAvatar","redirectHOC","afterLoggingIn","WrappedComponent","mapStateToProps","isAuth","restProps","getAuthUserId","getIsAuthorized","getLogin","getAuthUserPhoto","UserName","subscribers","ws","notifySubscribersAboutStatus","createChannel","messageHandler","newMessages","JSON","parse","forEach","s","openHandler","errorHandler","cleanUp","close","WebSocket","chatAPI","event","callback","send","messagesReceived","statusChanged","_newMessageHandler","newMessageHandlerCreator","_statusChangedHandler","statusChangedHandlerCreator","m","index","array","axios","create","withCredentials","baseURL","headers","MessagesBtn","FollowBtn","btnLabel","btnStyle","some","followUnfollow","SendMessageForm","setMessage","sendMessageHandler","preventDefault","autoComplete","onKeyDown","shiftKey","ChatMessage","isOwnerMessage","DialogMessage","statusDisplay","setStatusDisplay","showStatus","seconds","milliseconds","MessageStatus","MessageStatusRequestError","DialogPagination","messagesPortionSize","loadedMessagesCount","viewedPortionsCount","oldMessagesPortionNumber","MessagesList","propsMessages","isAutoScroll","setIsAutoScroll","messagesAnchor","onScroll","abs","scrollHeight","scrollTop","clientHeight"],"mappings":"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","file":"static/js/main.c196f34d.chunk.js","sourcesContent":["import React, {useState} from 'react'\nimport { useEffect } from 'react';\nimport { nextArrow, prevArrow } from '../../../assets/icons';\nimport { useMediaQuery } from 'react-responsive'\n\nimport './pagination.scss'\n\n\nconst Pagination: React.FC<PropsType> = React.memo( ({currentPage, totalItemsCount, pageSize, onPageSelected, portionSize = 10}) => {\n    const [currentPortion, setCurrentPortion] = useState(currentPage);\n\n    const isSmallerThanLgBreakPoint = useMediaQuery({ query: `(max-width: 992px)`});\n    if (isSmallerThanLgBreakPoint) portionSize = 5;\n\n    useEffect(() => {\n        if (currentPortion !== selectedPagePortion) {\n            setCurrentPortion(selectedPagePortion)\n        }\n        // eslint-disable-next-line\n    }, [currentPage])\n\n    const pagesCount = Math.ceil(totalItemsCount / pageSize);\n    const pages = [];\n    for(let i=1; i <= pagesCount; i++){\n        pages.push(i);\n    };\n    \n\n    const selectedPagePortion = Math.ceil(currentPage / portionSize);\n    const portionsCount = Math.ceil(pagesCount / portionSize);\n    const firstPortionPageNum = (currentPortion -1) * portionSize + 1;\n    const lastPortionPageNum = currentPortion * portionSize;\n    \n    const setNextPortion = () => {\n        if (currentPortion < portionsCount) {\n            setCurrentPortion(currentPortion + 1)\n        }\n    }\n    const setPrevPortion = () => {\n        if (currentPortion > 1) {\n            setCurrentPortion(currentPortion - 1)\n        }\n    }\n\n    return (\n        <div className=\"pagination\">\n            {currentPortion > 1 \n                ? <button onClick={setPrevPortion} className=\"pagination__prev-btn\">\n                    <img src={prevArrow} alt=\"prev\" className=\"pagination__prev-arrow\" />\n                  </button>\n\n                : <div className=\"pagination__btn-stub\"></div>\n            }\n\n            <div className=\"pagination__list\">\n                {pages\n                    .filter(num => (num >= firstPortionPageNum && num <= lastPortionPageNum))\n                    .map(num =>\n                        <button \n                            key={num} \n                            className={`pagination__item ${num === currentPage ? 'pagination__item_active' : ''}`}\n                            onClick={() => onPageSelected(num)}>\n                            {num}\n                        </button>)\n                }\n            </div>\n\n            {currentPortion < portionsCount\n                ? <button onClick={setNextPortion} className=\"pagination__next-btn\">\n                    <img src={nextArrow} alt=\"next\" className=\"pagination__next-arrow\" />\n                  </button>\n                  \n                : <div className=\"pagination__btn-stub\"></div>\n            }\n        </div>\n    )\n})\n\n\ntype PropsType = {\n    currentPage: number\n    totalItemsCount: number\n    pageSize: number\n    onPageSelected: (pageNumber: number) => void\n    portionSize?: number\n}\n\nexport default Pagination","import React from 'react'\nimport { UserType } from '../../../../types/types'\nimport FollowBtn from '../../../common/buttons/followBtn/followBtn'\nimport MessagesBtn from '../../../common/buttons/messagesBtn/messagesBtn'\n\nimport UserAvatar from '../../../common/userAvatar/userAvatar'\nimport UserName from '../../../common/userName/userName'\n\n\nconst User: React.FC<PropsType> = React.memo( ({user, isAuthorized, authUserId}) => {\n\n    const {id, photos, name, followed, status} = user\n\n    return (\n        <li className=\"users__list-item\">\n            <UserAvatar className=\"user__image\" userImage={photos.small} linkTo={`/profile/${id}`} />\n            <div className=\"user__details-wrapper\">\n                <div className=\"user__info\">\n                    <UserName className=\"user__name\" userName={name} linkTo={`/profile/${id}`} />\n                    <div className=\"user__status\">{status}</div>\n                </div>\n                {( isAuthorized && (authUserId !== id) ) \n                    && <div className=\"user__buttons-wrapper\">\n                        <MessagesBtn linkTo={`/dialogs/${id}`} />\n                        <FollowBtn isFollowed={followed} userId={id} />\n                    </div>\n                }\n            </div>\n        </li>\n    )\n})\n\nexport default User\n\n\n\ntype PropsType = {\n    user: UserType\n    isAuthorized: boolean\n    authUserId: number | null\n}","import React, { useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport User from './user'\nimport RequestError from '../../../common/errors/requestError'\nimport { actions } from '../../../../reducers/usersReducer'\nimport * as usersSelectors from '../../../../selectors/users'\nimport { AppStateType } from '../../../../reduxStore'\n\n\nconst UsersList: React.FC = React.memo( () => {\n\n    const isAuthorized = useSelector((state: AppStateType) => state.auth.isAuthorized)\n    const authUserId = useSelector((state: AppStateType) => state.auth.id)\n\n    const users = useSelector(usersSelectors.getUsers)\n    const changingSubscriptionStatusError = useSelector(usersSelectors.getChangingSubscriptionStatusError)\n    const dispatch = useDispatch()\n\n    useEffect( () => {\n        return () => {\n            dispatch(actions.setRequestError({changingSubscriptionStatusError: null}))\n        }\n    }, [dispatch])\n\n    return (\n        <>\n            <ul className=\"users__list\">\n                { users.map(u => <User key={u.id} user={u} isAuthorized={isAuthorized} authUserId={authUserId} />) }             \n            </ul>\n            {changingSubscriptionStatusError \n                && <RequestError errorMessage={changingSubscriptionStatusError} className=\"users__list-item_error\" />}\n        </>\n    )\n})\n\nexport default UsersList","import React from 'react'\nimport {Formik, Form, Field, ErrorMessage} from 'formik'\nimport { UsersListFiltersType } from '../../../../reducers/usersReducer'\nimport { useSelector } from 'react-redux'\nimport * as usersSelectors from '../../../../selectors/users'\nimport { AppStateType } from '../../../../reduxStore'\n\n\nconst usersSearchFormValidators = (values: UsersListFiltersType) => {\n    const errors = {};\n    // if (!values.term) {\n    // errors.term = 'Required';\n    // }\n    return errors;\n}\n\n\nconst UsersSearchForm: React.FC<PropsType> = React.memo( (props) => {\n\n    const isAuthorized = useSelector((state: AppStateType) => state.auth.isAuthorized)\n    const stateFilters = useSelector(usersSelectors.getUsersListFilters)\n\n    const onFormSubmit = (values: ReceivedValuesType, { setSubmitting }: {setSubmitting: (isSubmitting: boolean) => void} ) => {\n        // filters constructing\n        const filter = {\n            term: values.term,\n            friend: values.friend === 'Friends Only' ? true : values.friend === 'Not Friends' ? false : null\n        }\n        \n        props.onFiltersChanged(filter)\n        setSubmitting(false) // (fake disable) todo: reed docs, how to sync formik setSubmitting with the response from the server\n    }\n\n    const friendInputValue = stateFilters.friend === false ? \"Not Friends\" : stateFilters.friend === true ? \"Friends Only\" : null\n    \n    return (\n        <Formik\n            initialValues={{term: stateFilters.term, friend: friendInputValue as boolean | null}}\n            enableReinitialize\n            validate={usersSearchFormValidators}\n            onSubmit={onFormSubmit}\n        >\n            {({isSubmitting}) => {\n\n                return (\n                    <Form className=\"users__search-form\">\n                        <div className=\"search__field-wrapper\">\n                            <Field className=\"users__search-field\" type=\"search\" name=\"term\" />\n                            <button className=\"users__search-btn\" type=\"submit\" disabled={isSubmitting}>\n                                Search\n                            </button>\n                        </div>\n                        \n                        <ErrorMessage className=\"users__search-error\" name=\"term\" component=\"div\" />\n\n                        {isAuthorized \n                            && <>\n                                <label className=\"users__search-label\">\n                                    <Field type=\"radio\" name=\"friend\" value=\"Not Friends\" />\n                                    Not friends\n                                </label>\n                                <label className=\"users__search-label\">\n                                    <Field type=\"radio\" name=\"friend\" value=\"Friends Only\" />\n                                    Friends\n                                </label>\n\n                                <h3 className=\"users__search-title\">\n                                    {props.searchTitle}\n                                </h3>\n                            </>\n                        }\n                    </Form>\n                )\n            }}\n        </Formik>\n    )\n})\n\nexport default UsersSearchForm\n\n\n\ntype ReceivedValuesType = {term: string, friend: string | null | boolean}\n\ntype PropsType = {\n    onFiltersChanged: (filter: UsersListFiltersType) => void\n    currentPage: number\n    pagesCount: number\n    searchTitle: string\n}","import React, { useCallback, useEffect } from 'react'\nimport { actions, requestUsers, UsersListFiltersType} from '../../../../reducers/usersReducer'\nimport Pagination from '../../../common/pagination/pagination'\nimport UsersList from './usersList'\nimport { useDispatch, useSelector } from 'react-redux'\nimport * as usersSelectors from '../../../../selectors/users'\nimport UsersSearchForm from './usersSearchForm'\nimport Spinner from '../../../common/spinner'\nimport { useHistory } from 'react-router-dom'\nimport * as qs from 'qs'\nimport RequestError from '../../../common/errors/requestError'\nimport { getSearchTitleFromSetParameters } from '../../../../utils/transformFuncs'\nimport AppPage from '../../../common/appPage/AppPage'\n\nimport './usersPage.scss'\n\n\nconst UsersPage: React.FC = React.memo( () => {\n\n    const totalUsersCount = useSelector(usersSelectors.getTotalUsersCount)\n    const pageSize = useSelector(usersSelectors.getPageSize)\n    const currentPage = useSelector(usersSelectors.getCurrentPage)\n    const isLoading = useSelector(usersSelectors.getLoadingStatus)\n    const usersRequestError = useSelector(usersSelectors.getUsersRequestError)\n    const filters = useSelector(usersSelectors.getUsersListFilters)\n\n    const pagesCount = Math.ceil(totalUsersCount / pageSize)\n\n    const searchTitle = getSearchTitleFromSetParameters (filters.term, filters.friend,\n    currentPage, pagesCount)\n\n    const dispatch = useDispatch()\n    const history = useHistory()\n\n    useEffect(() => { //componentDidMount\n        const queryString = history.location.search\n        const parsedQS: {page?: string, term?: string, friend?: string} = qs.parse(queryString, { ignoreQueryPrefix: true })\n \n        const queryPage = Number(parsedQS.page) || 1\n        const term = parsedQS.term ? parsedQS.term : ''\n        \n        let friend\n        switch(parsedQS.friend) {\n            case 'true':\n                friend = true\n                break\n            case 'false':\n                friend = false\n                break\n            default:\n                friend = null\n        }\n\n        dispatch( requestUsers(pageSize, queryPage, {term, friend}) ) \n        return () => { // componentWillUnmount\n            dispatch ( actions.setFilters({term: '', friend: null}) )\n        }\n        // eslint-disable-next-line\n    }, []) // todo: need to fix (when users page opened and then url search params changed, component already mounted - synchronization is not performed)\n\n    useEffect(() => { // componentDidUpdate\n        pushSearchParams(currentPage, filters.term, filters.friend)\n        // eslint-disable-next-line\n    }, [filters, currentPage])\n    \n\n    const pushSearchParams = (P: number, T: string, F: boolean | null) => {\n        const term = T ? `&term=${T}` : ''\n        let friend\n        switch(F) {\n            case true:\n            case false:\n                friend = `&friend=${F}`\n                break\n            default:\n                friend = ''\n        }\n        \n        history.push({\n            pathname: '/users', // todo: do without hardcoding\n            search: `page=${P}${term}${friend}`\n        })\n    }\n\n    const onPageSelected = (num: number) => {\n        dispatch( requestUsers(pageSize, num, filters) )\n    }\n\n    const onFiltersChanged = useCallback( (filters: UsersListFiltersType) => {\n        dispatch( requestUsers(pageSize, 1, filters) )\n    }, [dispatch, pageSize])\n\n    return (\n        <AppPage pageTitle={searchTitle}>\n            \n            <div className=\"users__wrapper\">\n                <UsersSearchForm \n                    onFiltersChanged={onFiltersChanged}\n                    currentPage={currentPage}\n                    pagesCount={pagesCount}\n                    searchTitle={searchTitle} />\n                <Pagination \n                    currentPage={currentPage}\n                    totalItemsCount={totalUsersCount}\n                    pageSize={pageSize}\n                    onPageSelected={onPageSelected} />\n                {isLoading ? <Spinner/> : <UsersList />}   \n                {usersRequestError && <RequestError errorMessage={usersRequestError} /> }\n            </div>\n\n        </AppPage> \n    )\n})\n\nexport default UsersPage","type GetSearchTitleType = (term: string, friendFilter: boolean | null, currentPage: number, pagesCount: number) => string\n//can add another filters (Function argument + filter value convert logic + title string new parametr)\nexport const getSearchTitleFromSetParameters: GetSearchTitleType = (term, friendFilter, currentPage, pagesCount) => {\n    const filter1 = term ? `\"${term}\" ` : ''\n\n    let filter2\n    switch(friendFilter) {\n        case true:\n            filter2 = \"Friends Only\"\n            break\n        case false:\n            filter2 = \"Not Friends\"\n            break\n        default:\n            filter2 = \"All Users\"\n    }\n\n    return `Search ${filter1}In ${filter2} (Page ${currentPage} of ${pagesCount})`\n}","import React from 'react'\nimport SendMessageForm from '../../../common/messagesComponents/sendMessageForm'\n\n\nconst ChatForm: React.FC<ChatFormPropsType> = React.memo( ({sendMessage, status}) => {\n\n    return (\n        <SendMessageForm\n            fieldName=\"chatMessage\"\n            btnDisabled={status !== 'ready'}\n            sendMessage={sendMessage} />\n    )\n})\n\nexport default ChatForm\n\n\n\ntype ChatFormPropsType = {\n    sendMessage: (message: string) => void\n    status: string\n}","import {AppStateType} from '../reduxStore'\n\nexport const getStatus = (state: AppStateType) => {\n    return state.chat.status\n}\n\nexport const getMessages = (state: AppStateType) => {\n    return state.chat.messages\n}","import React, { useCallback, useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { actions, sendMessage, startMessagesListening, stopMessagesListening } from '../../../../reducers/chatReducer'\nimport ChatForm from './chatForm'\nimport MessagesList from '../../../common/messagesComponents/messagesList'\nimport { withAnonUserRedirect } from '../../../HOCs/withRedirect'\nimport * as chatSelectors from '../../../../selectors/chat'\nimport AppPage from '../../../common/appPage/AppPage'\n\nimport './chatPage.scss'\n\n\nconst ChatPage: React.FC = React.memo( () => {\n    return (\n        <Chat />\n    )\n})\n\nconst Chat = React.memo( () => {\n\n    const status = useSelector(chatSelectors.getStatus)\n    const messages = useSelector(chatSelectors.getMessages)\n    const dispatch = useDispatch()\n\n    const sendChatMessage = useCallback( (message: string) => {\n        dispatch( sendMessage(message) )\n    }, [dispatch])\n    \n    useEffect(() => {\n        dispatch(startMessagesListening())\n        return () => {\n            dispatch(stopMessagesListening())\n            dispatch( actions.messagesCleaned() )\n        }\n    }, [dispatch])\n\n    return (\n        <AppPage pageTitle=\"Developers Chat\">\n\n            <div className=\"chat__page\">\n                {status === 'error' && <div className=\"error-status\">Connection error. Try refreshing the page</div>}\n                <div className=\"chat__page-header\">Developers Chat</div>\n                <MessagesList chatMessages={messages} isLoading={status === 'pending' ? true : false} />\n            \n                <ChatForm sendMessage={sendChatMessage} status={status} />\n            </div>\n\n        </AppPage>\n        \n    )\n})\n\n\nexport default withAnonUserRedirect(ChatPage)\n\n\n","import {AppStateType} from '../reduxStore'\n\nexport const getNewDialogsMessagesCount = (state: AppStateType) => {\n    return state.dialogsPage.newDialogsMessagesCount\n}\n\nexport const getViewedMessages = (state: AppStateType) => {\n    return state.dialogsPage.viewedMessages\n}\n\nexport const getSelectedDialogMessages = (state: AppStateType) => {\n    return state.dialogsPage.selectedDialogMessages\n}\n\nexport const getLoadedMessagesCount = (state: AppStateType) => {\n    return state.dialogsPage.selectedDialogMessages.length\n}\n\nexport const getSelectedDialogMessagesCount = (state: AppStateType) => {\n    return state.dialogsPage.selectedDialogMessagesCount\n}\n\nexport const getDialogInterlocuterProfile = (state: AppStateType) => {\n    return state.dialogsPage.dialogInterlocuterProfile\n}\n\nexport const getDialogsList = (state: AppStateType) => {\n    return state.dialogsPage.dialogsList\n}\n\nexport const getIsLoading = (state: AppStateType) => {\n    return state.dialogsPage.isLoading\n}\n\nexport const getNewMessagesCountRequestError = (state: AppStateType) => {\n    return state.dialogsPage.requestErrors.newMessagesCountRequestError\n}\n\nexport const getSendingMessageError = (state: AppStateType) => {\n    return state.dialogsPage.requestErrors.sendingMessageError\n}\n\nexport const getMessageStatusRequestError = (state: AppStateType) => {\n    return state.dialogsPage.requestErrors.messageStatusRequestError\n}\n\nexport const getRequestingMessagesError = (state: AppStateType) => {\n    return state.dialogsPage.requestErrors.requestingMessagesError\n}","export default __webpack_public_path__ + \"static/media/profile-icon.1e487f5e.svg\";","export default __webpack_public_path__ + \"static/media/users-icon.0861fcfd.svg\";","export default __webpack_public_path__ + \"static/media/dialogs-icon.870a5747.svg\";","export default __webpack_public_path__ + \"static/media/news-icon.63b638f3.svg\";","export default __webpack_public_path__ + \"static/media/music-icon.ec793a2a.svg\";","export default __webpack_public_path__ + \"static/media/chat-icon.a043f4e1.svg\";","export default __webpack_public_path__ + \"static/media/settings-icon.22166433.svg\";","export default __webpack_public_path__ + \"static/media/like.e0d25739.svg\";","export default __webpack_public_path__ + \"static/media/comments.21f4844f.svg\";","export default __webpack_public_path__ + \"static/media/share.6b3c2621.svg\";","export default __webpack_public_path__ + \"static/media/add-photo-icon.45c01ac0.svg\";","export default __webpack_public_path__ + \"static/media/go-back-arrow.813569ed.svg\";","export default __webpack_public_path__ + \"static/media/left-arrow.7e40e9c0.svg\";","export default __webpack_public_path__ + \"static/media/right-arrow.1cb0f8bb.svg\";","import React from 'react'\nimport { Helmet } from 'react-helmet-async'\nimport './AppPage.scss'\n\nconst AppPage: React.FC<AppPagePropsType> = React.memo( ({pageTitle, canonicalLink, children}) => {\n    return (\n        <>\n            <Helmet>\n                <title>{pageTitle}</title>\n                { canonicalLink && <link rel=\"canonical\" href={canonicalLink} /> }\n            </Helmet>\n\n            <div className=\"section\">\n                {children}\n            </div>\n        </>\n    )\n})\n\nexport default AppPage\n\n\ntype AppPagePropsType = {\n    pageTitle: string\n    canonicalLink?: string\n}","import { UserPhotosType } from \"../types/types\"\nimport { apiBase, ResultCodesEnum } from \"./API\"\n\nexport const dialogsAPI = {\n    getAllDialogsList() {\n        return apiBase.get<AllDialogsListItemType[]>('dialogs').then((res) => res.data)\n    },\n    getUserMessagesList(userId: number, pageNumber: number, pageSize: number) {\n        return apiBase.get<DialogMessagesListResponseType>(\n            `dialogs/${userId}/messages?page=${pageNumber}&count${pageSize}`).then((res) => res.data)\n    },\n    sendMessageToUser(userId: number, message: string) {\n        return apiBase.post<DialogsDefaultResponseType<SendDialogMessageResponseDataType, ResultCodesEnum>>(\n            `dialogs/${userId}/messages`, {body: message}).then((res) => res.data)\n    },\n    setDialogAtTheDialogsListTop(userId: number) { // start chatting, refresh your companion so that he was on top (AllDialogsList[0])\n        return apiBase.put<DialogsDefaultResponseType<{}, ResultCodesEnum>>(`dialogs/${userId}`)\n    },\n    getMessageViewedStatus(messageId: string) {\n        return apiBase.get<boolean>(`dialogs/messages/${messageId}/viewed`).then((res) => res.data)\n    },\n    markMessageAsSpam(messageId: string) {\n        return apiBase.post<DialogsDefaultResponseType<{}, ResultCodesEnum>>(`dialogs/messages/${messageId}/spam`)\n    },\n    deleteMessage(messageId: string) {\n        return apiBase.delete<DialogsDefaultResponseType<{}, ResultCodesEnum>>(`dialogs/messages/${messageId}`)\n    },\n    restoreMessage(messageId: string) { //from deleted and spam\n        return apiBase.put<DialogsDefaultResponseType<{}, ResultCodesEnum>>(`dialogs/messages/${messageId}/restore`)\n    },\n    getMessagesNewerThenDate(userId: number, date: string) {\n        return apiBase.get<AdvancedDialogMessageType[]>(`dialogs/${userId}/messages/new?newerThen=${date}`)\n    },\n    getNewMessagesTotalCount() {\n        return apiBase.get<number>(`dialogs/messages/new/count`).then((res) => res.data)\n    }\n\n}\n\n\n\ntype DialogsDefaultResponseType<D = {}, RC = ResultCodesEnum, FE = []> = {\n    data: D\n    resultCode: RC\n    fieldsErrors: FE\n    messages: Array<string>\n}\n\nexport type AllDialogsListItemType = {\n    hasNewMessages: boolean\n    id: number\n    lastDialogActivityDate: string // \"2021-09-04T11:10:28.433\"\n    lastUserActivityDate: string // \"2021-08-28T17:15:38.69\"\n    newMessagesCount: number\n    photos: UserPhotosType\n    userName: string\n}\n\ntype SendDialogMessageResponseDataType = {\n     message: AdvancedDialogMessageType\n}\n\nexport type AdvancedDialogMessageType = {\n    addedAt: string // \"2021-09-04T10:00:58.087\"\n    body: string // \"Hello my friend\"\n    deletedByRecipient: boolean\n    deletedBySender: boolean\n    distributionId: number | null\n    id: string // \"f1e38413-fa75-41e9-a7ed-4e2ce05d1718\"\n    isSpam: boolean\n    recipientId: number // 16320\n    recipientName: string // \"vanaf\"\n    senderId: number // 17964\n    senderName: string // \"insane4L\"\n    translatedBody: null | string\n    viewed: boolean\n}\n\n\n\n\ntype DialogMessagesListResponseType = {\n    error: null // | ??????\n    items: DialogMessageType[]\n    totalCount: number\n}\nexport type DialogMessageType = {\n    addedAt: string // \"2021-09-04T10:00:58.087\"\n    body: string // \"Hello my friend\"\n    id: string // \"f1e38413-fa75-41e9-a7ed-4e2ce05d1718\"\n    recipientId: number // 16320\n    senderId: number // 17964\n    senderName: string // \"insane4L\"\n    translatedBody: null | string\n    viewed: boolean\n}\n","import { BaseThunkType, InferActionsTypes } from \"../reduxStore\"\nimport { ResultCodesEnum } from \"../services/API\"\nimport { AllDialogsListItemType, dialogsAPI, DialogMessageType } from \"../services/dialogsAPI\"\nimport { usersAPI } from \"../services/usersAPI\"\nimport { ProfileType, RequestErrorHandlingType } from \"../types/types\"\n\n\nconst initialState = {\n    dialogsList: [] as AllDialogsListItemType[],\n    selectedDialogMessages: [] as DialogMessageType[],\n    selectedDialogMessagesCount: 0,\n    dialogInterlocuterProfile: null as null | ProfileType,\n    viewedMessages: [] as string[],\n    newDialogsMessagesCount: 0,\n    isLoading: false,\n    requestErrors: {\n        requestingMessagesError: null as null | string,\n        sendingMessageError: null as null | string,\n        messageStatusRequestError: null as null | string,\n        newMessagesCountRequestError: null as null | string\n    }\n}\ntype InitialStateType = typeof initialState\n\n\nconst dialogsReducer = (state = initialState, action: ActionsTypes): InitialStateType => {\n    switch(action.type) {\n        case 'sn/dialogs/DIALOGS_LIST_RECEIVED':\n            return {\n                ...state,\n                dialogsList: action.payload.dialogsList\n            };\n        case 'sn/dialogs/DIALOG_MESSAGES_RECEIVED':\n            return {\n                ...state,\n                selectedDialogMessages: [...action.payload.dialogMessages, ...state.selectedDialogMessages]\n            };\n        case 'sn/dialogs/DIALOG_MESSAGES_CLEANED':\n            return {\n                ...state,\n                selectedDialogMessages: [],\n                selectedDialogMessagesCount: 0\n            };\n        case 'sn/dialogs/SET_DIALOG_MESSAGES_COUNT':\n            return {\n                ...state,\n                selectedDialogMessagesCount: action.payload.dialogMessagesCount\n            };\n        case 'sn/dialogs/INTERLOCUTER_PROFILE_RECEIVED':\n            return {\n                ...state,\n                dialogInterlocuterProfile: action.payload.profile\n            };\n        case 'sn/dialogs/MESSAGE_SENT':\n            return {\n                ...state,\n                selectedDialogMessages: [...state.selectedDialogMessages, action.payload.message] \n            };\n        case 'sn/dialogs/ADD_MESSAGE_TO_VIEWED':\n            return {\n                ...state,\n                viewedMessages: [...state.viewedMessages,  action.payload.messageId] \n            };\n        case 'sn/dialogs/DEL_MESSAGE_FROM_VIEWED':\n            return {\n                ...state,\n                viewedMessages: state.viewedMessages.filter( id => id !== action.payload.messageId)\n            };\n        case 'sn/dialogs/NEW_MESSAGES_COUNT_RECEIVED':\n            return {\n                ...state,\n                newDialogsMessagesCount: action.payload.newMessagesCount\n            };\n        case 'sn/dialogs/SET_IS_LOADING':\n            return {\n                ...state,\n                isLoading: action.payload.status\n            };\n        // case 'sn/dialogs/SET_REQUESTING_MESSAGES_ERROR':\n        //     return {\n        //         ...state,\n        //         requestErrors: {...state.requestErrors, requestingMessagesError: action.payload.error}\n        //     };\n        // case 'sn/dialogs/SET_SENDING_MESSAGE_ERROR':\n        //     return {\n        //         ...state,\n        //         requestErrors: {...state.requestErrors, sendingMessageError: action.payload.error}\n        //     };\n        // case 'sn/dialogs/SET_MESSAGE_STATUS_REQUEST_ERROR':\n        //     return {\n        //         ...state,\n        //         requestErrors: {...state.requestErrors, messageStatusRequestError: action.payload.error}\n        //     };\n        // case 'sn/dialogs/SET_NEW_MESSAGES_COUNT_REQUEST_ERROR':\n        //     return {\n        //         ...state,\n        //         requestErrors: {...state.requestErrors, newMessagesCountRequestError: action.payload.error}\n        //     };\n        case 'sn/dialogs/SET_REQUEST_ERROR':\n            return {\n                ...state,\n                requestErrors: {...state.requestErrors, ...action.payload.error}\n            };\n        default:\n            return state;\n    }\n}\n\n\ntype ActionsTypes = InferActionsTypes<typeof actions>\nexport const actions = {\n    dialogsListReceived: (dialogsList: AllDialogsListItemType[]) => (\n        {type: 'sn/dialogs/DIALOGS_LIST_RECEIVED', payload: {dialogsList}} as const\n    ),\n    dialogMessagesReceived: (dialogMessages: DialogMessageType[]) => (\n        {type: 'sn/dialogs/DIALOG_MESSAGES_RECEIVED', payload: {dialogMessages}} as const\n    ),\n    dialogMessagesCleaned: () => (\n        {type: 'sn/dialogs/DIALOG_MESSAGES_CLEANED'} as const\n    ),\n    setDialogMessagesCount: (dialogMessagesCount: number) => (\n        {type: 'sn/dialogs/SET_DIALOG_MESSAGES_COUNT', payload: {dialogMessagesCount}} as const\n    ),\n    messageSent: (message: DialogMessageType) => (\n        {type: 'sn/dialogs/MESSAGE_SENT', payload: {message}} as const\n    ),\n    addMessageToViewed: (messageId: string) => (\n        {type: 'sn/dialogs/ADD_MESSAGE_TO_VIEWED', payload: {messageId} } as const\n    ),\n    delMessageFromViewed: (messageId: string) => (\n        {type: 'sn/dialogs/DEL_MESSAGE_FROM_VIEWED', payload: {messageId} } as const\n    ),\n    newMessagesCountReceived: (newMessagesCount: number) => (\n        {type: 'sn/dialogs/NEW_MESSAGES_COUNT_RECEIVED', payload: {newMessagesCount} } as const\n    ),\n    setIsLoading: (status: boolean) => (\n        {type: 'sn/dialogs/SET_IS_LOADING', payload: {status}} as const\n    ),\n    interlocuterProfileReceived: (profile: ProfileType | null) => (\n        {type: 'sn/dialogs/INTERLOCUTER_PROFILE_RECEIVED', payload: {profile}} as const\n    ),\n    // setRequestingMessagesError: (error: null | string) => (\n    //     {type: 'sn/dialogs/SET_REQUESTING_MESSAGES_ERROR', payload: {error}} as const\n    // ),\n    // setSendingMessageError: (error: null | string) => (\n    //     {type: 'sn/dialogs/SET_SENDING_MESSAGE_ERROR', payload: {error}} as const\n    // ),\n    // setMessageStatusRequestError: (error: null | string) => (\n    //     {type: 'sn/dialogs/SET_MESSAGE_STATUS_REQUEST_ERROR', payload: {error}} as const\n    // ),\n    // setNewMessagesCountRequestError: (error: null | string) => (\n    //     {type: 'sn/dialogs/SET_NEW_MESSAGES_COUNT_REQUEST_ERROR', payload: {error}} as const\n    // ),\n    setRequestError: (error: RequestErrorHandlingType) => (\n        {type: 'sn/dialogs/SET_REQUEST_ERROR', payload: {error}} as const\n    )\n}\n\n\nexport const requestAllDialogsList = (): BaseThunkType<ActionsTypes> => async (dispatch) => {\n    dispatch( actions.setIsLoading(true) )\n    const dialogs = await dialogsAPI.getAllDialogsList()\n    dispatch( actions.setIsLoading(false) )\n    dispatch( actions.dialogsListReceived(dialogs) )\n}\n\n\nexport const requestDialogMessages = (userId: number, pageNumber: number, pageSize: number): BaseThunkType<ActionsTypes> => async (dispatch) => {\n    dispatch( actions.setIsLoading(true) )\n    const res = await dialogsAPI.getUserMessagesList(userId, pageNumber, pageSize)\n    const profile = await usersAPI.getUserProfile(userId)\n\n    if (res.error === null) {\n        dispatch( actions.setRequestError({requestingMessagesError: null}) )\n        dispatch( actions.setIsLoading(false) )\n\n        dispatch( actions.dialogMessagesReceived(res.items) )\n        dispatch( actions.setDialogMessagesCount(res.totalCount) )\n        dialogsAPI.setDialogAtTheDialogsListTop(userId)\n        dispatch( requestNewMessagesCount() )\n        dispatch( actions.interlocuterProfileReceived(profile) )\n    } else {\n        dispatch( actions.setRequestError({requestingMessagesError: 'Failed to load messages. Please try refresh the page'}) )\n    }\n}\n\n\nexport const sendMessage = (userId: number, message: string): BaseThunkType<ActionsTypes> => async (dispatch) => {\n    // dispatch( actions.setIsLoading(true) )\n    const res = await dialogsAPI.sendMessageToUser(userId, message)\n    // dispatch( actions.setIsLoading(false) )\n    if (res.resultCode === ResultCodesEnum.Success) {\n        dispatch( actions.setRequestError({sendingMessageError: null}) )\n        const sentMessage = {\n            addedAt: res.data.message.addedAt,\n            body: res.data.message.body,\n            id: res.data.message.id,\n            recipientId: res.data.message.recipientId,\n            senderId: res.data.message.senderId,\n            senderName: res.data.message.senderName,\n            translatedBody: res.data.message.translatedBody,\n            viewed: res.data.message.viewed\n        }\n        dispatch( actions.messageSent(sentMessage) )\n    } else {\n        dispatch( actions.setRequestError({sendingMessageError: 'An error has occurred. The message was not sent. Please try refresh the page'}) )\n    }\n    \n}\n\n\n\n\nexport const requestMessageStatus = (messageId: string): BaseThunkType<ActionsTypes> => async (dispatch) => {\n    try {\n        const status = await dialogsAPI.getMessageViewedStatus(messageId)\n        dispatch( actions.setRequestError({messageStatusRequestError: null}) )\n\n        if (status === true) {\n            dispatch( actions.addMessageToViewed(messageId) )\n        }  \n    } catch {\n        dispatch( actions.setRequestError({messageStatusRequestError: 'An error has occurred. The message status cannot be shown. Please try to click again'}) )\n    }  \n}\n\n\nexport const requestNewMessagesCount = (): BaseThunkType<ActionsTypes> => async (dispatch) => {\n    try {\n        const newMessagesCount = await dialogsAPI.getNewMessagesTotalCount()\n        dispatch( actions.setRequestError({newMessagesCountRequestError: null}) )\n\n        dispatch( actions.newMessagesCountReceived(newMessagesCount) )\n    } catch {\n        dispatch( actions.setRequestError({newMessagesCountRequestError: '?'}) )\n    }  \n}\n\n\nexport default dialogsReducer\n\n\n\n\n// todo: how to type by object keys\n// type ErrorKeyTypes = keyof typeof initialState.requestErrors\n// type ErrorValueType = null | string\n// type ErrorType = Record<ErrorKeyTypes, ErrorValueType>\n// actions.setError({newMessagesCountRequestError: null} as any) // without any:\n// An argument of type \"{newMessagesCountRequestError: null;}\" cannot be assigned a parameter of type \"ErrorType\".\n// The type \"{newMessagesCountRequestError: null;}\" is missing the following properties from the type \"ErrorType\": requestingMessagesError, sendMessageError, messageStatusRequestErrorts (2345)","// import {createSelector} from 'reselect'\nimport {AppStateType} from '../reduxStore'\n\nexport const getUsers = (state: AppStateType) => {\n    return state.usersPage.users\n}\n\nexport const getTotalUsersCount = (state: AppStateType) => {\n    return state.usersPage.totalUsersCount\n}\n\nexport const getPageSize = (state: AppStateType) => {\n    return state.usersPage.pageSize\n}\n\nexport const getCurrentPage = (state: AppStateType) => {\n    return state.usersPage.currentPage\n}\n\nexport const getUsersListFilters = (state: AppStateType) => {\n    return state.usersPage.filters\n}\n\nexport const getLoadingStatus = (state: AppStateType) => {\n    return state.usersPage.isLoading\n}\n\nexport const getFollowingInProgress = (state: AppStateType) => {\n    return state.usersPage.followingInProgress\n}\n\nexport const getRandomFriends = (state: AppStateType) => {\n    return state.usersPage.randomFriends\n}\n\nexport const getTotalFriendsCount = (state: AppStateType) => {\n    return state.usersPage.totalFriendsCount\n}\n\nexport const getRandomFriendsRequestError = (state: AppStateType) => {\n    return state.usersPage.requestErrors.randomFriendsRequestError\n}\n\nexport const getChangingSubscriptionStatusError = (state: AppStateType) => {\n    return state.usersPage.requestErrors.changingSubscriptionStatusError\n}\n\nexport const getUsersRequestError = (state: AppStateType) => {\n    return state.usersPage.requestErrors.usersRequestError\n}","import { FormAction, stopSubmit } from 'redux-form'\nimport { BaseThunkType, InferActionsTypes } from '../reduxStore'\nimport {ResultCodesEnum} from '../services/API'\nimport { usersAPI } from '../services/usersAPI'\nimport {UserPhotosType, ProfileType, PostType} from '../types/types'\n\n\nconst initialState = {\n    messages: [\n        {id: 1, postDate: '09.10.2021 12:16', label: 'Hi, this is my 1 post', likesCount: 22, comments: 0},\n        {id: 2, postDate: '09.10.2021 12:20', label: '2 post', likesCount: 12, comments: 0},\n        {id: 3, postDate: '09.10.2021 12:22', label: 'ok this is 3 post', likesCount: 8, comments: 0}\n    ] as Array<PostType>,\n    selectedProfile: null as null | ProfileType,\n    profileStatus: \"\",\n    selectedProfileFollowedInfo: {\n        userId: null as null | number,\n        followedStatus: null as null | boolean\n    },\n    isLoading: false,\n    requestErrors: {\n        updateProfileStatusError: null as null | string\n    }\n}\ntype InitialStateType = typeof initialState\n\n\nconst profileReducer = (state = initialState, action: ActionsTypes): InitialStateType => {\n    switch(action.type) {\n        case 'sn/profile/ADD_NEW_POST':\n            let length = state.messages.length;\n            const id = ++length;\n            const newState = {\n                ...state,\n                messages: [...state.messages, {\n                    id,\n                    postDate: action.payload.date,\n                    label: action.payload.messageBody,\n                    likesCount: 0,\n                    comments: 0\n                    }]\n            };\n            return newState;\n        case 'sn/profile/DELETE_POST':\n            return {...state,  messages: state.messages.filter(item => item.id !== action.postId)}\n        case 'sn/profile/SET_PROFILE':\n            return {...state, selectedProfile: action.profile};\n        case 'sn/profile/SET_PROFILE_STATUS':\n            return {...state, profileStatus: action.message};\n        case 'sn/profile/SET_PROFILE_PHOTO_SUCCESS':\n            return {...state, selectedProfile: {...state.selectedProfile, photos: action.photos} as ProfileType }; // (temporarily \"as UserType\" because of TS error)\n        case 'sn/profile/SET_PROFILE_DATA_SUCCESS':\n            return {...state, selectedProfile: {...state.selectedProfile, ...action.data}}\n        case 'sn/profile/PROFILE_FOLLOWED_INFO_RECEIVED':\n            return {...state, selectedProfileFollowedInfo: action.payload}\n        case 'sn/profile/TOGGLE_PROFILE_FOLLOWED_INFO':\n            return {...state, selectedProfileFollowedInfo: {...state.selectedProfileFollowedInfo, followedStatus: !state.selectedProfileFollowedInfo.followedStatus}}\n        case 'sn/profile/SET_IS_LOADING':\n            return {...state, isLoading: action.isLoading}\n        case 'sn/profile/SET_UPDATE_PROFILE_STATUS_ERROR':\n            return {...state, requestErrors: {...state.requestErrors, updateProfileStatusError: action.payload.error}}\n        default:\n            return state;\n    }\n}\n\n\ntype ActionsTypes = InferActionsTypes<typeof actions>\nexport const actions = {\n    addNewPost: (date: string, messageBody: string) => (\n        {type: 'sn/profile/ADD_NEW_POST', payload: {date, messageBody} } as const\n    ),\n    profileReceived: (profile: ProfileType) => (\n        {type: 'sn/profile/SET_PROFILE', profile} as const\n    ),\n    setProfileStatus: (message: string) => (\n        {type: 'sn/profile/SET_PROFILE_STATUS', message} as const\n    ),\n    deletePost: (postId: number) => (\n        {type: 'sn/profile/DELETE_POST', postId} as const\n    ),\n    setProfilePhotoSuccess: (photos: UserPhotosType) => (\n        {type: 'sn/profile/SET_PROFILE_PHOTO_SUCCESS', photos} as const\n    ),\n    setProfileDataSuccess: (data: ProfileType) => (\n        {type: 'sn/profile/SET_PROFILE_DATA_SUCCESS', data} as const\n    ),\n    profileFollowedInfoReceived: (userId: number, followedStatus: boolean) => (\n            {type: 'sn/profile/PROFILE_FOLLOWED_INFO_RECEIVED', payload: {userId, followedStatus} } as const\n    ),\n    toggleProfileFollowedInfo: () => (\n        {type: 'sn/profile/TOGGLE_PROFILE_FOLLOWED_INFO'} as const\n    ),\n    setIsLoading: (isLoading: boolean) => (\n        {type: 'sn/profile/SET_IS_LOADING', isLoading} as const\n    ),\n    setUpdateProfileStatusError: (error: null | string) => (\n        {type: 'sn/profile/SET_UPDATE_PROFILE_STATUS_ERROR', payload: {error}} as const\n    )\n}\n\n\n\n\nexport const getUserProfile = (userId: number): BaseThunkType<ActionsTypes> => async (dispatch) => {\n    dispatch( actions.setIsLoading(true) )\n    const profile = await usersAPI.getUserProfile(userId)\n    dispatch( actions.profileReceived(profile) )\n    dispatch( actions.setIsLoading(false) )\n}\n\n\nexport const updateProfilePhoto = (photoFile: File): BaseThunkType<ActionsTypes> => async (dispatch) => {\n    const updatedPhotosData = await usersAPI.setProfilePhoto(photoFile);\n\n    if (updatedPhotosData.resultCode === ResultCodesEnum.Success) {\n        dispatch(actions.setProfilePhotoSuccess(updatedPhotosData.data.photos));\n    }\n}\n\n\nexport const getProfileStatus = (userId: number): BaseThunkType<ActionsTypes> => async (dispatch) => {\n    const profileStatus = await usersAPI.getProfileStatus(userId);\n    \n    if (profileStatus) {\n        dispatch(actions.setProfileStatus(profileStatus));\n    } else {\n        dispatch(actions.setProfileStatus(\"...\"));\n    }\n}\n\n\nexport const requestProfileFollowedInfo = (userId: number): BaseThunkType<ActionsTypes> => async (dispatch) => {\n    const isFollowed = await usersAPI.checkFollowStatus(userId)\n    dispatch( actions.profileFollowedInfoReceived(userId, isFollowed) )\n}\n\n\nexport const updateProfileStatus = (message: string): BaseThunkType<ActionsTypes> => async (dispatch) => {\n    const data = await usersAPI.setProfileStatus(message);\n    if (data.resultCode === ResultCodesEnum.Success) {\n        dispatch( actions.setUpdateProfileStatusError(null) )\n        dispatch(actions.setProfileStatus(message));\n    } else {\n        dispatch( actions.setUpdateProfileStatusError('An error has occurred. Please try to enter the status again.') )\n    }\n}\n\n\ntype WithAnotherActionsThunkType = BaseThunkType<ActionsTypes | FormAction>\nexport const updateProfileData = (formData: ProfileType): WithAnotherActionsThunkType => async (dispatch) => {\n    const data = await usersAPI.setProfileData(formData);\n    \n    if(data.resultCode === ResultCodesEnum.Success) {\n\n        dispatch(actions.setProfileDataSuccess(formData));\n    } else {\n        const errorMessage = data.messages[0];\n\n        dispatch(stopSubmit('profileData', {_error: errorMessage})); // action not from ActionsTypes\n        return Promise.reject(data.messages[0]);\n    }\n}\n\n\n\nexport default profileReducer","import {apiBase, ResponseType} from './API'\nimport {ProfileType, UserPhotosType, UserType} from '../types/types'\n\n\nexport const usersAPI = {\n    getUsers(pageSize: number, currentPage: number, term: string, friend: null | boolean) {\n        const isFriendFilter = term ? `&term=${term}` : ''\n        const byTermFilter = friend === true ? `&friend=${friend}` : friend === false ? `&friend=${false}` : ''\n        const queryParams = byTermFilter + isFriendFilter\n        return apiBase.get<GetUsersResponseType>(`users?count=${pageSize}&page=${currentPage}${queryParams}`).then(res => res.data)\n    },\n\n    setProfilePhoto(photoFile: any) {\n        const formData = new FormData();\n        formData.append(\"image\", photoFile)\n\n        return apiBase.put< ResponseType<SavePhotoResponseDataType> >('profile/photo', formData).then(res => res.data)\n    },\n\n    setProfileData(data: ProfileType) {\n        return apiBase.put<ResponseType>('profile', data).then(res => res.data)\n    },\n\n    getUserProfile(userId: number) {\n        return apiBase.get<ProfileType>(`profile/${userId}`).then(res => res.data)\n    },\n\n    getProfileStatus(userId: number) {\n        return apiBase.get<string>(`profile/status/${userId}`).then(res => res.data)\n    },\n\n    setProfileStatus(message: string) {\n        return apiBase.put<ResponseType>('profile/status', {status: message}).then(res => res.data)\n    },\n\n    checkFollowStatus(userId: number) {\n        return apiBase.get<boolean>(`follow/${userId}`).then(res => res.data)\n    },\n    followToUser(userId: number) {\n        return apiBase.post<ResponseType>(`follow/${userId}`).then(res => res.data)\n    },\n    unfollowFromUser(userId: number) {\n        return apiBase.delete<ResponseType>(`follow/${userId}`).then(res => res.data)\n    },\n}\n\n\n\ntype GetUsersResponseType = {\n    items: Array<UserType>\n    totalCount: number\n    error: null | string\n}\n\ntype SavePhotoResponseDataType = {\n    photos: UserPhotosType\n}","import React from 'react'\n\nimport './requestError.scss'\n\n\nconst RequestError: React.FC<RequestErrorPropsType> = React.memo( ({errorMessage, className}) => {\n    return (\n        <div className={`request-error__block ${className}`}>\n            <div className=\"request-error__message\">\n                {errorMessage}\n            </div>\n        </div>\n    )\n})\n\nexport default RequestError\n\n\n\ntype RequestErrorPropsType = {\n    errorMessage: string\n    className?: string\n}","import React from 'react'\n\nimport './spinner.scss'\n\nconst Spinner = () => {\n    return (\n        <div className=\"spinner__wrapper\">\n            <div className=\"spinner\"></div>\n        </div>\n    )\n}\n\n\nexport default Spinner","import Spinner from './spinner';\n\nexport default Spinner;","import { Dispatch } from 'redux'\nimport { BaseThunkType, InferActionsTypes } from '../reduxStore'\nimport {ResponseType, ResultCodesEnum} from '../services/API'\nimport { usersAPI } from '../services/usersAPI'\nimport { RequestErrorHandlingType, UserType } from '../types/types'\nimport {actions as profileActions} from './profileReducer'\n\n\nconst initialState = {\n    users: [] as Array<UserType>,\n    randomFriends: null as null | Array<UserType>,\n    totalUsersCount: 0,\n    totalFriendsCount: 0,\n    pageSize: 10,\n    currentPage: 1,\n    filters: {\n        term: '', \n        friend: null as null | boolean\n    },\n    followingInProgress: [] as Array<number>,\n    isLoading: false,\n    requestErrors: {\n        changingSubscriptionStatusError: null as null | string,\n        usersRequestError: null as null | string,\n        randomFriendsRequestError: null as null | string\n    }\n}\nexport type InitialStateType = typeof initialState\nexport type UsersListFiltersType = typeof initialState.filters\n\nconst usersReducer = (state = initialState, action: ActionsTypes): InitialStateType => {\n    switch(action.type) {\n        case 'sn/users/SET_USERS':\n            return {\n                ...state,\n                users: action.users\n            };\n        case 'sn/users/RANDOM_FRIENDS_RECEIVED':\n            return {\n                ...state,\n                randomFriends: action.payload.randomFriends\n            };\n        case 'sn/users/TOGGLE_FOLLOWED':\n            return {\n                ...state,\n                users: state.users.map( u => {\n                    if(u.id === action.userId) {\n                        u.followed = !u.followed\n                    };\n                    return u;\n                })\n            };\n        case 'sn/users/SET_PAGE_NUMBER':\n            return {...state, currentPage: action.num};\n        case 'sn/users/SET_TOTAL_USERS_COUNT':\n            return {...state, totalUsersCount: action.count};\n        case 'sn/users/SET_TOTAL_FRIENDS_COUNT':\n            return {...state, totalFriendsCount: action.count};\n        case 'sn/users/SET_FILTERS':\n            return {\n                ...state,\n                filters: {...state.filters, ...action.payload}\n            };\n        case 'sn/users/SET_IS_LOADING':\n            return {...state, isLoading: action.isLoading}\n        case 'sn/users/SET_FOLLOWING_IN_PROGRESS':\n            return {\n                ...state,\n                followingInProgress: action.isInProgress \n                    ? [...state.followingInProgress, action.userId]\n                    : state.followingInProgress.filter(id => id !== action.userId)\n            }\n        case 'sn/users/SET_REQUEST_ERROR':\n            return {\n                ...state,\n                requestErrors: {...state.requestErrors, ...action.payload.error}\n            };\n        default:\n            return state;\n    }\n}\n\n\ntype ActionsTypes = InferActionsTypes<typeof actions>\nexport const actions = {\n    setUsers: (users: Array<UserType>) => (\n        {type: 'sn/users/SET_USERS', users} as const\n    ),\n    randomFriendsReceived: (randomFriends: Array<UserType>) => (\n        {type: 'sn/users/RANDOM_FRIENDS_RECEIVED', payload: {randomFriends}} as const\n    ),\n    toggleFollowed: (userId: number) => (\n        {type: 'sn/users/TOGGLE_FOLLOWED', userId} as const\n    ),\n    setPageNumber: (num: number) => (\n        {type: 'sn/users/SET_PAGE_NUMBER', num} as const\n    ),\n    setTotalUsersCount: (count: number) => (\n        {type: 'sn/users/SET_TOTAL_USERS_COUNT', count} as const\n    ),\n    setTotalFriendsCount: (count: number) => (\n        {type: 'sn/users/SET_TOTAL_FRIENDS_COUNT', count} as const\n    ),\n    setFilters: (filters: UsersListFiltersType) => (\n        {type: 'sn/users/SET_FILTERS', payload: filters} as const\n    ),\n    setIsLoading: (isLoading: boolean) => (\n        {type: 'sn/users/SET_IS_LOADING', isLoading} as const\n    ),\n    setFollowingInProgress: (userId: number, \n        isInProgress: boolean) => (\n            {type: 'sn/users/SET_FOLLOWING_IN_PROGRESS', userId, isInProgress} as const\n    ),\n    setRequestError: (error: RequestErrorHandlingType) => (\n        {type: 'sn/users/SET_REQUEST_ERROR', payload: {error}} as const\n    )\n}\n\n\n\n\n\nconst followUnfollowFlow = async (dispatch: Dispatch<ActionsTypes | ProfileReducerActionToggleType>, \n                userId: number, apiMethod: (userId: number) => Promise<ResponseType<{}, ResultCodesEnum>>) => {\n\n    const data = await apiMethod(userId)\n\n    if(data.resultCode === ResultCodesEnum.Success) {\n        dispatch(actions.setRequestError({changingSubscriptionStatusError: null}))\n        dispatch(actions.toggleFollowed(userId))\n        dispatch(profileActions.toggleProfileFollowedInfo())\n        dispatch(actions.setFollowingInProgress(userId, false))\n    } else {\n        dispatch(actions.setRequestError({changingSubscriptionStatusError: 'Some error occured. Please try to follow again'}))\n    }\n}\n\nexport const followOrUnfollow = (userId: number): BaseThunkType<ActionsTypes> => async (dispatch) => {\n    dispatch(actions.setFollowingInProgress(userId, true)); // disable button while fetching\n\n    const isFollowed = await usersAPI.checkFollowStatus(userId)\n\n    if (!isFollowed) { // unfollowed ?\n        await followUnfollowFlow(dispatch, userId, usersAPI.followToUser) // follow\n    } else {\n        await followUnfollowFlow(dispatch, userId, usersAPI.unfollowFromUser) //unfollow\n        dispatch( requestRandomFriends(undefined, 1) )\n    }\n}\n\n\nexport const requestUsers = (pageSize: number, currentPage: number, {term = '', friend = null}: UsersListFiltersType): BaseThunkType<ActionsTypes> => async (dispatch) => {\n    \n    dispatch(actions.setIsLoading(true)) // activate spinner\n    try {\n        const data = await usersAPI.getUsers(pageSize, currentPage, term, friend)\n\n        dispatch(actions.setRequestError({usersRequestError: null}))\n        dispatch(actions.setFilters({term, friend}))\n        dispatch(actions.setPageNumber(currentPage))\n        dispatch(actions.setIsLoading(false))  // deactivate spinner after response\n    \n        dispatch(actions.setUsers(data.items)) // set users from response to state \n        dispatch(actions.setTotalUsersCount(data.totalCount)) // set total users count from response to state\n    } catch {\n        dispatch(actions.setIsLoading(false))\n        dispatch(actions.setRequestError({usersRequestError: 'Something goes wrong. Please try to refresh the page'}))\n    }\n}\n\nexport const requestRandomFriends = (pageSize = 9, pageNumber: number): BaseThunkType<ActionsTypes> => async (dispatch) => {\n    try {\n        const data = await usersAPI.getUsers(pageSize, pageNumber, '', true)\n        dispatch(actions.setRequestError({randomFriendsRequestError: null}))\n\n        if (data.totalCount > 0) {\n            dispatch( actions.randomFriendsReceived(data.items) )\n            dispatch( actions.setTotalFriendsCount(data.totalCount) )\n        } else {\n            dispatch( actions.randomFriendsReceived([]) )\n            dispatch( actions.setTotalFriendsCount(0) )\n        }\n    } \n    catch {\n        dispatch(actions.setRequestError({randomFriendsRequestError: 'An error has occurred, possibly a bad connection to the server. Auto-updating of the friends list is paused. To fix it please try reloading the page.'}))\n    }  \n}\n\n\n\nexport default usersReducer\n\n\n\ntype ProfileReducerActionToggleType = {\n    type: 'sn/profile/TOGGLE_PROFILE_FOLLOWED_INFO'\n}","export default __webpack_public_path__ + \"static/media/main-logo.09746948.svg\";","export default __webpack_public_path__ + \"static/media/defaultCover.3694bd45.jpeg\";","export default __webpack_public_path__ + \"static/media/defaultPhoto.45a0af68.png\";","export default __webpack_public_path__ + \"static/media/ads-img.1d74b859.jpg\";","import {apiBase, ResponseType, ResultCodesEnum, ResultCodeForCaptchaEnum, } from './API'\n\n\nexport const authAPI = {\n    getUserAuthData() {\n        return apiBase.get< ResponseType<AuthMeResponseDataType> >(`auth/me`).then(res => res.data)\n    },\n    login(email: string, password: string, rememberMe = false, captcha: null | string = null) {\n        return apiBase.post<LoginResponseType>('/auth/login', {\n            email, password, rememberMe, captcha}).then(res => res.data)\n    },\n    logout() {\n        return apiBase.delete<LogoutResponseType>('auth/login').then(res => res.data)\n    },\n    getCaptchaImg() {\n        return apiBase.get<GetCaptchaResponseType>('security/get-captcha-url').then(res => res.data)\n    }\n}\n\n\n\ntype AuthMeResponseDataType = {\n    id: number\n    email: string\n    login: string\n}\n\ntype LoginResponseType = ResponseType<{userId: number}, \n                                        ResultCodesEnum | ResultCodeForCaptchaEnum>\n\ntype LogoutResponseType = {\n    resultCode: ResultCodesEnum\n}\n\ntype GetCaptchaResponseType = {\n    url: string\n}","import {ResultCodeForCaptchaEnum, ResultCodesEnum} from '../services/API'\nimport { authAPI } from '../services/authAPI'\nimport {FormAction, stopSubmit} from 'redux-form'\nimport { BaseThunkType, InferActionsTypes } from '../reduxStore'\nimport { usersAPI } from '../services/usersAPI'\n\n\nconst initialState = {\n    email: null as string | null,\n    id: null as number | null,\n    login: null as string | null,\n    authUserPhoto: null as string | null,\n    isAuthorized: false,\n    captchaUrl: null as string | null\n}\ntype InitialStateType = typeof initialState;\n\n\nconst authReducer = (state = initialState, action: ActionsTypes): InitialStateType => {\n    switch(action.type) {\n        case 'sn/auth/SET_AUTH_DATA':\n            return {...state, ...action.payload};\n        case 'sn/auth/SET_AUTH_USER_PHOTO':\n            return {...state, authUserPhoto: action.payload.photo};\n        case 'sn/auth/SET_CAPTCHA_IMG':\n            return {...state, ...action.payload};\n        default:\n            return state;\n    }\n}\n\n\ntype ActionsTypes = InferActionsTypes<typeof actions>\nexport const actions = {\n    setAuthData: (email: string | null, id: number | null, login: string | null, isAuthorized: boolean) => (\n        { type: 'sn/auth/SET_AUTH_DATA', payload: {email, id, login, isAuthorized} } as const\n    ),\n    setAuthUserPhoto: (photo: string) => (\n        {type: 'sn/auth/SET_AUTH_USER_PHOTO', payload: {photo} } as const\n    ),\n    setCaptchaImg: (captchaUrl: string) => (\n        {type: 'sn/auth/SET_CAPTCHA_IMG', payload: {captchaUrl} } as const\n    )\n}\n\nexport const requestAuthUserPhoto = (userId: number): BaseThunkType<ActionsTypes> => async (dispatch) => {\n    const authProfile = await usersAPI.getUserProfile(userId)\n    const photo = authProfile.photos.small\n\n    if (photo) {\n        dispatch( actions.setAuthUserPhoto(photo) )\n    }\n}\n\nexport const requestUserAuthData = (): BaseThunkType<ActionsTypes> => async (dispatch) => {\n    const meData = await authAPI.getUserAuthData()\n    const {email, id, login} = meData.data\n\n    if(meData.resultCode === ResultCodesEnum.Success) {\n        dispatch(actions.setAuthData(email, id, login, true))\n        dispatch( requestAuthUserPhoto(id) )\n    }\n\n}\n\n\nexport const getCaptchaUrl = (): BaseThunkType<ActionsTypes> => async (dispatch) => {\n    const data = await authAPI.getCaptchaImg()\n    dispatch(actions.setCaptchaImg(data.url))\n}\n\n\ntype WithAnotherActionsThunkType = BaseThunkType<ActionsTypes | FormAction>\nexport const login = (email: string, password: string, rememberMe: boolean,\n                    captcha: string): WithAnotherActionsThunkType => async (dispatch) => {\n    const data = await authAPI.login(email, password, rememberMe, captcha)\n\n    if (data.resultCode === ResultCodesEnum.Success) {\n        dispatch(requestUserAuthData())\n    } else if (data.resultCode === ResultCodeForCaptchaEnum.CaptchaIsRequired) {\n        dispatch(getCaptchaUrl())\n    } else {\n        const errorMessage = data.messages.length > 0 ? data.messages[0] : \"Some error\"\n\n        dispatch(stopSubmit(\"login\", {_error: errorMessage} )) // action not from ActionsTypes\n    }\n}\n\n\nexport const logout = (): BaseThunkType<ActionsTypes> => async (dispatch) => {\n    const data = await authAPI.logout()\n        \n    if (data.resultCode === ResultCodesEnum.Success) {\n        dispatch(actions.setAuthData(null, null, null, false))\n    }\n}\n\nexport default authReducer","import { BaseThunkType, InferActionsTypes } from \"../reduxStore\"\nimport {requestUserAuthData} from \"./authReducer\"\n\n\nconst initialState = {\n    appInitialized: false,\n    unhandledError: false\n}\ntype InitialStateType = typeof initialState\n\n\nconst appReducer = (state = initialState, action: ActionsTypes): InitialStateType => {\n    switch(action.type) {\n        case 'sn/app/INITIALIZED_SUCCESSFULLY':\n            return {\n                ...state,\n                appInitialized: true\n            };\n        case 'sn/app/UNHANDLED_ERROR_CATCHED':\n            return {\n                ...state,\n                unhandledError: action.payload.error\n            };\n        default:\n            return state;\n    }\n}\n\n\ntype ActionsTypes = InferActionsTypes<typeof actions>\nexport const actions = {\n    initializedSuccessfully: () => (\n        {type: 'sn/app/INITIALIZED_SUCCESSFULLY'} as const\n    ),\n    unhandledErrorCatched: (error: boolean) => (\n        {type: 'sn/app/UNHANDLED_ERROR_CATCHED', payload: {error}} as const\n    )\n}\n\n\nexport const initializeApp = (): BaseThunkType<ActionsTypes> => async (dispatch) => {\n    await dispatch(requestUserAuthData());\n    dispatch(actions.initializedSuccessfully());\n}\n\n\nexport default appReducer","import React, { useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { requestNewMessagesCount } from '../../../reducers/dialogsReducer'\nimport * as authSelectors from '../../../selectors/auth'\nimport * as dialogsSelectors from '../../../selectors/dialogs'\n\nimport './newMessagesCounter.scss'\n\n\nconst NewMessagesCounter: React.FC<NewMessagesCounterPropsType> = React.memo( ({rerenderSecs}) => {\n    const newMessagesCountRequestError = useSelector(dialogsSelectors.getNewMessagesCountRequestError)\n    const newDialogsMessagesCount = useSelector(dialogsSelectors.getNewDialogsMessagesCount)\n    const isUserAuthorized = useSelector(authSelectors.getIsAuthorized)\n    const rerenderInterval = rerenderSecs * 1000\n    const dispatch = useDispatch()\n  \n    useEffect( () => {\n        if(isUserAuthorized) {\n            dispatch( requestNewMessagesCount() )\n        }\n    }, [])\n    \n    useEffect( () => {\n        let timerId: NodeJS.Timer\n        if(isUserAuthorized) {\n            timerId = setInterval(() => {\n                dispatch( requestNewMessagesCount() )     \n            }, rerenderInterval)\n        }\n        return () => {\n            clearInterval(timerId)\n        }\n    }, [isUserAuthorized])\n\n\n    //if new messages <= 0 and not request error: nothing is shown\n    if (newDialogsMessagesCount <= 0 && !newMessagesCountRequestError) return <span></span>\n    //if request error(no actual new messages count): display error \n    //else display new messages count\n    return (\n        <span \n            className=\"new-messages-counter navbar__new-messages-counter\"\n            title={`${newMessagesCountRequestError || newDialogsMessagesCount} new messages`}>\n                {newMessagesCountRequestError || newDialogsMessagesCount}\n        </span> \n    )\n})\n\nexport default NewMessagesCounter\n\n\n\ntype NewMessagesCounterPropsType = {\n    rerenderSecs: number\n}","import React, { useCallback } from 'react'\nimport {NavLink} from 'react-router-dom'\nimport NewMessagesCounter from './newMessagesCounter'\n\nimport * as icons from '../../../assets/icons'\nimport './navBar.scss'\n\n\nconst NavBar: React.FC<NavBarPropsType> = React.memo( ({closeMenu}) => {\n\n\tconst onMobileMenuClick = useCallback( (e: React.MouseEvent<HTMLElement>) => {\n\t\t// console.log((e.target as Element).classList);\n\t\tif (closeMenu) closeMenu()\n\t}, [closeMenu])\n\n    return (\n\t\t<nav className=\"navbar\">\n\t\t\t<ul className=\"navbar__list\" onClick={onMobileMenuClick}>\n\t\t\t\t<NavbarLink url=\"/profile\" iconLink={icons.profileIcon} label=\"Profile\" />\n\t\t\t\t<NavbarLink url=\"/users\" iconLink={icons.usersIcon} label=\"Users\" />\n\t\t\t\t<NavbarLink url=\"/dialogs\" iconLink={icons.dialogsIcon} label=\"Dialogs\" showNewMessagesCounter />\n\t\t\t\t<NavbarLink url=\"/chat\" iconLink={icons.chatIcon} label=\"Developers Chat\" />\n\t\t\t\t<NavbarLink url=\"/news\" iconLink={icons.newsIcon} label=\"News\" />\n\t\t\t\t<NavbarLink url=\"/music\" iconLink={icons.musicIcon} label=\"Music\" />\n\n\t\t\t\t<NavbarLink url=\"/settings\" iconLink={icons.settingsIcon} label=\"Settings\" />\n\t\t\t</ul>\n      \t</nav>\n    )\n})\n\n\nconst NavbarLink: React.FC<NavbarLinkPropsType> = React.memo( ({url, iconLink, label, showNewMessagesCounter}) => {\n  return (\n    <li className=\"navbar__list-item\">\n\t\t<NavLink className=\"navbar__link\" to={url} activeClassName=\"navbar__link_active\">\n\t\t\t<img className=\"navbar__link-icon\" src={iconLink} alt={`${label} icon`} />\n\t\t\t<span className=\"navbar__link-label\">{label}</span>\n      \t\t{showNewMessagesCounter && <NewMessagesCounter rerenderSecs={90} />}\n\t\t</NavLink>\n    </li>\n  )\n})\n\n\n\nexport default NavBar\n\n\n\ntype NavBarPropsType = {\n\tcloseMenu?: () => void\n}\n\ntype NavbarLinkPropsType = {\n  url: string\n  iconLink: string\n  label: string\n  showNewMessagesCounter?: boolean\n}","import NavBar from './navBar';\n\nexport default NavBar;","import React, { useCallback, useState } from 'react'\nimport NavBar from '../navBar'\n\nimport './mobileMenu.scss'\n\n\nconst MobileMenu: React.FC = React.memo( () => {\n    \n    const [isMenuVisible, setMenuVisibility] = useState(false)\n\n    const toggleMenuVisibility = useCallback( () => {\n        setMenuVisibility(isMenuVisible => !isMenuVisible)\n    }, [])\n\n    const hideMenu = useCallback(() => {\n        setMenuVisibility(false);\n    }, [])\n\n    const burgerBtnStyle = isMenuVisible ? 'mobile__menu-btn mobile__menu-btn_active' : 'mobile__menu-btn'\n\n    return (\n        <div className=\"mobile__menu\">\n            <div className={burgerBtnStyle} onClick={toggleMenuVisibility}>\n                <span></span>\n                <span></span>\n                <span></span>\n            </div>\n\n            {isMenuVisible \n                && <div className=\"mobile__menu-content\">\n                        <NavBar closeMenu={hideMenu} />\n                   </div>}\n        </div>\n    )\n})\n\nexport default MobileMenu","import {AppStateType} from '../reduxStore'\n\nexport const getUnhandledError = (state: AppStateType) => {\n    return state.app.unhandledError\n}","import Header from './header';\n\nexport default Header;","import React, { useEffect } from \"react\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport {Link, NavLink} from 'react-router-dom'\nimport {logout} from '../../../reducers/authReducer'\nimport UserAvatar from \"../../common/userAvatar/userAvatar\"\nimport { actions } from \"../../../reducers/appReducer\"\nimport RequestError from \"../../common/errors/requestError\"\nimport MobileMenu from \"./mobileMenu\"\nimport * as authSelectors from \"../../../selectors/auth\"\nimport * as appSelectors from \"../../../selectors/app\"\n\nimport {mainLogo} from \"../../../assets/images\"\nimport \"./header.scss\"\n\n\nconst Header: React.FC = React.memo( () => {\n\n\tconst isAuthorized = useSelector(authSelectors.getIsAuthorized)\n\tconst userId = useSelector(authSelectors.getAuthUserId)\n\tconst userLogin = useSelector(authSelectors.getLogin)\n\tconst userAvatar = useSelector(authSelectors.getAuthUserPhoto)\n\tconst unhandledError = useSelector(appSelectors.getUnhandledError)\n\tconst dispatch = useDispatch()\n\n\n\tuseEffect( () => {\n\t\tif (unhandledError) {\n\t\t\tsetTimeout( () => {\n\t\t\t\tdispatch(actions.unhandledErrorCatched(false))\n\t\t\t}, 10000)\n\t\t}\n\t}, [unhandledError, dispatch])\n\n\tconst onLogout = () => {\n\t\tdispatch( logout() )\n\t}\n\n\tconst loginLink = <NavLink className=\"header__login-btn\" to=\"/login\">Log in</NavLink>;\n\tconst userName = <div className=\"header__login-data\">\n\t\t\t\t\t\t<UserAvatar linkTo={`/profile/${userId}`} className=\"header__login-avatar\" userImage={userAvatar} />\n\t\t\t\t\t\t<span className=\"header__login-nickname\">{userLogin}</span>\n\t\t\t\t\t\t<button className=\"header__login-btn\" onClick={onLogout}>Log out</button>\n\t\t\t\t\t</div>\n\n\tconst loginPanel = isAuthorized ? userName : loginLink;\n\treturn (\n\t\t<header className=\"header\">\n\t\t\t<div className=\"container\">\n\t\t\t\t<div className=\"header__content\">\n\n\t\t\t\t\t<MobileMenu />\n\n\t\t\t\t\t<Link className=\"header__logo\" to=\"/chat\">\n\t\t\t\t\t\t<img className=\"header__logo-img\" src={mainLogo} alt=\"main-logo\" />\n\t\t\t\t\t\t<span className=\"header__logo-text\">Social Network</span>\n\t\t\t\t\t</Link>\n\t\t\t\t\t\n\t\t\t\t\t<div className=\"header__login-panel\">\n\t\t\t\t\t\t{loginPanel}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{unhandledError && <RequestError \n\t\t\t\t\t\t\t\t\t\tclassName=\"app-unhandled-error\"\n\t\t\t\t\t\t\t\t\t\terrorMessage=\"Something goes wrong, server error. Please try refresh the page\" />}\n\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</header>\n\t)\n})\n\nexport default Header\n","import React, { useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport { requestRandomFriends } from '../../../reducers/usersReducer'\nimport { getRandomIntegerNum } from '../../../utils/getValueFuncs'\nimport RequestError from '../../common/errors/requestError'\nimport Spinner from '../../common/spinner'\nimport UserAvatar from '../../common/userAvatar/userAvatar'\nimport UserName from '../../common/userName/userName'\nimport * as selectors from '../../../selectors/users'\n\nimport './friendsBlock.scss'\n\nconst FriendsBlock: React.FC<FriendsBlockPropsType> = React.memo( ({friendsPerPage, intervalSeconds}) => {\n\n    const randomFriends = useSelector(selectors.getRandomFriends)\n    const randomFriendsRequestError = useSelector(selectors.getRandomFriendsRequestError)\n    const totalFriendsCount = useSelector(selectors.getTotalFriendsCount)\n    const dispatch = useDispatch()\n\n    const firstPage = 1\n    const lastPage = Math.ceil(totalFriendsCount / friendsPerPage)\n    const timerInterval = intervalSeconds * 1000\n\n    useEffect( () => {\n        dispatch( requestRandomFriends(friendsPerPage, firstPage) )\n        //eslint-disable-next-line\n    }, [])\n\n    useEffect( () => {\n        let timerId: NodeJS.Timeout\n        if (totalFriendsCount > friendsPerPage) {\n            const randomPageNumber = getRandomIntegerNum(firstPage, lastPage)\n            timerId = setTimeout(() => {\n                console.log('tik tik');\n                dispatch( requestRandomFriends(friendsPerPage, randomPageNumber) )\n            }, timerInterval)\n        } \n        return () => {\n            clearTimeout(timerId)\n        }\n        //eslint-disable-next-line\n    }, [randomFriends, totalFriendsCount])\n\n    \n\n    const randomFriendsList = randomFriends?.map( (f) => (\n        <Friend \n            key={f.id}\n            friendImage={f.photos.small} \n            friendName={f.name} \n            friendId={f.id} />)\n    )\n\n    const friendsBlockContent = randomFriends?.length === 0\n        ? <Link to=\"/users\">Find friends on the <b>Users Page</b></Link>\n        : <div className=\"friends__block\">{randomFriendsList}</div>\n\n    return (\n        <>\n            {randomFriends && !randomFriendsRequestError && friendsBlockContent}\n            {!randomFriends && !randomFriendsRequestError && <Spinner/> }\n            {randomFriendsRequestError && <RequestError errorMessage={randomFriendsRequestError} />}\n        </>\n    )\n})\n\nconst Friend: React.FC<FriendPropsType> = React.memo( ({friendImage, friendName, friendId}) => {\n    return (\n        <div className=\"friends__block-item\">\n            <UserAvatar className=\"friend__image\" userImage={friendImage} linkTo={`/profile/${friendId}`} />\n            <UserName className=\"friend__name\" userName={friendName} linkTo={`/profile/${friendId}`} />\n        </div>\n    )\n})\n\nexport default FriendsBlock\n\n\n\ntype FriendsBlockPropsType = {\n    friendsPerPage: number\n    intervalSeconds: number\n}\ntype FriendPropsType = {\n    friendImage: string | null\n    friendName: string\n    friendId: number\n}","\nexport function getRandomIntegerNum(min: number, max: number) {\n    return Math.floor(Math.random() * (max - min + 1)) + min\n}\n\nexport function getCurrentDate() {\n    const newDate = new Date()\n    const day = newDate.getDate()\n    const month = newDate.getMonth() +1\n    const year = newDate.getFullYear()\n    const hours = newDate.getHours() % 24\n    const minutes = newDate.getMinutes() % 60\n\n    return `${month}.${day}.${year} ${hours}:${minutes}`\n}","import FriendsBlock from './friendsBlock';\n\nexport default FriendsBlock;","import AdsBlock from './adsBlock';\n\nexport default AdsBlock;","import React from 'react';\n\nimport {adsImg} from '../../../assets/images';\nimport './adsBlock.scss'\n\nconst AdsBlock = React.memo( () => {\n    return (\n        <a href=\"https://karpeyev.com\" target=\"_blank\" rel=\"noreferrer\" className=\"ads__content\">\n            <div className=\"ads__content-img\">\n                <img src={adsImg} alt=\"ads_image\" />\n            </div>\n            <div className=\"ads__content-link\">karpeyev.com</div>\n            <div className=\"ads__content-title\">Создадим сайт любой сложности под ваши задачи</div>\n        </a>\n    );\n})\n\nexport default AdsBlock;","import SideBarBlock from './sideBarBlock'\n\nexport default SideBarBlock","import React from 'react'\n\nimport './sideBarBlock.scss'\n\n\nconst SideBarBlock: React.FC<PropsType> = React.memo( ({children, blockTitle}) => {\n    return (\n        <div className=\"sidebar__block\">\n            <div className=\"sidebar__block-title\">{blockTitle}</div>\n            <div className=\"sidebar__block-content\">\n                {children}\n            </div>\n        </div>\n    )\n})\n\nexport default SideBarBlock\n\n\n\ntype PropsType = {\n    blockTitle: string | React.RefAttributes<HTMLAnchorElement>\n}\n\n","import React from 'react'\nimport NavBar from '../navBar'\nimport FriendsBlock from '../friendsBlock'\nimport AdsBlock from '../adsBlock'\nimport {connect} from 'react-redux'\nimport { AppStateType } from '../../../reduxStore'\nimport SideBarBlock from './sideBarBlock/'\nimport { Link } from 'react-router-dom'\nimport { useMediaQuery } from 'react-responsive'\n\nimport './sideBar.scss'\n\n\nconst SideBar: React.FC<PropsType> = React.memo( (props) => {\n\n    const isSmallerThanLgBreakPoint = useMediaQuery({ query: `(max-width: 992px)`})\n\n    if (isSmallerThanLgBreakPoint) return <span className=\"hidden-stub\"></span>\n    return (\n        <aside className=\"sidebar\">\n            <NavBar />\n\n            {props.isUserAuthorized && \n                <SideBarBlock blockTitle={<Link to=\"/users?page=1&friend=true\">Friends</Link>}>\n                    <FriendsBlock friendsPerPage={9} intervalSeconds={300} />\n                </SideBarBlock>\n            }\n            \n            <SideBarBlock blockTitle=\"Ads\">\n                <AdsBlock />\n            </SideBarBlock>\n        </aside>\n    );\n})\n\nconst mapStateToProps = (state: AppStateType) => ({\n    isUserAuthorized: state.auth.isAuthorized\n})\n\nexport default connect(mapStateToProps)(SideBar)\n\n\n\ntype PropsType = {\n    isUserAuthorized: boolean\n}","import SideBar from './sideBar';\n\nexport default SideBar;","export type FieldValidatorType = (value: string) => undefined | string\n\n\nexport const required: FieldValidatorType = (value) => {\n    if(!value) return \"Field required\";\n\n    return undefined\n}\n\nexport const maxLengthCreator = (maxLength: number): FieldValidatorType => (value) => {\n    if (value && value.length > maxLength) return `Max ${maxLength} symbols`;\n    \n    return undefined;\n}","import React from 'react'\nimport { Field, WrappedFieldInputProps, WrappedFieldMetaProps, WrappedFieldProps } from 'redux-form'\nimport { FieldValidatorType } from '../../../utils/validation/validators'\n\nimport './formsControls.scss'\n\n\nconst CustomField = (Component: any): React.FC<CustomFieldProps> => ({input, meta, ...props}) => { // Component: HTMLElement\n    const errorStatus = meta.error;\n    const hasError = errorStatus && meta.touched;\n\n    const errorClassName = hasError ? \"error\" : \"\";\n    const fieldClassName = props.className || \"\"; // if the element already has a className\n\n    return(\n        <>\n            <Component {...input} {...props} className={`${fieldClassName} ${errorClassName}`} />\n\n            { hasError && <span className=\"error-status\">{errorStatus}</span> }\n        </>\n    )\n}\n\nexport const Textarea = CustomField('textarea');\nexport const Input = CustomField('input')\n\n \nexport function createField<FormKeysType extends string>(name: FormKeysType, component: React.FC<WrappedFieldProps> | string,\n                            validators: Array<FieldValidatorType>, placeholder: string | undefined,\n                            props = {}) {\n    return <Field name={name}\n           component={component}\n           validate={validators}\n           placeholder={placeholder}\n           {...props}\n        />\n}\n\n\n\nexport type CustomFieldProps = {\n    input: WrappedFieldInputProps\n    meta: WrappedFieldMetaProps\n    className?: string\n}","import React from 'react'\nimport {reduxForm, InjectedFormProps} from 'redux-form'\nimport {connect} from 'react-redux'\nimport {login} from '../../../../reducers/authReducer'\nimport {required, maxLengthCreator} from '../../../../utils/validation/validators'\nimport {createField, Input} from '../../../common/formsControls/formsControls'\nimport {withSuccesAuthRedirect} from '../../../HOCs/withRedirect'\nimport {compose} from 'redux'\nimport { AppStateType } from '../../../../reduxStore'\nimport AppPage from '../../../common/appPage/AppPage'\n\nimport './loginPage.scss'\n\n\nconst maxLength25 = maxLengthCreator(25)\n\nlet LoginForm: React.FC<InjectedFormProps<LoginFormValuesType, FormOwnPropsType> & FormOwnPropsType> = React.memo( (props) => {\n    return (\n        <form className=\"login__form\" onSubmit={props.handleSubmit}>\n            <div>\n                {createField<LoginFormValuesTypeKeys>(\"email\", Input, [required, maxLength25], \"enter user name\", {className: \"login__input-email\"})}\n                {/* <Field validate={[required, maxLength25]} name=\"userEmail\" component={Input} placeholder=\"enter user name\" /> */}\n            </div>\n            <div>\n                {createField<LoginFormValuesTypeKeys>(\"password\", Input, [required, maxLength25], \"enter user password\", {type: \"password\", className: \"login__input-password\"})}\n                {/* <Field validate={[required, maxLength25]} name=\"userPass\" component={Input} type=\"password\" placeholder=\"enter user password\" /> */}\n            </div>\n            <div>\n                {createField<LoginFormValuesTypeKeys>(\"rememberMe\", \"input\", [], undefined, {type: \"checkbox\", id: \"login__checkbox\"})}\n                {/* <Field name=\"rememberMe\" component=\"input\" type=\"checkbox\" /> remember me */}\n                <label className=\"login__input-checkbox\" htmlFor=\"login__checkbox\">Remember me</label>\n            </div>\n            {\n                props.captchaUrl && \n                <div>\n                    {createField<LoginFormValuesTypeKeys>(\"captcha\", Input, [required], \"enter symbols from image\", {className: \"login__input-captcha\"})}\n                    {/* <Field name=\"captcha\" component={Input} validate={[required]} placeholder=\"enter symbols from image\" /> */}\n                    <img className=\"login__input-captcha-img\" src={props.captchaUrl} alt=\"captcha\" />\n                </div>\n            }\n            {\n                props.error && <div className=\"submit-error\">{props.error}</div>\n            }\n            \n            <button className=\"login__form-btn\">Log in</button>\n            \n        </form>\n    )\n})\n\n\nconst LoginReduxForm = reduxForm<LoginFormValuesType, FormOwnPropsType>({form: 'login'})(LoginForm);\n\n\nconst LoginPage: React.FC<MapStatePropsType & MapDispatchPropsType> = React.memo( (props) => {\n    const onSubmit = (formData: LoginFormValuesType) => {\n        props.login(formData.email, formData.password, formData.rememberMe, formData.captcha);\n    }\n\n    return (\n        <AppPage pageTitle=\"Login\">\n\n            <div className=\"login-page__wrapper\">\n                <h2 className=\"login-page__title\">Login</h2>\n                <LoginReduxForm onSubmit={onSubmit} captchaUrl={props.captchaUrl} />\n            </div>\n\n        </AppPage>\n    )\n})\n\nconst mapStateToProps = (state: AppStateType): MapStatePropsType  => {\n    return {\n        captchaUrl: state.auth.captchaUrl\n    }\n}\n\nexport default compose<React.ComponentType>(withSuccesAuthRedirect,\n                       connect(mapStateToProps, {login})\n                       )\n                       (LoginPage);\n\n\n\n\ntype FormOwnPropsType = {\n    captchaUrl: string | null\n}\n\ntype LoginFormValuesType = {\n    email: string\n    password: string\n    rememberMe: boolean\n    captcha: string\n}\n\ntype LoginFormValuesTypeKeys = Extract<keyof LoginFormValuesType, string>\n\ntype MapStatePropsType = {\n    captchaUrl: string | null\n}\n\ntype MapDispatchPropsType = {\n    login: (email: string, password: string, rememberMe: boolean, captcha: string) => void\n}","import LoginPage from './loginPage';\n\nexport default LoginPage;","import {AppStateType} from '../reduxStore'\n\nexport const getSelectedProfile = (state: AppStateType) => {\n    return state.profilePage.selectedProfile\n}\n\nexport const getSelectedProfileFollowedInfo = (state: AppStateType) => {\n    return state.profilePage.selectedProfileFollowedInfo\n}\n\nexport const getProfileStatus = (state: AppStateType) => {\n    return state.profilePage.profileStatus\n}\n\nexport const getUpdateProfileStatusError = (state: AppStateType) => {\n    return state.profilePage.requestErrors.updateProfileStatusError\n}\n","import React from 'react'\nimport { PostType } from '../../../../../types/types'\nimport { useSelector } from 'react-redux'\nimport Moment from 'react-moment'\nimport UserAvatar from '../../../../common/userAvatar/userAvatar'\nimport UserName from '../../../../common/userName/userName'\nimport * as profileSelectors from '../../../../../selectors/profile'\n\nimport * as icons from '../../../../../assets/icons'\n\n\nconst Post: React.FC<PropsType> = React.memo( ({item}) => {\n\n    const profile = useSelector(profileSelectors.getSelectedProfile)\n\n    return (\n        <div key={item.id} className=\"posts__item\">\n            <div className=\"posts__item_header\">\n                <UserAvatar className=\"post__author-image\" userImage={profile?.photos.small} linkTo={`/profile/${profile?.userId}`} />\n                <div className=\"post__info-col\">\n                    <UserName className=\"post__author-name\" userName={profile?.fullName} linkTo={`/profile/${profile?.userId}`} />\n                    {/* must be a link /postLink  (when server can save posts)*/}\n                    <div className=\"post__date\"><Moment format=\"DD MMM YYYY hh:mm\" date={item.postDate} /> </div>\n                </div>\n            </div>\n\n            <div className=\"posts__item_content\">\n                {item.label}\n            </div>\n\n            <div className=\"posts__item_footer\">\n                <div className=\"post__action\">\n                    <img className=\"post__action_icon like__action\" src={icons.likeIcon} alt=\"like_icon\" />\n                    <div className=\"post__action_counter like__counter\">{item.likesCount}</div>\n                </div>\n                <div className=\"post__action\">\n                    <img className=\"post__action_icon comments__action\" src={icons.commentsIcon} alt=\"comments_icon\" />\n                    <div className=\"post__action_counter coments__counter\">{item.comments}</div>\n                </div>\n                <div className=\"post__action\">\n                    <img className=\"post__action_icon share__action\" src={icons.shareIcon} alt=\"share_icon\" />\n                </div>\n            </div>\n        </div>\n    )\n})\n\nexport default Post\n\n\n\ntype PropsType = {item: PostType}","import React from 'react'\nimport { useDispatch } from 'react-redux'\nimport {InjectedFormProps, reduxForm, reset} from 'redux-form'\nimport { actions } from '../../../../../../reducers/profileReducer'\nimport { getCurrentDate } from '../../../../../../utils/getValueFuncs'\nimport {required} from '../../../../../../utils/validation/validators'\nimport {createField, Textarea} from '../../../../../common/formsControls/formsControls'\n\nimport './postAddForm.scss'\n\n\nlet ProfilePostsForm: React.FC< InjectedFormProps<PostFormValuesType, FormOwnPropsType> & FormOwnPropsType > = (props) => {\n    return (\n        <form onSubmit={props.handleSubmit} className=\"add-post__form\">\n            {createField<PostFormValuesTypeKeys>(\"postBody\", Textarea, [required],\n                                                \"Type new post message here..\", {className: \"add-post__textarea\",\n                                                maxLength: \"1500\"})}\n            <button className=\"add-post__btn\">Post</button>\n        </form>\n    )\n}\n\n\nconst ProfilePostsReduxForm = reduxForm<PostFormValuesType, FormOwnPropsType>({form: \"postsForm\"})(ProfilePostsForm);\n\n\nconst PostAddForm: React.FC = () => {\n\n    const dispatch = useDispatch()\n\n    const onFormSubmit = (formData: PostFormValuesType) => {\n        const date = getCurrentDate()\n        const postMessage = `${formData.postBody} SECTION is HARDCODED due to API restrictions`\n        dispatch( actions.addNewPost(date, postMessage) )\n        dispatch( reset('postsForm') )\n    }\n\n    return (\n        <div className=\"add-post__block\">\n            <div className=\"add-post__title\">Add new post</div>\n            <ProfilePostsReduxForm onSubmit={onFormSubmit} />\n        </div>\n    )\n}\n\n\nexport default PostAddForm\n\n\n\n\ntype PostFormValuesType = {\n    postBody: string\n}\ntype PostFormValuesTypeKeys = Extract<keyof PostFormValuesType, string>\n\ntype FormOwnPropsType = {}","import PostAddForm from './postAddForm';\n\nexport default PostAddForm;","import PostsTimline from './postsTimeline';\n\nexport default PostsTimline;","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { AppStateType } from '../../../../../reduxStore'\nimport { PostType } from '../../../../../types/types'\nimport Post from './post'\nimport PostAddForm from './postAddForm'\n\nimport './postsTimeline.scss'\n\n\nconst PostsTimline: React.FC<PropsType> = React.memo( ({isOwner}) => {\n    const messages = useSelector<AppStateType, PostType[]>( (state) => state.profilePage.messages )\n    return (\n        <>\n            {isOwner && <PostAddForm />}\n            <div className=\"posts__timeline\">\n                {\n                    [...messages].reverse().map(el => {\n                        return <Post key={el.id} item={el} />\n                    })\n                }\n            </div>\n        </>\n    )\n})\n\nexport default PostsTimline\n\n\n\ntype PropsType = {\n    isOwner: boolean\n}","import { calcBrowserScrollWidth } from \"./calcBrowserScrollWidth\";\n\n// body without scroll: body margin stub, header padding stub\nexport const toggleBodyScroll = (mode: BodyScrollModeType) => {\n    const browserScrollWidth = calcBrowserScrollWidth();\n\n    const bodyOverflow = mode === 'show' ? 'unset' : 'hidden';\n    const stubWidth = mode === 'show' ? '0' : `${browserScrollWidth}px`;\n\n    document.body.style.overflow = bodyOverflow;\n    document.body.style.marginRight = stubWidth;\n    document.querySelector<HTMLElement>('header.header')!.style.paddingRight = stubWidth;\n}\n\ntype BodyScrollModeType = 'show' | 'hide'","export const calcBrowserScrollWidth = () => {\n    const div = document.createElement('div');\n\n    div.style.width = '50px';\n    div.style.height = '50px';\n    div.style.overflowY = 'scroll'; // for add browser scroll standard\n    div.style.visibility = 'hidden';\n\n    document.body.appendChild(div);\n    const scrollWidth = div.offsetWidth - div.clientWidth; // size with scroll - size without scroll\n    div.remove();\n\n    return scrollWidth;\n}","import React, { useEffect } from 'react'\nimport { toggleBodyScroll } from '../../../utils/toggleBodyScroll'\n\nimport './fullSizeImage.scss'\n\n\nconst FullSizeImage: React.FC<FullSizeImagePropsType> = React.memo( ({source, closeHandler}) => {\n\n    useEffect(() => {\n        toggleBodyScroll('hide');\n        return () => {\n            toggleBodyScroll('show');\n        }\n    },[])\n\n    const closeOnOverlayClick = (e: React.MouseEvent<HTMLDivElement>) => {\n        if ( !(e.target as HTMLImageElement)?.classList?.contains('fsi__picture') ) {\n            closeHandler();\n        }\n    }\n    \n    return (\n        <div className=\"fsi\" onClick={closeOnOverlayClick}>\n            <div className=\"fsi__wrapper\">\n                <img className=\"fsi__picture\" src={source} alt=\"full_size_image\" />\n                <span className=\"fsi_close\" onClick={closeHandler}>&times;</span>\n            </div>\n        </div>\n    )\n})\n\nexport default FullSizeImage\n\n\n\ntype FullSizeImagePropsType = {\n    source: string\n    closeHandler: () => void\n}","import React, { ChangeEvent, useState } from 'react'\nimport { UserPhotosType } from '../../../../../types/types'\nimport { useDispatch } from 'react-redux'\nimport { updateProfilePhoto } from '../../../../../reducers/profileReducer'\nimport FullSizeImage from '../../../../common/imagesPresentation/fullSizeImage'\n\nimport {defaultCover, defaultPhoto} from '../../../../../assets/images'\nimport * as icons from '../../../../../assets/icons'\n\n\nconst ProfileImages: React.FC<PropsType> = React.memo( ({isOwner, userCover, userPhoto}) => {\n\n    const [displayFSImage, setFSImageDisplay] = useState(false)\n    const dispatch = useDispatch()\n\n    const zoomInPhoto = () => {\n        if (userPhoto.large) {\n            setFSImageDisplay(true)\n        }\n    }\n\n    const onNewPhotoSelected = (e: ChangeEvent<HTMLInputElement>) => {\n        if(e.target.files?.length) {\n            dispatch( updateProfilePhoto(e.target.files[0]) )\n        }\n    }\n\n    return (\n        <div className=\"profile__info-images\">\n            <img className=\"profile__info-cover\" src={userCover || defaultCover} alt=\"\" />\n            <div className=\"avatar__wrapper\">\n                <div className=\"profile__info-avatar\" >\n                    <img \n                        onClick={zoomInPhoto}\n                        className=\"profile__info-photo\"\n                        src={userPhoto.small || defaultPhoto}\n                        alt=\"user_photo\" />\n                    {displayFSImage && userPhoto.large \n                        && <FullSizeImage source={userPhoto.large} closeHandler={() => setFSImageDisplay(false)}/>}\n                </div>\n                {isOwner \n                    && <div className=\"change-photo\">\n                            <input id=\"change-photo_input\" onChange={onNewPhotoSelected} type=\"file\" />\n                            <label className=\"change-photo_label\" htmlFor=\"change-photo_input\">\n                                <img className=\"change-photo_icon\" src={icons.addNewImage} alt=\"new_photo\" />\n                            </label>\n                        </div>\n                }\n            </div>  \n        </div>\n    )\n})\n\nexport default ProfileImages\n\n\n\ntype PropsType = {\n    isOwner: boolean\n    userCover: string | null\n    userPhoto: UserPhotosType\n}\n","import React, {useState, useEffect, ChangeEvent} from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { actions, updateProfileStatus } from '../../../../../reducers/profileReducer'\nimport RequestError from '../../../../common/errors/requestError'\nimport * as profileSelectors from '../../../../../selectors/profile'\n\n\nconst ProfileStatus: React.FC<PropsType> = React.memo( ({isOwner}) => {\n\n    const updateProfileStatusError = useSelector(profileSelectors.getUpdateProfileStatusError)\n    const profileStatusMessage = useSelector(profileSelectors.getProfileStatus)\n    const [editMode, setEditMode] = useState(false)\n    const [statusMessage, setStatus] = useState(profileStatusMessage)\n    const dispatch = useDispatch()\n    \n    useEffect( () => {\n        setStatus(profileStatusMessage)\n    }, [profileStatusMessage])\n    \n    useEffect( () => {\n        return () => {\n            dispatch( actions.setUpdateProfileStatusError(null) ) //error cleanup\n        }\n    }, [])\n\n    const onStatusUpdate = (e: ChangeEvent<HTMLInputElement>) => {\n        setStatus(e.currentTarget.value)\n    }\n\n    const activateEditMode = () => {\n        setEditMode(true);\n    }\n\n    const deactiveteEditMode = () => {\n        setEditMode(false);\n        dispatch( updateProfileStatus(statusMessage) )\n    }\n    \n    const statusText = <div className=\"profile__status-text\"\n                            onDoubleClick={isOwner ? activateEditMode : undefined}\n                            title={isOwner ? \"Double click to edit\" : undefined} >\n                            {profileStatusMessage}\n                        </div>\n\n    const statusInput = <input className=\"profile__status-input\"\n                               value={statusMessage}\n                               type=\"text\"\n                               autoFocus\n                               onChange={onStatusUpdate}\n                               onBlur={deactiveteEditMode} />\n\n    return (\n        <div className=\"profile__status\">\n            {editMode ? statusInput : statusText}\n            {updateProfileStatusError && <RequestError errorMessage={updateProfileStatusError} />}\n        </div>\n    )\n\n})\n\nexport default ProfileStatus\n\n\n\ntype PropsType = {\n    isOwner: boolean\n}","import React from 'react';\nimport {reduxForm, Field, InjectedFormProps} from 'redux-form';\nimport { ProfileType } from '../../../../../types/types';\nimport {CustomFieldProps, Input, Textarea} from '../../../../common/formsControls/formsControls';\n\n\nlet ProfileDataForm: React.FC<InjectedFormProps<ProfileDataFormValuesType,\n    FormOwnPropsType> & FormOwnPropsType> \n        = React.memo( ({user, turnOffEditMode, handleSubmit, error}) => {\n\n    return (\n        <form onSubmit={handleSubmit}>\n            {error && <div><b>{error}</b></div>}\n            <Row title=\"Are you looking for a job?\" inputName=\"lookingForAJob\" type=\"checkbox\" element=\"input\" />\n            <Row title=\"Your professional skills\" inputName=\"lookingForAJobDescription\" element={Textarea} />\n            <Row title=\"Full Name\" inputName=\"fullName\" element={Input}/>\n            <Row title=\"About Me\" inputName=\"aboutMe\" element={Textarea} />\n            \n            {\n                Object.keys(user.contacts).map( key => {\n                    return <Row key={key} title={key} inputName={\"contacts.\" + key} element={Input} />\n                })\n            }\n            <div className=\"profile__data-buttons\">\n                <button className=\"profile__data-btn\" onClick={turnOffEditMode} type=\"button\">Cancel</button>\n                <button className=\"profile__data-btn\" type=\"submit\">Save</button>\n            </div>\n        </form>\n    )\n})\n\n\nconst Row: React.FC<RowPropsType> = React.memo( ({title, inputName, element, ...props}) => {\n    return <div className=\"profile__data-row data-form__row\">\n                <div className=\"profile__data-title\">{title}:</div>\n                <Field \n                    name={inputName}\n                    component={element}\n                    className=\"profile__data-descr profile__data-field\"\n                    {...props} />\n           </div>\n})\n\n\nconst ProfileDataReduxForm = reduxForm<ProfileDataFormValuesType, FormOwnPropsType>({form: \"profileData\"})(ProfileDataForm)\n\n\nexport default ProfileDataReduxForm\n\n\n\ntype FormOwnPropsType = {\n    user: ProfileType\n    onSubmit: (formData: ProfileType) => void\n    turnOffEditMode: () => void\n}\n\ntype ProfileDataFormValuesType = ProfileType\n\ntype RowPropsType = {\n    title: string\n    inputName: string\n    type?: string\n    element?: React.FC<CustomFieldProps> | string\n}","import React from 'react'\nimport { ProfileContactsType, ProfileType } from '../../../../../types/types'\n\n\nconst ProfileDataTable: React.FC<PropsType> = React.memo( (props) => {\n\n    const {isOwner, turnOnEditMode, user: {contacts, aboutMe, lookingForAJob, lookingForAJobDescription}} = props\n\n    const contactsList = Object.keys(contacts).map( key => {\n        if (contacts[key as keyof ProfileContactsType]) {\n            return <Row key={key} title={key} data={contacts[key as keyof ProfileContactsType]} isLink />\n        }\n        return null;\n    })\n\n    return (\n        <>  \n            {aboutMe && <Row title=\"About me\" data={aboutMe} />}\n            {lookingForAJobDescription && <Row title=\"My skills\" data={lookingForAJobDescription} />}\n            {lookingForAJob && <div className=\"profile__data-descr\">Looking for a job!</div>}\n            {contactsList}\n            {isOwner && <button className=\"profile__data-btn\" onClick={turnOnEditMode} >Change data</button>}\n        </>\n    )\n})\n\n\nconst Row: React.FC<RowPropsType> = React.memo( ({title, data, isLink}) => {\n    let link = `http://${data}`\n    if (data && /^http/im.test(data)) {\n        link = data\n    }\n    return (\n        <div className=\"profile__data-row\">\n            <div className=\"profile__data-title\">{title}:</div>\n            {isLink \n                ? <a className=\"profile__data-link\" target=\"_blank\" rel=\"noreferrer\" href={link}>{data}</a>\n                : <div className=\"profile__data-descr\">{data}</div>}\n        </div>\n    )\n})\n\n\nexport default ProfileDataTable\n\n\n\ntype PropsType = {\n    isOwner: boolean\n    user: ProfileType\n    turnOnEditMode: () => void\n}\n\ntype RowPropsType = {\n    title: string\n    data: string | undefined\n    isLink?: boolean\n}","import React, {useCallback, useState} from 'react'\nimport ProfileStatus from './profileStatus'\nimport ProfileDataForm from './profileDataForm'\nimport ProfileDataTable from './profileDataTable'\nimport {ProfileType} from '../../../../../types/types'\nimport MessagesBtn from '../../../../common/buttons/messagesBtn/messagesBtn'\nimport FollowBtn from '../../../../common/buttons/followBtn/followBtn'\nimport { useSelector } from 'react-redux'\nimport * as profileSelectors from '../../../../../selectors/profile'\n\n\nconst ProfileData: React.FC<ProfileDataPropsType> = React.memo( ({isOwner, user, updateProfileData, isUserAuthorized}) => {\n    \n    return (\n        <div className=\"profile__data\">\n            { (!isOwner && isUserAuthorized) && <ProfileButtons userId={user.userId}/> }\n\n            <h1 className=\"page__name\">{user.fullName}</h1>\n\n            <ProfileStatus isOwner={isOwner} />\n\n            <ProfileDataList \n                isOwner={isOwner}\n                user={user}\n                updateProfileData={updateProfileData}/>\n        </div>\n    )\n})\n\n\nconst ProfileButtons: React.FC<ProfileButtonsPropsType> = React.memo( ({userId}) => {\n\n    const profileFollowedInfo = useSelector(profileSelectors.getSelectedProfileFollowedInfo)\n\n    return (\n        <div className=\"profile__buttons-wrapper\">\n            <FollowBtn isFollowed={profileFollowedInfo.followedStatus} userId={profileFollowedInfo.userId} />\n            <MessagesBtn linkTo={`/dialogs/${userId}`} />\n        </div>\n    )\n})\n\nconst ProfileDataList: React.FC<ProfileDataListPropsType> = React.memo( ({isOwner, user, updateProfileData}) => { \n    \n    const [dataVisibility, setDataVisibility] = useState(false)\n    const [editMode, setEditMode] = useState(false)\n\n    const toggleDataVisibility = useCallback( () => {\n        setDataVisibility(isVisible => !isVisible)\n    }, [])\n\n    const turnOffEditMode = useCallback( () => {\n        setEditMode(false)\n    }, [])\n    const turnOnEditMode = useCallback( () => {\n        setEditMode(true)\n    }, [])\n    \n    const onProfileDataSubmit = useCallback( (formData: ProfileType) => {\n        // todo: remove then\n        updateProfileData(formData).then( () => {\n            setEditMode(false);\n        })\n    }, [updateProfileData])\n\n    const displayedDataContent = editMode \n        ? <ProfileDataForm\n            initialValues={user} \n            onSubmit={onProfileDataSubmit} \n            user={user}\n            turnOffEditMode={turnOffEditMode} />\n        : <ProfileDataTable \n            user={user}\n            isOwner={isOwner}\n            turnOnEditMode={turnOnEditMode} />\n    \n    return (\n        <>\n            <button onClick={toggleDataVisibility} className=\"view-data__btn\">\n                { dataVisibility ? \"Hide Profile Info\" : \"Show Profile Info\" }\n            </button>\n\n            {dataVisibility\n                &&  <div className=\"profile__data-list\">\n                        {displayedDataContent}\n                    </div> }\n        </>\n    )\n})\n\nexport default ProfileData\n\n\n\ntype ProfileDataPropsType = {\n    user: ProfileType\n    isOwner: boolean\n    isUserAuthorized: boolean\n    updateProfileData: (formData: ProfileType) => Promise<any>\n}\n\ntype ProfileButtonsPropsType = {\n    userId: number\n}\n\ntype ProfileDataListPropsType = {\n    user: ProfileType\n    isOwner: boolean\n    updateProfileData: (formData: ProfileType) => Promise<any>\n}","import React from 'react'\nimport ProfileImages from './profileImages'\nimport ProfileData from './profileData'\nimport { ProfileType} from '../../../../../types/types'\n\nimport './profileInfo.scss'\n\n\nconst ProfileInfo: React.FC<PropsType> = React.memo( ({user, isOwner, isUserAuthorized, updateProfileData}) => {\n    \n    return (\n        <div className=\"profile__info\">\n            <ProfileImages \n                isOwner={isOwner}\n                userCover={user.photos.large}\n                userPhoto={user.photos} />\n\n            <ProfileData\n                isOwner={isOwner}\n                isUserAuthorized={isUserAuthorized}\n                user={user}\n                updateProfileData={updateProfileData}\n                 />\n        </div>\n    )\n})\n\n\nexport default ProfileInfo\n\n\n\ntype PropsType = {\n    user: ProfileType\n    isOwner: boolean\n    isUserAuthorized: boolean\n    updateProfileData: (formData: ProfileType) => Promise<any>\n}","import React, { useEffect, useRef } from 'react'\nimport PostsTimline from './postsTimeline'\nimport Spinner from '../../../common/spinner'\nimport { ProfileType } from '../../../../types/types'\nimport ProfileInfo from './profileInfo/profileInfo'\nimport { useSelector } from 'react-redux'\nimport * as profileSelectors from '../../../../selectors/profile'\nimport AppPage from '../../../common/appPage/AppPage'\n\nimport './profilePage.scss'\n\n\nconst ProfilePage: React.FC<PropsType> = React.memo( ({ isOwner, isUserAuthorized, updateProfileData }) => {\n\n    const topAnchor = useRef<HTMLDivElement>(null)\n    const selectedProfile = useSelector(profileSelectors.getSelectedProfile)\n\n    useEffect(() => {\n        topAnchor.current?.scrollIntoView({ block: 'start', behavior: 'smooth' }) // todo: need to fix (change top element)\n    }, [selectedProfile])\n\n    if (!selectedProfile) {\n        return <Spinner />\n    }\n\n    return (\n        <AppPage pageTitle={selectedProfile.fullName}>\n\n            <div className=\"page-top-anchor\" ref={topAnchor}></div>\n            <div className=\"profile__page\">\n                <ProfileInfo user={selectedProfile} isOwner={isOwner} isUserAuthorized={isUserAuthorized} updateProfileData={updateProfileData} />\n                <PostsTimline isOwner={isOwner} />\n                <span className=\"section-hardcoded\">Section Hardcoded</span>\n            </div>\n\n        </AppPage>\n    )\n})\n\nexport default ProfilePage\n\n\n\ntype PropsType = {\n    isOwner: boolean\n    isUserAuthorized: boolean\n    updateProfileData: (formData: ProfileType) => Promise<any>\n}","import React, {Component} from 'react'\nimport {compose} from 'redux'\nimport {withRouter, Redirect, RouteComponentProps} from 'react-router-dom'\nimport {connect} from 'react-redux'\nimport {getUserProfile, getProfileStatus, actions, requestProfileFollowedInfo, updateProfileData} from '../../../../reducers/profileReducer'\nimport ProfilePage from './profilePage'\nimport { AppStateType } from '../../../../reduxStore'\nimport { ProfileType, UserType } from '../../../../types/types'\nimport Spinner from '../../../common/spinner'\n\n\nclass ProfilePageContainer extends Component<PropsType> {\n\n    componentDidMount() { \n        this.refreshProfile()\n    }\n\n    componentDidUpdate(prevProps: PropsType) {\n        if (prevProps.match.params.userId !== this.props.match.params.userId) {\n            this.refreshProfile()\n        }\n    }\n\n    componentWillUnmount() {\n        this.props.setUserProfile(null)\n    }\n\n    refreshProfile() {\n        let userId\n        if (this.props.match.params.userId) {\n            userId = +this.props.match.params.userId\n        }\n        if(!userId) {\n            userId = this.props.authUserId\n            this.props.history.push(\"/profile\")\n        }\n        if (!userId) {\n            console.error(\"the userId must exist in the URI params or the user must be authorized\") \n            alert(\"Please add the correct user id to the url (/profile/<userID>)\") // todo: mb show this message instead empty profile page\n        } else {\n            this.props.getUserProfile(userId)\n            this.props.getProfileStatus(userId)\n            if (this.props.isUserAuthorized) {\n                this.props.requestProfileFollowedInfo(userId)\n            }\n        }\n    }\n\n    render() {\n        if (!this.props.match.params.userId && !this.props.isUserAuthorized) {\n            return <Redirect to=\"/login\" />\n        }\n\n        if (this.props.isLoading) return <Spinner />\n\n        return (\n            <ProfilePage \n                isOwner={this.props.isUserAuthorized && (!this.props.match.params.userId || +this.props.match.params.userId === this.props.authUserId)}\n                isUserAuthorized={this.props.isUserAuthorized}\n                updateProfileData={this.props.updateProfileData} />\n        )\n    }\n}\n\n\nconst mapStateToProps = (state: AppStateType) => {\n    return {\n        isUserAuthorized: state.auth.isAuthorized,\n        isLoading: state.profilePage.isLoading,\n        authUserId: state.auth.id\n    }\n}\n\nconst mapDispatchToProps = {\n    getUserProfile,\n    getProfileStatus,\n    requestProfileFollowedInfo,\n    updateProfileData,\n    setUserProfile: actions.profileReceived\n}\n\n\nexport default compose<React.ComponentType>(\n                    withRouter,\n                    connect(mapStateToProps, mapDispatchToProps)\n)(ProfilePageContainer)\n\n\n\ntype MapStatePropsType = {\n    isUserAuthorized: boolean\n    isLoading: boolean\n    authUserId: number\n}\n\ntype MapDispatchPropsType = {\n    getUserProfile: (userId: number) => void\n    getProfileStatus: (userId: number) => void\n    requestProfileFollowedInfo: (userId: number) => void\n    setUserProfile: (user: UserType | null) => void\n    updateProfileData: (formData: ProfileType) => Promise<any>\n}\n\ntype PathParamsType = {\n    userId: string | undefined\n}\n\ntype PropsType = MapStatePropsType & MapDispatchPropsType & \nRouteComponentProps<PathParamsType>","import ProfilePageContainer from './profilePageContainer';\n\nexport default ProfilePageContainer;","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport { defaultPhoto } from '../../../../../assets/images'\nimport { AllDialogsListItemType } from '../../../../../services/dialogsAPI'\nimport Moment from 'react-moment'\n\n\nconst DialogsListItem: React.FC<PropsType> = React.memo( ({dialogsItem}) => {\n\n    const {id, photos, userName, lastUserActivityDate, hasNewMessages,\n        newMessagesCount, lastDialogActivityDate} = dialogsItem\n    const style = dialogsItem.hasNewMessages ? \"dialogs__list-item_new\" : \"dialogs__list-item\"\n\n    return (\n        <li>\n            <Link className={style} to={`/dialogs/${id}`}>\n                <div className=\"dialog__image\">\n                    <img src={photos.small || defaultPhoto} alt=\"user_image\" />\n                </div>\n                <div className=\"dialog__content\">\n                    <div className=\"dialog__content-title\">\n                        {`${userName} `}\n                    </div>\n                    <div className=\"dialog__content-subtitle\">\n                        (last seen&#160;\n                            <Moment fromNow date={lastUserActivityDate} />\n                            )\n                    </div>\n                    \n                    <div className=\"dialog__content-message\">\n                        {hasNewMessages \n                            ? `There are ${newMessagesCount} new messages` \n                            : <span>Last opened on<Moment format=\" MMM DD YYYY hh:mm\" date={lastDialogActivityDate} /></span>}\n                    </div>\n                </div>\n            </Link>\n        </li>\n    )\n})\n\n\nexport default DialogsListItem\n\n\n\ntype PropsType = {\n    dialogsItem: AllDialogsListItemType\n}","import UsersPage from './usersPage';\n\nexport default UsersPage;","import React from 'react'\nimport { useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { requestAllDialogsList } from '../../../../../reducers/dialogsReducer'\nimport Spinner from '../../../../common/spinner'\nimport DialogsListItem from './dialogsListItem'\nimport * as dialogsSelectors from '../../../../../selectors/dialogs'\n\nimport './dialogsList.scss'\n\n\nconst DialogsList: React.FC = React.memo( () => {\n    \n    const dialogsList = useSelector(dialogsSelectors.getDialogsList)\n    const isLoading = useSelector(dialogsSelectors.getIsLoading)\n    const dispatch = useDispatch()\n    \n    useEffect( () => {\n        dispatch( requestAllDialogsList() )\n    }, [])\n\n    return (\n        <div className=\"dialogs__wrapper\">\n            <ul className=\"dialogs__list\">\n                {isLoading ? <Spinner /> : dialogsList.map((d) => <DialogsListItem dialogsItem={d} key={d.id} />)}\n            </ul>\n        </div>\n    )\n})\n\n\nexport default DialogsList","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport RequestError from '../../../../common/errors/requestError'\nimport SendMessageForm from '../../../../common/messagesComponents/sendMessageForm'\nimport * as dialogsSelectors from '../../../../../selectors/dialogs'\n\n\nconst DialogForm: React.FC<DialogFormPropsType> = React.memo( ({sendMessage}) => {\n\n    const sendingMessageError = useSelector(dialogsSelectors.getSendingMessageError)\n    \n    return (\n        <>\n            <SendMessageForm\n                fieldName=\"dialogMessage\"\n                btnDisabled={false}\n                sendMessage={sendMessage} />\n\n            {sendingMessageError && <RequestError errorMessage={sendingMessageError} />}\n        </>\n    )\n})\n\nexport default DialogForm\n\n\n\ntype DialogFormPropsType = {\n    sendMessage: (message: string) => void\n}","import React, { useCallback } from 'react'\nimport {Link, useRouteMatch} from 'react-router-dom'\nimport DialogForm from './dialogForm'\nimport * as icons from '../../../../../assets/icons'\nimport './dialogsItem.scss'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useEffect } from 'react'\nimport { actions, requestDialogMessages, sendMessage } from '../../../../../reducers/dialogsReducer'\nimport MessagesList from '../../../../common/messagesComponents/messagesList'\nimport { defaultPhoto } from '../../../../../assets/images'\nimport { ProfileType } from '../../../../../types/types'\nimport RequestError from '../../../../common/errors/requestError'\nimport * as dialogsSelectors from '../../../../../selectors/dialogs'\nimport * as authSelectors from '../../../../../selectors/auth'\nimport { Helmet } from 'react-helmet-async'\n\n\nconst DialogsItem: React.FC = React.memo( () => {\n\n    const messages = useSelector(dialogsSelectors.getSelectedDialogMessages)\n    const interlocuter = useSelector(dialogsSelectors.getDialogInterlocuterProfile)\n    const isLoading = useSelector(dialogsSelectors.getIsLoading)\n    const requestingMessagesError = useSelector(dialogsSelectors.getRequestingMessagesError)\n    const authUserImg = useSelector(authSelectors.getAuthUserPhoto)\n\n\n    //pagination\n    const messagesPortionSize = 10\n\n\n   \n    const match = useRouteMatch<MatchParamsType>()\n    const dispatch = useDispatch()\n\n    const userId = Number(match.params.userId)\n\n\n\n    const sendDialogMessage = useCallback( (message: string) => {\n        dispatch( sendMessage(userId, message) )\n    }, [dispatch, userId])\n    \n\n    useEffect( () => {\n        dispatch( requestDialogMessages(userId, 1, messagesPortionSize) )\n\n        return () => {\n            dispatch( actions.dialogMessagesCleaned() )\n            dispatch( actions.interlocuterProfileReceived(null) )\n        }\n    }, [])\n\n\n\n    if (requestingMessagesError) {\n        return (\n            <div className=\"dialogs__item\">\n                <RequestError errorMessage={requestingMessagesError} />\n            </div>\n        )\n    }\n\n    return (\n        <>\n            <Helmet>\n                <title>{`${interlocuter?.fullName || ''} Messages`}</title>\n            </Helmet>\n\n            <div className=\"dialogs__item\">\n                <DialogsItemHeader friend={interlocuter} />   \n                <MessagesList \n                    dialogMessages={messages}\n                    dialogMessagesPortionSize={messagesPortionSize}\n                    isLoading={isLoading}\n                    friendId={userId}\n                    friendImg={interlocuter?.photos.small}\n                    ownerImg={authUserImg} />\n\n                <DialogForm sendMessage={sendDialogMessage} />\n            </div>\n        </> \n    )\n})\n\n\n\nconst DialogsItemHeader: React.FC<DialogHeaderPropsType> = React.memo( ({friend}) => {\n\n    return (\n        <div className=\"dialogs__item-header\">\n            <Link className=\"go-back__link\" to=\"/dialogs\"> \n                <img className=\"go-back__icon\" src={icons.goBack} alt=\"go_back_icon\" />\n                <div className=\"go-back__text\">Go back</div>\n            </Link>\n\n            <Link className=\"interlocuter\" to={`/profile/${friend?.userId}`}>\n                <div className=\"interlocuter__image\">\n                    <img src={friend?.photos.small || defaultPhoto} alt=\"interlocuter_image\" />\n                </div>\n                <div className=\"interlocuter__name\">{friend?.fullName}</div>\n            </Link>\n        </div>\n    )\n})\n\n\nexport default DialogsItem\n\n\n\ntype MatchParamsType = {userId: string}\n\ntype DialogHeaderPropsType = {\n    friend: ProfileType | null\n}","import React from 'react'\nimport DialogsList from './dialogsList/dialogsList'\nimport DialogsItem from './dialogsItem/dialogsItem'\nimport {withAnonUserRedirect} from '../../../HOCs/withRedirect'\nimport { Route, Switch } from 'react-router-dom'\nimport AppPage from '../../../common/appPage/AppPage'\n\n\nconst DialogsPage: React.FC = React.memo( () => {\n    return (\n        <AppPage pageTitle=\"Dialogs\">\n        \n            <Switch >\n                <Route exact path=\"/dialogs\" component={DialogsList} />\n                <Route path=\"/dialogs/:userId\" component={DialogsItem} />\n            </Switch>\n\n        </AppPage>\n    )\n})\n\nexport default withAnonUserRedirect(DialogsPage)","import DialogsPage from './dialogsPage';\n\nexport default DialogsPage;","import React from 'react'\nimport AppPage from '../../../common/appPage/AppPage'\nimport {withAnonUserRedirect} from '../../../HOCs/withRedirect'\n\nimport './newsPage.scss'\n\n\nconst NewsPage: React.FC = React.memo( () => {\n    return (\n        <AppPage pageTitle=\"News\">\n\n            <div>\n                News Page\n            </div>\n\n        </AppPage>\n    )\n})\n\nexport default withAnonUserRedirect(NewsPage)","import NewsPage from './newsPage';\n\nexport default NewsPage;","import React from 'react'\nimport AppPage from '../../../common/appPage/AppPage'\nimport {withAnonUserRedirect} from '../../../HOCs/withRedirect'\n\nimport './musicPage.scss'\n\n\nconst MusicPage: React.FC = React.memo( () => {\n    return (\n        <AppPage pageTitle=\"Music\">\n        \n            <div>\n                Music Page\n            </div>\n            \n        </AppPage>\n    )\n})\n\n\nexport default withAnonUserRedirect(MusicPage)","import MusicPage from './musicPage';\n\nexport default MusicPage;","import React from 'react'\nimport {withAnonUserRedirect} from '../../../HOCs/withRedirect'\nimport AppPage from '../../../common/appPage/AppPage'\n\nimport './settingsPage.scss'\n\n\nconst SettingsPage = React.memo( () => {\n    return (\n        <AppPage pageTitle=\"Settings\">\n\n            <div className=\"section\">\n                Settings Page\n            </div>\n            \n        </AppPage>\n    )\n})\n\nexport default withAnonUserRedirect(SettingsPage)","import ChatPage from './chatPage'\n\nexport default ChatPage","import SettingsPage from './settingsPage';\n\nexport default SettingsPage;","import PageNotFound from './pageNotFound';\n\nexport default PageNotFound;","import React from 'react'\nimport {NavLink} from 'react-router-dom'\nimport AppPage from '../../../common/appPage/AppPage'\n\nimport './pageNotFound.scss'\n\n\nconst PageNotFound: React.FC = () => {\n    return (\n        <AppPage pageTitle=\"404 Page Not Found\">\n        \n            <div className=\"error__page-wrapper\">\n                <h2 className=\"error__page-title\">404 ERROR</h2>\n                <div className=\"error__page-descr\">Page not found</div>\n                <NavLink className=\"error__page-link\" to=\"/profile\">Go back to the main page</NavLink>\n            </div>\n            \n        </AppPage>\n    )\n}\n\nexport default PageNotFound","import React from 'react'\nimport {Route, Redirect, Switch} from 'react-router-dom'\nimport Spinner from '../../common/spinner'\nimport {ProfilePageContainer, DialogsPage, NewsPage, MusicPage, SettingsPage, LoginPage, PageNotFound} from '../pages'\n\nimport './mainSection.scss'\n\nconst UsersPage = React.lazy(() => import('../pages/usersPage/usersPage'))\nconst ChatPage = React.lazy(() => import('../pages/chatPage/chatPage'))\n// todo: React lazy does not cause splitting bundle in chunks\n// try this https://stackoverflow.com/questions/53186595/react-lazy-does-not-cause-splitting-bundle-in-chunks\n\n\nconst MainSection: React.FC = React.memo( () => {\n    return (\n        <main className=\"main-section\">\n            <React.Suspense fallback={Spinner}>\n                <Switch>\n                    <Redirect exact from=\"/\" to=\"/profile\" />\n                    <Route path=\"/login\" component={LoginPage} />\n                    <Route path=\"/profile/:userId?\" component={ProfilePageContainer} />\n                    <Route path=\"/users\" component={UsersPage} />\n                    <Route path=\"/dialogs\" component={DialogsPage} />\n                    <Route path=\"/news\" component={NewsPage} />\n                    <Route path=\"/music\" component={MusicPage} />\n                    <Route path=\"/chat\" component={ChatPage} />\n                    <Route path=\"/settings\" component={SettingsPage} />\n                    <Route path=\"*\" component={PageNotFound} />\n                </Switch>\n            </React.Suspense>\n        </main>\n    )\n})\n\nexport default MainSection","import MainSection from './mainSection';\n\nexport default MainSection;","import Footer from './footer';\n\nexport default Footer;","import React from 'react';\n\nimport './footer.scss';\n\nconst Footer = React.memo( () => {\n    return (\n        <div className=\"container\">\n        <footer className=\"footer\">\n            \n                Created for educational purposes © <a href=\"http://karpeyev.com\" target=\"_blank\" rel=\"noreferrer\" className=\"author-link\">insane4L</a>\n            \n        </footer>\n        </div>\n    )\n})\n\n\nexport default Footer;","import React from \"react\"\nimport Header from \"./header\"\nimport SideBar from \"./sideBar\"\nimport MainSection from \"./mainSection\"\nimport Footer from './footer'\nimport {connect} from 'react-redux'\nimport {actions, initializeApp} from '../../reducers/appReducer'\nimport Spinner from '../common/spinner'\nimport { AppStateType } from \"../../reduxStore\"\n\nimport \"./app.scss\"\nimport { Helmet } from \"react-helmet-async\"\n\n\nclass App extends React.Component<PropsType> {\n\n    componentDidMount() {\n        this.props.initializeApp();\n        //handle all unhandled with \"catch\" errors\n        window.addEventListener('unhandledrejection', this.catchAllUnhandledErrors)\n    }\n\n    componentWillUnmount() {\n        //remove because of side effect in global\n        window.removeEventListener('unhandledrejection', this.catchAllUnhandledErrors)\n    }\n\n    catchAllUnhandledErrors = () => {\n        this.props.unhandledErrorCatched(true)\n    }\n\n    render() {\n      \n        if (!this.props.appInitialized) return <Spinner />\n\n        return (\n            <>\n                <Helmet>\n                    <title>Social Network</title>\n                </Helmet>\n                \n                <div className=\"app__wrapper\">\n                    <Header />\n                    <div className=\"container page__layout\">\n                        <SideBar />\n                        <MainSection />\n                    </div>\n                    <Footer />\n                </div>\n            </>\n        )\n    }\n}\n\nconst mapStateToProps = (state: AppStateType) => ({appInitialized: state.app.appInitialized})\n\nexport default connect(mapStateToProps, {initializeApp, unhandledErrorCatched: actions.unhandledErrorCatched})(App)\n\n\n\ntype PropsType = {\n    appInitialized: boolean\n    initializeApp: () => Promise<void>\n    unhandledErrorCatched: (error: boolean) => void\n}","import App from './app';\n\nexport default App;","import {createStore, combineReducers, applyMiddleware, compose, Action} from 'redux'\nimport thunkMiddleware, { ThunkAction } from 'redux-thunk'\n\nimport profileReducer from './reducers/profileReducer'\nimport dialogsReducer from './reducers/dialogsReducer'\nimport usersReducer from './reducers/usersReducer'\nimport authReducer from './reducers/authReducer'\nimport {reducer as formReducer} from 'redux-form'\nimport appReducer from './reducers/appReducer'\nimport chatReducer from './reducers/chatReducer'\n\n\n\nconst rootReducer = combineReducers({\n    dialogsPage: dialogsReducer,\n    profilePage: profileReducer,\n    usersPage: usersReducer,\n    app: appReducer,\n    auth: authReducer,\n    form: formReducer,\n    chat: chatReducer\n})\n\ntype RootReducerType = typeof rootReducer\nexport type AppStateType = ReturnType<RootReducerType>\n\n\n// type PropertiesTypes<T> = T extends {[key: string]: infer U} ? U : never\n// export type InferActionsTypes<T extends {[key: string]: (...args: any[]) => any}> =ReturnType<PropertiesTypes<T>>\nexport type InferActionsTypes<T> = T extends {[key: string]: (...args: any[]) => infer U} ? U : never\n\n\nexport type BaseThunkType<A extends Action, R = Promise<void>> = ThunkAction<R, AppStateType, unknown, A>\n\n\n\n// options for Redux DevTools (chrome extention)\n// @ts-ignore\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunkMiddleware)))\n\n// without support Redux DevTools\n// const store = createStore(reducers, applyMiddleware(thunkMiddleware));\n\n// @ts-ignore\nwindow.store = store\nexport default store","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport {HashRouter as Router} from 'react-router-dom'\nimport App from './components/app'\nimport store from './reduxStore'\nimport {Provider} from 'react-redux'\n\nimport './sassStyles/_global.scss'\nimport { HelmetProvider } from 'react-helmet-async'\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <HelmetProvider>\n        <Provider store={store}>\n          <App />\n        </Provider>\n      </HelmetProvider>\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n)","import React from 'react'\nimport {Link} from 'react-router-dom'\nimport { defaultPhoto } from '../../../assets/images'\n\nimport './userAvatar.scss'\n\n\nconst UserAvatar: React.FC<UserAvatarPropsType & React.HTMLAttributes<HTMLDivElement>> = React.memo( ({userImage, linkTo, className}) => {\n    return (\n        <Link className={className} to={linkTo}>\n            <div className=\"user__component-avatar\">\n                <img className=\"user__component-avatar-img\" src={userImage || defaultPhoto} alt=\"user_image\" />\n            </div>\n        </Link>\n    )\n})\n\nexport default UserAvatar\n\n\n\ntype UserAvatarPropsType = {\n    linkTo: string\n    className: string\n    userImage: string | null | undefined\n}","import React from 'react'\nimport {Redirect} from 'react-router-dom'\nimport {connect} from 'react-redux'\nimport { AppStateType } from '../../reduxStore'\n\n\nconst redirectHOC = function<WCP>(afterLoggingIn = false) { \n    return (WrappedComponent: React.ComponentType<WCP>) => { // Wrapped Component Props\n        const RedirectComponent: React.FC<MapPropsType> = (props) => {\n            const {isAuth, ...restProps} = props\n\n            if(!isAuth && !afterLoggingIn) return <Redirect to={'/login'} />;\n            if(isAuth && afterLoggingIn) return <Redirect to={'/profile'} />;\n            return <WrappedComponent {...restProps as WCP}/>;\n        }\n       \n        return connect(mapStateToProps)(RedirectComponent)\n    }\n}\n\nconst mapStateToProps = (state: AppStateType) => ({\n    isAuth: state.auth.isAuthorized\n} as MapPropsType)\n\n\nexport const withAnonUserRedirect = redirectHOC()\nexport const withSuccesAuthRedirect =  redirectHOC(true)\n\n\n\ntype MapPropsType = {\n    isAuth: boolean\n}","import {AppStateType} from '../reduxStore'\n\nexport const getAuthUserId = (state: AppStateType) => {\n    return state.auth.id\n}\n\nexport const getIsAuthorized = (state: AppStateType) => {\n    return state.auth.isAuthorized\n}\n\nexport const getLogin = (state: AppStateType) => {\n    return state.auth.login\n}\n\nexport const getAuthUserPhoto = (state: AppStateType) => {\n    return state.auth.authUserPhoto\n}","import React from 'react'\nimport {Link} from 'react-router-dom'\n\n\nconst UserName: React.FC<UserNamePropsType> = React.memo( ({linkTo, userName, className}) => {\n    return (\n        <Link className={className} to={linkTo} >\n            <div className=\"user__component-name\">\n                {userName}\n            </div>\n        </Link>\n    )\n})\n\nexport default UserName\n\n\n\ntype UserNamePropsType = {\n    linkTo: string\n    userName: string | undefined\n    className: string\n}","import { ChatMessageType } from \"../types/types\"\n\nlet subscribers = {\n    'messages-received': [] as MessagesSubscribersType[],\n    'status-changed': [] as StatusSubscribersType[]\n} \n\nlet ws: WebSocket | null = null\n\nconst closeHandler = () => {\n    notifySubscribersAboutStatus('pending')\n    setTimeout(createChannel, 4000)\n}\nconst messageHandler =  (e: MessageEvent) => {\n    const newMessages = JSON.parse(e.data)\n    subscribers[\"messages-received\"].forEach(s => s(newMessages) )\n}\nconst openHandler =  () => {\n    notifySubscribersAboutStatus('ready')\n}\nconst errorHandler =  () => {\n    notifySubscribersAboutStatus('error')\n}\n\nconst notifySubscribersAboutStatus = (status: WSStatusType) => {\n    subscribers[\"status-changed\"].forEach(s => s(status))\n}\n\nconst cleanUp = () => {\n    ws?.removeEventListener('close', closeHandler)\n    ws?.removeEventListener('message', messageHandler)\n    ws?.removeEventListener('open', openHandler)\n    ws?.removeEventListener('error', errorHandler)\n    ws?.close()\n}\nfunction createChannel() {\n    cleanUp()\n    ws = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx')\n    notifySubscribersAboutStatus('pending')\n    ws.addEventListener('close', closeHandler)\n    ws.addEventListener('message', messageHandler)\n    ws.addEventListener('open', openHandler)\n    ws.addEventListener('error', errorHandler)\n}\n\n\nexport const chatAPI = {\n    start() {\n        createChannel()\n    },\n    stop() {\n        subscribers[\"messages-received\"] = []\n        subscribers[\"status-changed\"] = []\n        cleanUp()\n    },\n    subscribe(event: EventsTypes, callback: SubscribersTypes) {\n        // @ts-ignore\n        subscribers[event].push(callback)\n    },\n    unsubscribe(event: EventsTypes, callback: SubscribersTypes) {\n        // @ts-ignore\n        subscribers[event] = subscribers[event].filter(s => s !== callback)\n    },\n    sendMessage(message: string) {\n        ws?.send(message)\n    }\n}\n\n\n\nexport type WSStatusType = 'pending' | 'ready' | 'error'\n\ntype MessagesSubscribersType = (messages: ChatMessageType[]) => void\ntype StatusSubscribersType = (status: WSStatusType) => void\ntype SubscribersTypes = MessagesSubscribersType | StatusSubscribersType\ntype EventsTypes = 'messages-received' | 'status-changed'","import { Dispatch } from \"redux\"\nimport { BaseThunkType, InferActionsTypes } from \"../reduxStore\"\nimport { chatAPI, WSStatusType } from \"../services/chatAPI\"\nimport { ChatMessageType } from \"../types/types\"\n\n\n\nconst initialState = {\n    messages: [] as ChatMessageType[],\n    status: 'pending' as WSStatusType\n}\n\n\nconst chatReducer = (state = initialState, action: ActionsTypes): InitialStateType => {\n    switch(action.type) {\n        case 'sn/CHAT/MESSAGES_RECEIVED':\n            return {\n                ...state,\n                messages: [...state.messages, ...action.payload.messages].filter((m, index, array) => index >= (array.length - 100))\n            }\n        case 'sn/CHAT/STATUS_CHANGED':\n            return {\n                ...state,\n                status: action.payload.status\n            }\n        case 'sn/CHAT/MESSAGES_CLEANED':\n            return {\n                ...state,\n                messages: []\n            }\n        default:\n            return state\n    }\n}\n\nexport const actions = {\n    messagesReceived: (messages: ChatMessageType[]) => (\n        {type: 'sn/CHAT/MESSAGES_RECEIVED', payload: {messages}} as const\n    ),\n    statusChanged: (status: WSStatusType) => (\n        {type: 'sn/CHAT/STATUS_CHANGED', payload: {status}} as const\n    ),\n    messagesCleaned: () => (\n        {type: 'sn/CHAT/MESSAGES_CLEANED'} as const\n    )\n\n}\n\n\n\n\nlet _newMessageHandler: ((messages: ChatMessageType[]) => void) | null = null // because need exactly that link when subscriber unsubscribes\nconst newMessageHandlerCreator = (dispatch: Dispatch) => {\n    if (_newMessageHandler === null) {\n        _newMessageHandler = (messages) => {\n            dispatch( actions.messagesReceived(messages) )\n        }\n    }\n    return _newMessageHandler\n}\n\nlet _statusChangedHandler: ((status: WSStatusType) => void) | null = null // because need exactly that link when subscriber unsubscribes\nconst statusChangedHandlerCreator = (dispatch: Dispatch) => {\n    if (_statusChangedHandler === null) {\n        _statusChangedHandler = (status) => {\n            dispatch( actions.statusChanged(status) )\n        }\n    }\n    return _statusChangedHandler\n}\n\nexport const startMessagesListening = ():BaseThunkType<ActionsTypes> => async (dispatch) => {\n    chatAPI.start()\n    chatAPI.subscribe('messages-received', newMessageHandlerCreator(dispatch))\n    chatAPI.subscribe('status-changed', statusChangedHandlerCreator(dispatch))\n}\n\nexport const stopMessagesListening = ():BaseThunkType<ActionsTypes> => async (dispatch) => {\n    chatAPI.unsubscribe('messages-received', newMessageHandlerCreator(dispatch))\n    chatAPI.unsubscribe('status-changed', statusChangedHandlerCreator(dispatch))\n    chatAPI.stop()\n}\n\n\nexport const sendMessage = (message: string):BaseThunkType<ActionsTypes> => async (dispatch) => {\n    chatAPI.sendMessage(message)\n}\n\nexport default chatReducer\n\n\ntype InitialStateType = typeof initialState\ntype ActionsTypes = InferActionsTypes<typeof actions>","import axios from 'axios';\n\nexport const apiBase = axios.create({\n    withCredentials: true,\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\n    headers: {\n        \"API-KEY\": \"e88bb7e6-af23-49e2-8781-5099f9ee4dd5\"\n    }\n})\n\n\n\nexport enum ResultCodesEnum {\n    Success = 0,\n    Error = 1\n}\nexport enum ResultCodeForCaptchaEnum {\n    CaptchaIsRequired = 10\n}\n\nexport type ResponseType<D = {}, RC = ResultCodesEnum> = {\n    data: D\n    resultCode: RC\n    messages: Array<string>\n}\n","import React from 'react'\nimport { Link } from \"react-router-dom\"\n\n\nconst MessagesBtn: React.FC<MessagesBtnPropsType> = React.memo( ({linkTo}) => {\n    return (\n        <Link to={linkTo} className=\"user__messages-btn\">Write message</Link>\n    )\n})\n\nexport default MessagesBtn\n\n\n\ntype MessagesBtnPropsType = {\n    linkTo: string\n}","import React from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { followOrUnfollow } from '../../../../reducers/usersReducer'\nimport * as usersSelectors from '../../../../selectors/users'\n\nimport '../buttons.scss'\n\n\nconst FollowBtn: React.FC<FollowBtnPropsType> = React.memo( ({isFollowed, userId}) => {\n\n    const followingInProgress = useSelector(usersSelectors.getFollowingInProgress)\n    const btnLabel = isFollowed ? 'Unfollow' : isFollowed === false ? 'Follow' : ''\n    const btnStyle = isFollowed ? 'user__follow-btn unfollow-btn' : 'user__follow-btn'\n    const dispatch = useDispatch()\n\n    const followUnfollow = (userId: number) => {\n        dispatch( followOrUnfollow(userId) )\n    }\n\n    if (isFollowed === null || !userId) return <div></div> // todo: fix on profile page when user refreshed + remove user from friends block (useEffect)\n    \n    return (\n        <button \n            className={btnStyle}\n            disabled={followingInProgress.some(id => id === userId)}\n            onClick={() => followUnfollow(userId)} >\n        {btnLabel}\n        </button>\n    )\n})\n\nexport default FollowBtn\n\n\n\ntype FollowBtnPropsType = {\n    isFollowed: boolean | null\n    userId: number | null\n}","import React, { FormEvent, KeyboardEvent, useState } from 'react'\n\nimport './sendMessageForm.scss'\n\n\nconst SendMessageForm: React.FC<SendMessagePropsType> = React.memo( ({fieldName, btnDisabled, sendMessage}) => {\n\n    const [message, setMessage] = useState('')\n\n    const sendMessageHandler = (e?: FormEvent<HTMLFormElement>) => {\n        e?.preventDefault()\n        if (!message) {\n            return\n        }\n        sendMessage(message)\n        setMessage('')\n    }\n\n    const onEnterPress = (e: KeyboardEvent<HTMLTextAreaElement>) => {\n        if(e.key === 'Enter' && e.shiftKey === false) {\n            e.preventDefault();\n            sendMessageHandler()\n        }\n    }\n\n    return (\n        <form onSubmit={sendMessageHandler} className=\"send-message__form\" >\n            <textarea \n                name={fieldName}\n                className=\"send-message__input\"\n                placeholder=\"Type new message here..\"\n                autoComplete=\"off\"\n                value={message}\n                onChange={(e) => setMessage(e.currentTarget.value)}\n                onKeyDown={onEnterPress} />\n\n            <button disabled={btnDisabled || !message} className=\"send-message__btn\">Send Message</button>\n        </form>\n    )\n})\n\nexport default SendMessageForm\n\n\n\ntype SendMessagePropsType = {\n    fieldName: string\n    btnDisabled: boolean\n    sendMessage: (message: string) => void\n}","import React from 'react'\nimport { ChatMessageType } from '../../../../types/types'\nimport UserAvatar from '../../../common/userAvatar/userAvatar'\nimport UserName from '../../../common/userName/userName'\n\nimport '../../../common/messagesComponents/message.scss'\n\n\nconst ChatMessage: React.FC<MessagePropsType> = React.memo( ({message, isOwnerMessage}) => {\n    \n    const style = isOwnerMessage ? \"message_owner\" : \"message_friend\"\n\n    return (\n        <div className={`message ${style}`}>\n            <div className=\"message__info\">\n                <UserAvatar className=\"message__author-image\" userImage={message.photo} linkTo={`/profile/${message.userId}`} />\n                <UserName className=\"message__author-name\" userName={message.userName} linkTo={`/profile/${message.userId}`} />\n                {/* <div className=\"message__date\">22.05.2021</div> todo: there are no dates in the chat message https://social-network.samuraijs.com/api */}\n            </div>\n            <div className=\"message__text\">{message.message}</div>\n        </div>\n    )\n})\n\nexport default ChatMessage\n\n\n\ntype MessagePropsType = {\n    message: ChatMessageType\n    isOwnerMessage: boolean\n}","import React, { useState } from 'react'\nimport Moment from 'react-moment'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { actions, requestMessageStatus } from '../../../../../reducers/dialogsReducer'\nimport { DialogMessageType } from '../../../../../services/dialogsAPI'\nimport RequestError from '../../../../common/errors/requestError'\nimport UserAvatar from '../../../../common/userAvatar/userAvatar'\nimport UserName from '../../../../common/userName/userName'\nimport * as dialogsSelectors from '../../../../../selectors/dialogs'\n\nimport '../../../../common/messagesComponents/message.scss'\n\n\nconst DialogMessage: React.FC<MessagePropsType> = React.memo( ({message, isOwnerMessage, friendImg, ownerImg}) => {\n\n    const [statusDisplay, setStatusDisplay] = useState(false)\n    const dispatch = useDispatch()\n    const style = isOwnerMessage ? \"message_owner\" : \"message_friend\"\n   \n\n    const viewMessageActualStatus = () => {\n        if (message.viewed === true) {\n            dispatch( actions.setRequestError({messageStatusRequestError: null}) )\n            dispatch( actions.addMessageToViewed(message.id) ) // add to viewed arr, because of arr.some() --- \"Has been VIEWED\"\n            showStatus(4)\n        }\n        if (message.viewed === false) { // if message initial viewed false, request API actual status\n            dispatch( requestMessageStatus(message.id) ) \n            showStatus(4)\n        }\n    }\n    const showStatus = (seconds: number) => {\n        const milliseconds = seconds * 1000\n        setStatusDisplay(true)\n        const timerId = setTimeout(() => { setStatusDisplay(false) }, milliseconds)\n    }\n\n    return (\n        <>\n            <div className={`message ${style}`}>\n                <div className=\"message__info\">\n                    <UserAvatar className=\"message__author-image\" userImage={isOwnerMessage ? ownerImg : friendImg} linkTo={`/profile/${message.senderId}`} />\n                    <UserName className=\"message__author-name\" userName={message.senderName} linkTo={`/profile/${message.senderId}`} />\n                    <div className=\"message__date\"><Moment format=\"MMM DD YYYY hh:mm\" date={message.addedAt} /></div>\n                </div>\n                <div className=\"message__text\" id=\"dialog__message-text\">{message.body}</div>\n                {isOwnerMessage && !statusDisplay && <div className=\"check-status__btn\" onClick={viewMessageActualStatus}>Check status</div>}\n                {statusDisplay && <MessageStatus messageId={message.id} />}\n            </div>\n        </>\n    )\n})\n\n\nconst MessageStatus: React.FC<{messageId: string}> = React.memo( ({messageId}) => {\n    const viewedMessages = useSelector(dialogsSelectors.getViewedMessages)\n    const MessageStatusRequestError = useSelector(dialogsSelectors.getMessageStatusRequestError)\n    \n    if (MessageStatusRequestError) {\n        return <div className=\"message__status\">\n            <RequestError errorMessage={MessageStatusRequestError} />\n        </div>\n    }\n\n    return (\n        <div className=\"message__status\">\n            { viewedMessages.some(id => id === messageId) \n                ? \"Viewed\" \n                : \"Not viewed\" }\n        </div>\n        \n    )\n})\n\nexport default DialogMessage\n\n\n\ntype MessagePropsType = {\n    message: DialogMessageType\n    friendImg: string | null | undefined\n    isOwnerMessage: boolean\n    ownerImg: string | null | undefined\n}","import React from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { requestDialogMessages } from '../../../../../reducers/dialogsReducer'\nimport * as dialogsSelectors from '../../../../../selectors/dialogs'\n\n\nconst DialogPagination: React.FC<DialogPaginationPropsType> = React.memo( ({userId, messagesPortionSize}) => {\n\n    const loadedMessagesCount = useSelector(dialogsSelectors.getLoadedMessagesCount)\n    const dialogMessagesCount = useSelector(dialogsSelectors.getSelectedDialogMessagesCount)\n    const portionsCount = Math.ceil(dialogMessagesCount / messagesPortionSize)\n    const viewedPortionsCount = Math.ceil(loadedMessagesCount / messagesPortionSize)\n    const oldMessagesPortionNumber =  viewedPortionsCount + 1\n\n    const dispatch = useDispatch()\n\n    const showOldMessages = () => {\n        if (userId) {\n            dispatch( requestDialogMessages(userId, oldMessagesPortionNumber, messagesPortionSize) )\n        }\n    }\n\n    return (\n        <>\n            {portionsCount > viewedPortionsCount\n                ? <div className=\"dialogs__item-pagination\" onClick={showOldMessages}>^^^</div>\n                : <span></span>\n            }\n        </>\n    )\n})\n\nexport default DialogPagination\n\n\n\ntype DialogPaginationPropsType = {\n    userId: number | undefined\n    messagesPortionSize: number\n}","import React, { useEffect, useRef, useState } from 'react'\nimport { useSelector } from 'react-redux'\nimport * as authSelectors from '../../../selectors/auth'\nimport { DialogMessageType } from '../../../services/dialogsAPI'\nimport { ChatMessageType } from '../../../types/types'\nimport ChatMessage from '../../app/pages/chatPage/chatMessage'\nimport DialogMessage from '../../app/pages/dialogsPage/dialogsItem/dialogMessage'\nimport DialogPagination from '../../app/pages/dialogsPage/dialogsItem/dialogPagination'\nimport Spinner from '../spinner'\n\nimport './messagesList.scss'\n\n\nconst MessagesList: React.FC<MessagesListPropsType> = React.memo( ({chatMessages, dialogMessages, dialogMessagesPortionSize, isLoading, friendId, friendImg, ownerImg}) => {\n\n    const propsMessages = chatMessages || dialogMessages\n\n    const [isAutoScroll, setIsAutoScroll] = useState(true)\n    const messagesAnchor = useRef<HTMLDivElement>(null)\n    const authUserId = useSelector(authSelectors.getAuthUserId)\n\n    const scrollHandler = (e: React.UIEvent<HTMLElement>) => {\n        const element = e.currentTarget\n        if (Math.abs( (element.scrollHeight - element.scrollTop) - element.clientHeight ) < 300)  {\n            !isAutoScroll && setIsAutoScroll(true)\n        } else {\n            isAutoScroll && setIsAutoScroll(false)\n        }\n    }\n\n    useEffect( () => {\n        if (isAutoScroll) {\n            messagesAnchor.current?.scrollIntoView({block: 'end', behavior: 'smooth'})\n        }\n        // eslint-disable-next-line\n    }, [propsMessages])\n\n\n    let MessagesList\n    if (chatMessages) {\n        MessagesList = chatMessages.map((message, index) => {\n            return <ChatMessage \n                        key={index} //todo: need generate id for key\n                        message={message} \n                        isOwnerMessage={message.userId === authUserId ? true : false} /> \n        })\n    } else {\n        MessagesList = dialogMessages?.map((message) => {\n            return <DialogMessage\n                        key={message.id} \n                        message={message} \n                        friendImg={friendImg}\n                        ownerImg={ownerImg}\n                        isOwnerMessage={message.senderId === authUserId ? true : false} />\n        })\n    }\n\n    return (\n        <div className=\"messages__list\" onScroll={scrollHandler}>\n            {!chatMessages && <DialogPagination messagesPortionSize={dialogMessagesPortionSize || 10} userId={friendId}/>}\n            {isLoading ? <Spinner/> : MessagesList}\n            <div ref={messagesAnchor}></div>\n        </div>\n    )\n})\n\nexport default MessagesList\n\n\n\ntype MessagesListPropsType = {\n    chatMessages?: ChatMessageType[]\n    dialogMessages?: DialogMessageType[]\n    dialogMessagesPortionSize?: number\n    friendId?: number\n    friendImg?: string | null | undefined\n    ownerImg?: string | null | undefined\n    isLoading: boolean\n}"],"sourceRoot":""}